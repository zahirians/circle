(this["webpackJsonpmove-oba"]=this["webpackJsonpmove-oba"]||[]).push([[1],{100:function(e,t,a){"use strict";var n=a(13),i=a(7);t.a={getAll:async e=>{let{entity:t,id:a}=e;return Object(n.c)("/v1/document/get-docs-per-entity?branch=".concat(Object(i.d)().branch,"&entityId=").concat(a,"&entity=").concat(t))},download:async e=>Object(n.d)("/v1/document/download/".concat(e)),deleteFile:async e=>Object(n.a)("/v1/document/delete/".concat(e)),upload:async(e,t,a,c,s)=>{const r=new FormData;return r.append("entity",a),r.append("entityId",t),r.append("entityRef",c),r.append("notes",s),r.append("auth",Object(i.d)().username),r.append("branch",Object(i.d)().branch),r.append("file",e),Object(n.b)("/v1/document/upload",r)}}},113:function(e,t,a){"use strict";a.d(t,"a",function(){return c}),a.d(t,"b",function(){return r});var n=a(7);const i={TURKISH:{"Welcome, ":"Ho\u015f geldin, ",Dashboard:"G\xf6sterge Paneli",Pickup:"Toplamak","Add Job":"\u0130\u015f Ekle","Pending Jobs":"Bekleyen \u0130\u015fler","Pickup Ordering":"Teslim Alma Sipari\u015fi","Job Exceptions":"\u0130\u015f \u0130stisnalar\u0131",HBL:"HBL","New HBL":"Yeni HBL","Search/Edit":"Ara/D\xfczenle","Cancelled HBLs":"\u0130ptal edilen HBLs",Complaints:"\u015fikayetler","Cargo Status":"Kargo Durumu",Office:"Ofis","Cash Settlement":"Nakit Uzla\u015fma","Payment Summary":"\xd6deme \xf6zeti",Warehouse:"Depo",Loading:"Y\xfckleniyor","Loading Point":"Y\xfckleme Noktas\u0131","Manual Loading":"Manuel Y\xfckleme","Loaded Shipments":"Y\xfcklenen G\xf6nderiler",Arrivals:"Geli\u015f","Short Loadings":"K\u0131sa Y\xfcklemeler",Reports:"Raporlar","Progress/Efficiency":"\u0130lerleme/Verimlilik","Comparison Analysis":"Kar\u015f\u0131la\u015ft\u0131rma Analizi",Admin:"y\xf6netici","Driver Management":"S\xfcr\xfcc\xfc Y\xf6netimi","Driver Tracking":"S\xfcr\xfcc\xfc Takibi","User Management":"Kullan\u0131c\u0131 y\xf6netimi","Customer Management":"M\xfc\u015fteri y\xf6netimi","User Login Info":"Kullan\u0131c\u0131 Giri\u015f Bilgileri",Settings:"Ayarlar",Support:"Destek"},CHINESE:{"Welcome, ":"Hu\u0101ny\xedng, ",Dashboard:"Y\xedbi\u01ceo b\u01cen",Pickup:"Ji\u01cen q\u01d0","Add Job":"Ti\u0101nji\u0101 g\u014dngzu\xf2","Pending Jobs":"D\xe0i ch\u01d4l\u01d0 de g\u014dngzu\xf2","Pickup Ordering":"Q\u01d4 hu\xf2 d\xecngg\xf2u","Job Exceptions":"G\u014dngzu\xf2 l\xecw\xe0i",HBL:"HBL","New HBL":"X\u012bn HBL","Search/Edit":"S\u014dusu\u01d2/bi\u0101nj\xed","Cancelled HBLs":"Q\u01d4xi\u0101o de HBL",Complaints:"T\xf3us\xf9","Cargo Status":"Hu\xf2w\xf9 zhu\xe0ngt\xe0i",Office:"B\xe0ng\u014dngsh\xec","Cash Settlement":"Xi\xe0nj\u012bn ji\xe9su\xe0n","Payment Summary":"F\xf9ku\u01cen zh\u0101iy\xe0o",Warehouse:"C\u0101ngk\xf9",Loading:"Zh\xe8ngz\xe0i ji\u0101z\xe0i","Loading Point":"Zhu\u0101ng hu\xf2 di\u01cen","Manual Loading":"Sh\u01d2ud\xf2ng ji\u0101z\xe0i","Loaded Shipments":"Y\u01d0 zhu\u0101ng hu\xf2",Arrivals:"D\xe0od\xe1","Short Loadings":"D\xe0od\xe1",Reports:"Du\u01cen f\xf9h\xe8","Progress/Efficiency":"B\xe0og\xe0o","Comparison Analysis":"J\xecnd\xf9/xi\xe0ol\u01dc",Admin:"B\u01d0ji\xe0o f\u0113nx\u012b","Driver Management":"X\xedngzh\xe8ng","Driver Tracking":"S\u012bj\u012b gu\u01cenl\u01d0","User Management":"S\u012bj\u012b zhu\u012bz\u014dng","Customer Management":"Y\xf2ngh\xf9 gu\u01cenl\u01d0","User Login Info":"Y\xf2ngh\xf9 gu\u01cenl\u01d0",Settings:"Y\xf2ngh\xf9 d\u0113ngl\xf9 x\xecnx\u012b",Support:"Sh\xe8zh\xec"}},c={ENGLISH:"ENGLISH",TURKISH:"TURKISH",CHINESE:"CHINESE"};let s="";const r=e=>{if(!s){if(!Object(n.d)().lang)return e;s=Object(n.d)().lang}return s===c.ENGLISH?e:i[s][e]||e}},114:function(e,t,a){"use strict";t.a=function(){try{return{resourceUrl:""}}catch(e){throw console.log(e),new Error("MISSING VALUES")}}},13:function(e,t,a){"use strict";a.d(t,"d",function(){return r}),a.d(t,"c",function(){return o}),a.d(t,"e",function(){return l}),a.d(t,"b",function(){return d}),a.d(t,"a",function(){return b}),a.d(t,"f",function(){return j});var n=a(114),i=a(91),c=a(7),s=a(18);const r=async(e,t)=>{const a=m(document.cookie,"api");try{let t=await fetch("".concat(Object(n.a)().resourceUrl).concat(e),{method:"GET",headers:{Authorization:"Bearer "+a}});return Object(i.a)(t,!0)}catch(c){throw c}},o=async(e,t)=>{const a=m(document.cookie,"api");try{let t=await fetch("".concat(Object(n.a)().resourceUrl).concat(e),{method:"GET",headers:{Authorization:"Bearer "+a}});return Object(i.a)(t)}catch(c){throw c}},l=async(e,t)=>{const a=m(document.cookie,"api");try{let c=await fetch("".concat(Object(n.a)().resourceUrl).concat(e),{method:"POST",body:JSON.stringify(t),headers:{accept:"application/json;charset=UTF-8","Content-type":"application/json",Authorization:"Bearer "+a}});return Object(i.a)(c)}catch(c){throw c}},d=async(e,t)=>{const a=m(document.cookie,"api");for(var c of t.entries())console.log(c[0]+" - "+c[1]),console.log(c[1].value),console.log(c[1].options);try{let c=await fetch("".concat(Object(n.a)().resourceUrl).concat(e),{method:"POST",body:t,headers:{Authorization:"Bearer "+a}});return Object(i.a)(c)}catch(s){throw s}},b=async(e,t)=>{if(Object(c.d)().userType===s.b.viewer||Object(c.d)().userType===s.b.maker||Object(c.d)().userType===s.b.editor)throw new Error("You are not authorized to Edit/Delete");const a=m(document.cookie,"api");try{let c=await fetch("".concat(Object(n.a)().resourceUrl).concat(e),{method:"DELETE",body:JSON.stringify(t),headers:{accept:"application/json;charset=UTF-8","Content-type":"application/json",Authorization:"Bearer "+a}});return Object(i.a)(c)}catch(r){throw r}},j=async(e,t)=>{const a=m(document.cookie,"api");try{let c=await fetch("".concat(Object(n.a)().resourceUrl).concat(e),{method:"PUT",body:JSON.stringify(t),headers:{accept:"application/json;charset=UTF-8","Content-type":"application/json",Authorization:"Bearer "+a}});return Object(i.a)(c)}catch(c){throw c}},m=(e,t)=>{if(!e)return"";const a=e.split("; ").filter(e=>e.startsWith(t)).map(e=>e.split("=")[1]).filter(e=>e);return a.length>0?a[a.length-1]:""}},15:function(e,t,a){"use strict";(function(e){a(424);var n=a(426);t.a=n.a}).call(this,a(116))},18:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"c",function(){return i}),a.d(t,"b",function(){return c});const n={pickup:"pickup",pickup_customer:"pickup_customer",delivery:"delivery",domestic:"domestic"},i={driver:"driver",customer:"customer",user:"user"},c={viewer:"viewer",maker:"maker",editor:"editor",admin:"admin",superadmin:"superadmin"}},27:function(e,t,a){"use strict";a.d(t,"e",function(){return i}),a.d(t,"b",function(){return c}),a.d(t,"d",function(){return s}),a.d(t,"f",function(){return r}),a.d(t,"g",function(){return o}),a.d(t,"h",function(){return l}),a.d(t,"i",function(){return d}),a.d(t,"c",function(){return b}),a.d(t,"a",function(){return j});var n=a(19);const i=e=>Math.round(1e3*e)/1e3,c=e=>Math.round(10*e)/10,s=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),r=e=>{const{length:t,breadth:a,height:n,quantity:c}=e||{};return i(t*a*n*(c||1)/1e6)},o=e=>{const{volume:t}=e||{};return i(+t/1e6)},l=e=>i(Object(n.reduce)(e,(e,t)=>e+r(t),0)),d=e=>c(Object(n.reduce)(e,(e,t)=>e+t.weight,0)),b=e=>Object(n.reduce)(e,(e,t)=>e+t.quantity,0),j=e=>{const t=Object(n.reduce)(e,(e,t)=>"DISCOUNT"===t.costType?e-+t.amount:e+ +t.amount,0);return c(t)}},3:function(e,t,a){"use strict";a.d(t,"p",function(){return o}),a.d(t,"q",function(){return j}),a.d(t,"C",function(){return O}),a.d(t,"D",function(){return v}),a.d(t,"v",function(){return D}),a.d(t,"w",function(){return w}),a.d(t,"f",function(){return I}),a.d(t,"e",function(){return E}),a.d(t,"t",function(){return W}),a.d(t,"u",function(){return V}),a.d(t,"n",function(){return K}),a.d(t,"j",function(){return Z}),a.d(t,"k",function(){return X}),a.d(t,"m",function(){return ae}),a.d(t,"l",function(){return ce}),a.d(t,"s",function(){return re}),a.d(t,"r",function(){return le}),a.d(t,"A",function(){return be}),a.d(t,"o",function(){return me}),a.d(t,"a",function(){return ve}),a.d(t,"i",function(){return Ie}),a.d(t,"F",function(){return Te}),a.d(t,"h",function(){return Ae}),a.d(t,"E",function(){return Ye}),a.d(t,"g",function(){return Ne}),a.d(t,"d",function(){return ze}),a.d(t,"b",function(){return Ge}),a.d(t,"c",function(){return Ke}),a.d(t,"z",function(){return Qe}),a.d(t,"B",function(){return et}),a.d(t,"y",function(){return ct}),a.d(t,"x",function(){return bt});var n=a(1),i=a.n(n),c=a(677),s=a(70),r=a(0);var o=e=>{const{size:t,label:a,value:n}=e;return Object(r.jsxs)(c.a,{item:!0,md:t,xs:t,children:[Object(r.jsx)(s.a,{variant:"overline",children:a}),Object(r.jsx)(s.a,{variant:"h5",children:n||"-"})]})},l=a(417),d=a(15);const b={chip:{marginRight:10,backgroundColor:d.a.primary.main,color:"white"},text:{paddingLeft:10,paddingRight:3,color:d.a.primary.main}};var j=e=>{const{label:t,value:a,size:n}=e;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(s.a,{variant:"overline",style:b.text,children:t}),Object(r.jsx)(l.a,{label:a,size:n||"medium",style:b.chip})]})},m=a(4);d.a.primary.main;var u=a(368),p=a(678),g=a(288);const h=Object(g.a)(e=>({textField:{"& .MuiOutlinedInput-root":{fontSize:"1.125rem",padding:"10px 14px",minHeight:"52px",[e.breakpoints.down("sm")]:{fontSize:"18px",padding:"12px 14px",minHeight:"56px"}},"& .MuiInputLabel-outlined":{fontSize:"1.125rem",[e.breakpoints.down("sm")]:{fontSize:"18px"}},"& .MuiInputBase-input":{padding:"10px 14px",fontSize:"1.125rem",[e.breakpoints.down("sm")]:{fontSize:"18px",padding:"12px 14px"}}}}));var O=e=>{const{size:t,label:a,name:n,value:i,onChange:s,onBlur:o,type:l,Icon:b,disabled:j,helperText:m,onKeyDown:g,autoFocus:O,error:x}=e,f=h();return b?Object(r.jsx)(c.a,{item:!0,md:t,xs:12,sm:12,children:Object(r.jsx)(u.a,{type:l||"text",className:f.textField,variant:"outlined",fullWidth:!0,placeholder:a,name:n,disabled:j||!1,error:x||!1,helperText:x||m||"",InputProps:{startAdornment:Object(r.jsx)(p.a,{position:"start",children:Object(r.jsx)(b,{style:{color:d.a.shades.light,fontSize:"1.5rem"}})})},value:i||"",onChange:s})}):Object(r.jsx)(c.a,{item:!0,md:t,xs:12,sm:12,children:Object(r.jsx)(u.a,{type:l||"text",disabled:j||!1,className:f.textField,autoFocus:O||!1,helperText:x||m||"",error:x||!1,variant:"outlined",fullWidth:!0,label:a,placeholder:a,name:n,value:i||"",onChange:s,onBlur:o,onKeyDown:g})})},x=a(740);const f=Object(g.a)(e=>({textField:{"& .MuiOutlinedInput-root":{fontSize:"1.125rem",padding:"10px 14px",minHeight:"52px",[e.breakpoints.down("sm")]:{fontSize:"18px",padding:"12px 14px",minHeight:"56px"}},"& .MuiInputLabel-outlined":{fontSize:"1.125rem",[e.breakpoints.down("sm")]:{fontSize:"18px"}},"& .MuiInputBase-input":{padding:"10px 14px",fontSize:"1.125rem",[e.breakpoints.down("sm")]:{fontSize:"18px",padding:"12px 14px"}}}}));var v=e=>{const{size:t,auto:a,label:n,name:i,value:s,onChange:o,loading:l}=e,d=f();return Object(r.jsx)(c.a,{item:!0,md:t,xs:12,sm:12,children:l?Object(r.jsx)(r.Fragment,{}):Object(r.jsx)(x.a,{freeSolo:!0,disableClearable:!0,options:a.map(e=>e),onChange:(e,t)=>{o({target:{name:i,value:t}})},renderInput:e=>Object(r.jsx)(u.a,Object(m.a)(Object(m.a)({},e),{},{className:d.textField,label:n,value:s,onChange:o,name:i,variant:"outlined",InputProps:Object(m.a)(Object(m.a)({},e.InputProps),{},{type:"search"})}))})})},y=a(371);const C=Object(g.a)(e=>({textField:{"& .MuiOutlinedInput-root":{fontSize:"1.125rem",padding:"10px 14px",minHeight:"52px",[e.breakpoints.down("sm")]:{fontSize:"18px",padding:"12px 14px",minHeight:"56px"}},"& .MuiInputLabel-outlined":{fontSize:"1.125rem",[e.breakpoints.down("sm")]:{fontSize:"18px"}},"& .MuiInputBase-input":{padding:"10px 14px",fontSize:"1.125rem",[e.breakpoints.down("sm")]:{fontSize:"18px",padding:"12px 14px"}},"& .MuiSelect-select":{padding:"10px 14px",fontSize:"1.125rem",[e.breakpoints.down("sm")]:{fontSize:"18px",padding:"12px 14px"}}}}));var D=e=>{const{size:t,label:a,name:n,value:i,onChange:s,values:o,valueObjects:l,style:d}=e,b=C(),j=d||{};return Object(r.jsx)(c.a,{item:!0,md:t,xs:12,sm:12,style:j,children:Object(r.jsxs)(u.a,{className:b.textField,select:!0,variant:"outlined",fullWidth:!0,label:a,name:n,value:i||"",onChange:s,children:[o&&o.map((e,t)=>Object(r.jsx)(y.a,{value:e,children:e},t)),l&&l.map((e,t)=>Object(r.jsx)(y.a,{value:e.value,children:e.label},t))]})})};var w=e=>{const{label:t,name:a,value:n,onChange:i,values:c,valueObjects:s,style:o}=e,l=o||{};return Object(r.jsxs)(u.a,{select:!0,variant:"outlined",margin:"dense",style:Object(m.a)({minWidth:160,marginTop:0},l),label:t||"",name:a,value:n||"",onChange:i,children:[s&&s.map((e,t)=>Object(r.jsx)(y.a,{value:e.value,children:e.label},t)),c&&c.map((e,t)=>Object(r.jsx)(y.a,{value:e,children:e},t))]})},S=a(737),k=a(11),T=a.n(k);var I=e=>{const{size:t,label:a,name:n,value:i,onChange:s}=e;return Object(r.jsx)(c.a,{item:!0,md:t,children:Object(r.jsx)(S.a,{autoOk:!0,label:a,value:i,inputVariant:"outlined",showTodayButton:!0,format:"YYYY/MM/DD hh:mm a",onChange:e=>{s({target:{name:n,value:T()(e)}})}})})};const M=Object(g.a)(e=>({textField:{"& .MuiOutlinedInput-root":{fontSize:"1.125rem",padding:"10px 14px",minHeight:"52px",[e.breakpoints.down("sm")]:{fontSize:"18px",padding:"12px 14px",minHeight:"56px"}},"& .MuiInputLabel-outlined":{fontSize:"1.125rem",[e.breakpoints.down("sm")]:{fontSize:"18px"}},"& .MuiInputBase-input":{padding:"10px 14px",fontSize:"1.125rem",[e.breakpoints.down("sm")]:{fontSize:"18px",padding:"12px 14px"}}}}));var E=e=>{const{size:t,label:a,name:n,value:i,onChange:s,isMobile:o,style:l,disabled:d,error:b,helperText:j}=e,m=M(),p=l||{};return Object(r.jsx)(c.a,{item:!0,md:t,xs:12,sm:12,style:p,children:Object(r.jsx)(u.a,{disabled:d||!1,fullWidth:!0,className:m.textField,variant:"outlined",label:a,name:n,value:(g=i,g?"string"===typeof g?g.match(/^\d{4}-\d{2}-\d{2}$/)?g.replace(/-/g,"/"):(g.match(/^\d{4}\/\d{2}\/\d{2}$/),g):T.a.isMoment(g)?g.format("YYYY/MM/DD"):"":""),onChange:e=>{let t=e.target.value;t=t.replace(/[^\d/]/g,"");let a=t;if(t.length>4&&!t.includes("/")&&(a=t.substring(0,4)+"/"+t.substring(4)),a.length>7&&2===a.split("/").length){const e=a.split("/");a=e[0]+"/"+e[1].substring(0,2)+"/"+e[1].substring(2)}a.length>10&&(a=a.substring(0,10));const i=a.replace(/\//g,"-");if(i.match(/^\d{4}-\d{2}-\d{2}$/)){T()(i,"YYYY-MM-DD",!0).isValid()?s({target:{name:n,value:i}}):s({target:{name:n,value:a}})}else s({target:{name:n,value:a}})},placeholder:"YYYY/MM/DD",error:b||!1,helperText:b||j||"Format: YYYY/MM/DD (e.g., 2000/11/24)"})});var g},Y=a(640),A=a(372),N=a(369),z=a(739),L=a(309),R=a(45),B=a.n(R),F=a(44),P=a.n(F);const H=Object(L.a)(e=>({root:{"&$checked":{color:d.a.shades.main},paddingRight:0},checked:{}}));var W=e=>{const t=H(),{size:a,label:n,name:i,value:s,onChange:o,values:l,valueLabels:d,pullRight:b,style:j}=e,u=j||{};return Object(r.jsxs)(c.a,{container:!0,md:a,style:Object(m.a)({paddingTop:10},u),justify:b?"flex-end":"flex-start",children:[n&&Object(r.jsx)(Y.a,{style:{paddingTop:10},component:"legend",children:n}),Object(r.jsx)(A.a,{row:!0,name:i,onChange:o,value:void 0===s?"":s,children:B()(l,(e,a)=>Object(r.jsx)(N.a,{value:e,control:Object(r.jsx)(z.a,{classes:t}),label:P()(d,a,e)},a))})]})},U=a(667),_=a(289),G=a(689),q=a(690);var V=e=>{const{size:t,label:a,name:n,value:i,onChange:s,values:o,valueObjects:l,pullRight:b,style:j,error:u}=e,p=j||{};return Object(r.jsxs)(c.a,{container:!0,item:!0,md:t,xs:12,sm:12,style:Object(m.a)({paddingTop:12,paddingBottom:4,paddingLeft:4},p),justifyContent:b?"flex-end":"flex-start",children:[a&&Object(r.jsx)(Y.a,{style:{paddingTop:10,fontSize:"1.125rem",color:u?"#f44336":"inherit"},component:"legend",children:a}),Object(r.jsxs)(U.a,{orientation:"horizontal",children:[B()(o,(e,t)=>Object(r.jsx)(_.a,{variant:"outlined",style:{fontSize:"1.125rem",padding:"8px 16px",borderColor:u?"#f44336":void 0},startIcon:e===i?Object(r.jsx)(G.a,{style:{color:d.a.shades.light}}):Object(r.jsx)(q.a,{}),onClick:()=>s({target:{name:n,value:e}}),children:e},t)),B()(l,(e,t)=>Object(r.jsx)(_.a,{variant:"outlined",style:{fontSize:"1.125rem",padding:"8px 16px",borderColor:u?"#f44336":void 0},startIcon:e.value===i?Object(r.jsx)(G.a,{style:{color:d.a.shades.light}}):Object(r.jsx)(q.a,{}),onClick:()=>s({target:{name:n,value:e.value}}),children:e.label},t+"i"))]})]})},J=a(680);var K=e=>{const{size:t,parentTitle:a,childTitle:n,subtitle:i,onClick:o}=e;return Object(r.jsxs)(c.a,{item:!0,md:t,children:[Object(r.jsx)(s.a,{variant:"body1",children:i}),Object(r.jsxs)(c.a,{container:!0,children:[Object(r.jsx)(J.a,{href:"#",onClick:o,children:a}),Object(r.jsx)(s.a,{variant:"h5",color:"inherit",style:{paddingLeft:10,paddingRight:10},children:" / "}),Object(r.jsx)(s.a,{variant:"h5",color:"inherit",children:n})]})]})};var Z=e=>{const{size:t,title:a,subtitle:n,Icon:i,style:o}=e,l=o||{};return i?Object(r.jsxs)(c.a,{container:!0,md:t,children:[Object(r.jsx)(c.a,{item:!0,children:Object(r.jsx)(i,{style:{fontSize:40,paddingRight:10}})}),Object(r.jsxs)(c.a,{item:!0,children:[Object(r.jsx)(s.a,{variant:"body1",children:n}),Object(r.jsx)(s.a,{variant:"h5",color:"inherit",children:a})]})]}):Object(r.jsxs)(c.a,{item:!0,md:t,style:Object(m.a)({},l),children:[Object(r.jsx)(s.a,{variant:"body1",children:n}),Object(r.jsx)(s.a,{variant:"h5",color:"inherit",children:a})]})};var X=e=>{const{size:t,title:a,subtitle:n,style:i}=e,o=i||{};return Object(r.jsxs)(c.a,{item:!0,md:t,style:Object(m.a)({},o),children:[Object(r.jsx)(s.a,{variant:"h5",color:"inherit",children:a}),Object(r.jsx)(s.a,{variant:"caption",children:n})]})},Q=a(378),$=a(186),ee=a(691);const te=Object(L.a)(e=>({overlayHeader:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,boxShadow:"0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23)"},overlayTitle:{flexGrow:1}}));var ae=e=>{const{title:t,onClose:a}=e,n=te();return Object(r.jsxs)(Q.a,{className:n.overlayHeader,variant:"dense",children:[Object(r.jsx)(s.a,{variant:"h6",color:"inherit",className:n.overlayTitle,children:t}),Object(r.jsx)($.a,{edge:"end",color:"inherit","aria-label":"close",onClick:a,children:Object(r.jsx)(ee.a,{})})]})},ne=a(675),ie=a(692);var ce=e=>{const{title:t}=e;return Object(r.jsxs)("div",{style:{display:"flex",width:"100%"},children:[Object(r.jsx)("div",{style:{width:15,height:45,background:"linear-gradient(to bottom right, #fff 0%, #fff 50%, "+d.a.shades.light+" 50%, "+d.a.shades.light+" 100%)"}}),Object(r.jsx)(ne.a,{style:{width:"98%"},expandIcon:Object(r.jsx)(ie.a,{style:{color:"white"}}),children:Object(r.jsx)("h4",{style:{color:"white"},children:t})}),Object(r.jsx)("div",{style:{width:15,height:45,background:"linear-gradient(to top left, #fff 0%, #fff 50%, "+d.a.shades.light+" 50%, "+d.a.shades.light+" 100%)"}})]})};const se=Object(g.a)(e=>({mobileField:{"& .MuiOutlinedInput-root":{fontSize:"1.125rem",padding:"10px 14px",minHeight:"52px",[e.breakpoints.down("sm")]:{fontSize:"18px",padding:"12px 14px",minHeight:"56px"}},"& .MuiInputLabel-outlined":{fontSize:"1.125rem",[e.breakpoints.down("sm")]:{fontSize:"18px"}},"& .MuiInputBase-input":{padding:"10px 14px",fontSize:"1.125rem",[e.breakpoints.down("sm")]:{fontSize:"18px",padding:"12px 14px"}}}}));var re=e=>{const t=se(),{size:a,name:n,value:s,onChange:o,label:l,helperText:d,error:b}=e,j=i.a.useMemo(()=>s||"",[s]);return Object(r.jsx)(c.a,{item:!0,md:a,xs:12,sm:12,children:Object(r.jsx)(u.a,{type:"tel",variant:"outlined",fullWidth:!0,className:t.mobileField,label:l||"Mobile Number",name:n,value:j,onChange:o,error:b||!1,helperText:b||d||"Enter full number (e.g., 0771234567 or +94771234567 for international)",inputProps:{autoComplete:"tel",inputMode:"tel"}})})},oe=a(679);var le=e=>{const{loading:t}=e;return Object(r.jsx)(c.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:t&&Object(r.jsx)(oe.a,{variant:"query"})})},de=a(380);var be=e=>{const{title:t,onClick:a,icon:n,disabled:i,style:c}=e,s=c||{};return Object(r.jsx)(de.a,{title:t,children:Object(r.jsx)("span",{children:Object(r.jsx)($.a,{style:s,onClick:a,disabled:i||!1,children:n})})})},je=a(666);var me=e=>{const{size:t,label:a,onClick:n,tooltip:i,icon:s}=e;return Object(r.jsx)(c.a,{md:t,style:{paddingTop:15},children:Object(r.jsx)(de.a,{title:i,children:Object(r.jsx)("span",{children:Object(r.jsxs)($.a,{style:{fontSize:15},onClick:n,children:[s," \xa0",a]})})})})},ue=a(248),pe=a.n(ue),ge=a(636),he=a(185),Oe=a(101),xe=a(648),fe=a(641);function ve(e){const{options:t,onClicks:a,size:n}=e,[s,o]=i.a.useState(!1),l=i.a.useRef(null),[d,b]=i.a.useState(1),j=e=>{l.current&&l.current.contains(e.target)||o(!1)};return Object(r.jsx)(c.a,{container:!0,md:n||6,direction:"column",justify:"flex-end",alignContent:"flex-end",alignItems:"flex-end",style:{marginRight:9,marginTop:2},children:Object(r.jsxs)(c.a,{item:!0,xs:12,children:[Object(r.jsxs)(U.a,{variant:"outlined",color:"primary",ref:l,"aria-label":"split button",children:[Object(r.jsx)(_.a,{size:"small",onClick:()=>{a[d]()},children:t[d]}),Object(r.jsx)(_.a,{color:"primary",size:"small","aria-controls":s?"split-button-menu":void 0,"aria-expanded":s?"true":void 0,"aria-label":"select merge strategy","aria-haspopup":"menu",onClick:()=>{o(e=>!e)},children:Object(r.jsx)(pe.a,{})})]}),Object(r.jsx)(xe.a,{open:s,anchorEl:l.current,role:void 0,transition:!0,disablePortal:!0,style:{zIndex:1e4},children:e=>{let{TransitionProps:n,placement:i}=e;return Object(r.jsx)(he.a,Object(m.a)(Object(m.a)({},n),{},{style:{transformOrigin:"bottom"===i?"center top":"center bottom"},children:Object(r.jsx)(Oe.a,{children:Object(r.jsx)(ge.a,{onClickAway:j,children:Object(r.jsx)(fe.a,{id:"split-button-menu",children:t.map((e,t)=>Object(r.jsx)(y.a,{selected:t===d,onClick:e=>((e,t)=>{b(t),a[t](),o(!1)})(0,t),children:e},e))})})})}))}})]})})}var ye=a(363),Ce=a(365),De=a(120),we=a.n(De);let Se=null,ke=null;const Te=()=>({confirm:e=>{Se(!0),ke(e)}});var Ie=()=>{const[e,t]=i.a.useState(!1),[a,n]=i.a.useState({});Se=t,ke=n;const{title:s,assigneeList:o,callback:l}=a,[d,b]=i.a.useState(null);return Object(r.jsx)(ye.a,{open:e,maxWidth:"xs",fullWidth:!0,fullScreen:!1,scroll:"body",children:Object(r.jsx)(we.a,{children:Object(r.jsxs)(Ce.a,{children:[Object(r.jsx)(ae,{title:s,onClose:()=>t(!1)}),Object(r.jsxs)(c.a,{container:!0,style:{marginTop:10,marginBottom:10},children:[Object(r.jsx)(D,{size:4,label:"Select",valueObjects:o,value:d,onChange:e=>{b(e.target.value)}}),Object(r.jsx)(_.a,{variant:"contained",color:"primary",style:{margin:8},disabled:!d,onClick:()=>{l(d),b(null),t(!1)},children:"Confirm"})]})]})})})};let Me=null,Ee=null;const Ye=()=>({confirm:e=>{Me(!0),Ee(e)}});var Ae=()=>{const[e,t]=i.a.useState(!1),[a,n]=i.a.useState({});Me=t,Ee=n;const{title:s,placeholder:o,buttonText:l,callback:d}=a,[b,j]=i.a.useState("");return Object(r.jsx)(ye.a,{open:e,maxWidth:"xs",fullWidth:!0,fullScreen:!1,scroll:"body",children:Object(r.jsx)(we.a,{children:Object(r.jsx)(ge.a,{onClickAway:()=>t(!1),children:Object(r.jsxs)(Ce.a,{children:[Object(r.jsx)(ae,{title:s,onClose:()=>t(!1)}),Object(r.jsxs)(c.a,{container:!0,style:{zIndex:1e4,marginTop:10,marginBottom:10},children:[Object(r.jsx)(O,{size:4,label:o||"Enter Detail",value:b,onKeyDown:e=>{13===e.keyCode&&(d(b),j(""),t(!1))},onChange:e=>{j(e.target.value)},autoFocus:!0,helperText:"Press Enter"}),Object(r.jsx)(_.a,{variant:"contained",color:"primary",style:{height:35,marginLeft:8,marginTop:8},disabled:!b,onClick:()=>{d(b),j(""),t(!1)},children:l||"Confirm"})]})]})})})})};var Ne=e=>{const{content:t,open:a,width:n}=e;return Object(r.jsx)(ye.a,{open:a,maxWidth:n,fullWidth:!0,fullScreen:!1,scroll:"body",children:Object(r.jsx)(we.a,{children:Object(r.jsx)(Ce.a,{children:t})})})},ze=(e,t)=>({title:Object(r.jsxs)("span",{style:{fontWeight:500,fontSize:18,letterSpacing:"-0.06px",lineHeight:"24px"},children:[t," CONFIRMATION"]}),message:Object(r.jsxs)(s.a,{children:["Are you sure you want to ",Object(r.jsx)("strong",{children:e})]}),ok:{text:t,variant:"contained",color:"DELETE"===t?"secondary":"primary"}}),Le=a(668),Re=a(670),Be=a(669),Fe=a(693),Pe=a(455),He=a(427),We=a.n(He);const Ue=Object(L.a)(e=>({root:{height:"100%",cursor:"pointer",boxShadow:"16px 16px 16px rgb(0,0,0, 0.10)"},title:{fontWeight:700,color:"white"},amount:{color:"white"}})),_e=Object(Pe.a)(e=>({badge:{backgroundColor:"white",color:"white",boxShadow:"0 0 0 4px #999999","&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"2px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}))(je.a);var Ge=e=>{const{data:t,loading:a,color:n}=e,i=Ue();return a?Object(r.jsx)(Fe.a,{variant:"text",height:200}):Object(r.jsxs)(Le.a,{className:i.root,style:{backgroundColor:n},children:[Object(r.jsx)(Re.a,{title:Object(r.jsxs)(c.a,{container:!0,justify:"space-between",children:[Object(r.jsxs)(c.a,{container:!0,justify:"space-between",children:[t.icon,Object(r.jsx)(s.a,{className:i.title,gutterBottom:!0,variant:"h4",children:t.label})]}),t.isActive&&Object(r.jsx)(c.a,{item:!0,children:Object(r.jsx)(_e,{overlap:"circle",variant:"dot",anchorOrigin:{vertical:"top",horizontal:"right"},children:Object(r.jsxs)(s.a,{className:i.title,gutterBottom:!0,variant:"h6",children:[t.labelRight,"\xa0\xa0\xa0\xa0"]})})}),!t.isActive&&Object(r.jsx)(c.a,{item:!0,children:Object(r.jsxs)(s.a,{className:i.title,gutterBottom:!0,variant:"h6",children:[t.labelRight,"\xa0\xa0\xa0\xa0"]})})]})}),Object(r.jsx)(Be.a,{children:Object(r.jsx)(c.a,{container:!0,justify:"flex-end",children:Object(r.jsx)(c.a,{item:!0,children:Object(r.jsx)(s.a,{className:i.amount,variant:"h2",children:Object(r.jsx)(We.a,{end:"-"===t.value?0:t.value})})})})})]})},qe=a(694),Ve=a(695);const Je=Object(L.a)(e=>({root:{height:"100%",cursor:"pointer",boxShadow:"5px 5px 5px rgb(0,0,0, 0.30)"},title:{fontWeight:700,color:"white"},amount:{color:"white"}}));var Ke=e=>{const{data:t,loading:a,onClick:n,color:i}=e,o=Je();return a?Object(r.jsx)(Fe.a,{variant:"text",height:150}):Object(r.jsx)(Le.a,{className:o.root,style:{marginRight:5,marginTop:5,backgroundColor:"#f2f2f2"},children:Object(r.jsxs)(Be.a,{children:[Object(r.jsxs)(c.a,{container:!0,justify:"space-between",children:[Object(r.jsx)(c.a,{item:!0,md:5,children:Object(r.jsxs)(s.a,{gutterBottom:!0,variant:"h6",children:["REF",t.id]})}),Object(r.jsx)(c.a,{container:!0,md:7,justify:"flex-end",alignContent:"center",alignItems:"center",children:Object(r.jsx)($.a,{onClick:()=>n(t.id),children:Object(r.jsx)(qe.a,{style:{color:i||"black"}})})})]}),Object(r.jsxs)(c.a,{container:!0,justify:"flex-start",children:[Object(r.jsx)(s.a,{variant:"body",children:t.address}),Object(r.jsx)(Ve.a,{style:{fontSize:17,marginTop:2}}),Object(r.jsx)(s.a,{variant:"body",children:t.slAddress})]})]})})};var Ze=a(297),Xe=a(687);var Qe=Object(Pe.a)(e=>Object(Ze.a)({root:{textTransform:"none",fontWeight:e.typography.fontWeightRegular,fontSize:e.typography.pxToRem(15),marginRight:e.spacing(1),"&:focus":{opacity:1}}}))(e=>Object(r.jsx)(Xe.a,Object(m.a)({disableRipple:!0},e))),$e=a(738);var et=Object(Pe.a)({indicator:{display:"flex",justifyContent:"center","& > div":{maxWidth:40,width:"100%",overflow:"auto",backgroundColor:"#635ee7"}}})(e=>Object(r.jsx)($e.a,Object(m.a)(Object(m.a)({},e),{},{TabIndicatorProps:{children:Object(r.jsx)("div",{})}}))),tt=a(686),at=a(683),nt=a(684),it=a(685);var ct=e=>{const{items:t}=e;return Object(r.jsx)(tt.a,{orientation:"vertical",children:t.map(e=>{let{label:t,data:a}=e;return Object(r.jsxs)(at.a,{active:!0,children:[Object(r.jsx)(nt.a,{children:t}),Object(r.jsx)(it.a,{children:Object(r.jsx)(s.a,{children:a})})]},t)})})};var st=a(743),rt=a(19);const ot=(e,t)=>Object(rt.map)(new Array(t-e),(t,a)=>({value:e+a,label:e+a===0?"12AM":e+a<12?e+a+"AM":e+a===12?"12PM":(e+a)%12+"PM"})),lt=(e,t,a)=>Object(rt.map)(e,e=>({value:e.value,label:dt(t,a,e.value)?"X":e.label})),dt=(e,t,a)=>e-t>0?a<e&&a>t:a<e||a>t;function bt(e){let{trackStartHour:t,trackEndHour:a,setTrackSelectedHour:n,shiftStart:i,shiftEnd:s}=e;return Object(r.jsxs)(c.a,{item:!0,md:12,children:[Object(r.jsxs)(c.a,{container:!0,md:12,justify:"space-between",children:[Object(r.jsx)(c.a,{item:!0,children:"Midnight"}),Object(r.jsx)(c.a,{item:!0,children:"Morning"}),Object(r.jsx)(c.a,{item:!0,children:"Noon"}),Object(r.jsx)(c.a,{item:!0,children:"Evening"}),Object(r.jsx)(c.a,{item:!0,children:"Night"})]}),Object(r.jsx)(st.a,{getAriaValueText:e=>!dt(i,s,e)&&n(e),min:t,step:1,max:a,marks:lt(ot(t,a),i,s)})]})}},38:function(e,t,a){"use strict";var n=a(4),i=a(13),c=a(7),s=a(11),r=a.n(s),o=a(27),l=a(47),d=a(19);const b=(e,t)=>e?"string"===typeof e?e:e.format(t):r()().format(t);t.a={addDomesticJob:async(e,t,a,s,o)=>{const d=Object(n.a)(Object(n.a)({},e),{},{amount:0,paid:0,amountSpec:"{}",amountSystem:"{}",pickupDate:b(e.pickupDateTime,"YYYY-MM-DD"),pickupTime:b(e.pickupDateTime,"HH:mm"),createdDate:r()().format("YYYY-MM-DD"),createdTime:r()().format("HH:mm"),auth:Object(c.d)().username,branch:Object(c.d)().branch});delete d.pickupDateTime;const j=t.map(e=>{const t=Object(n.a)({},e);return delete t.id,t});return Object(i.e)("/v1/cargo/create-with-package"+Object(l.a)("DOMESTIC-JOB-CREATED"),{cargo:d,packages:j})},getPendingDomestic:async e=>{let{startDate:t,endDate:a}=e;return Object(i.e)("/v1/cargo/get-pending-pickup",{branch:Object(c.d)().branch,fetched:-12,start:t,end:a})},getPendingPickups:async e=>{let{startDate:t,endDate:a,fetched:n}=e;return Object(i.e)("/v1/cargo/get-pending-pickup",{branch:Object(c.d)().branch,fetched:void 0===n?-1:n,start:t,end:a})},getCashSettlements:async e=>{let{startDate:t,endDate:a}=e;return Object(i.e)("/v1/cargo/get-cash-collection",{branch:Object(c.d)().branch,fetched:0,start:t,end:a})},getWarehouse:async e=>{let{startDate:t,endDate:a}=e;return Object(i.e)("/v1/cargo/get-all-in-warehouse",{branch:Object(c.d)().branch,fetched:1,start:t,end:a})},getWarehouseDelivery:async e=>{var t;let{startDate:a,endDate:n,fetched:s,hasLoadingId:r}=e;return Object(i.e)("/v1/cargo/get-all-in-destination-delivery-warehouse?hasLoadingId=".concat(r),{branch:Object(c.d)().branch,fetched:s||3,start:a,end:n,deliveryType:null===(t=Object(c.d)().deliveryType)||void 0===t?void 0:t[2]})},getWarehouseBonded:async e=>{let{startDate:t,endDate:a,shortLoaded:n,branch:s}=e;return Object(i.e)("/v1/cargo/get-all-in-destination-warehouse?shortLoaded=".concat(n),{branch:s||Object(c.d)().branch,fetched:2,start:t,end:a})},getAllHbl:async e=>{let{startDate:t,endDate:a,branch:n}=e;return Object(i.e)("/v1/cargo/get-all-extended",{branch:n||Object(c.d)().branch,start:t,end:a})},getAllHblLike:async(e,t)=>Object(i.e)("/v1/cargo/get-all-like?branch=".concat(t||Object(c.d)().branch,"&like=").concat(e),{}),getForReports:async e=>{let{startDate:t,endDate:a}=e;return Object(i.e)("/v1/cargo/get-for-reports",{branch:Object(c.d)().branch,start:t,end:a})},getCargoStatus:async e=>Object(i.c)("/v1/cargo/get-by-id/"+e),addHbl:async(e,t,a,s,d)=>{const j=Object(n.a)(Object(n.a)({},e),{},{amount:Object(o.a)(a),paid:d,amountSpec:JSON.stringify(a.map(e=>({costType:e.costType,amount:e.amount}))),amountSystem:JSON.stringify(s.map(e=>({costType:e.costType,amount:e.amount}))),pickupDate:b(e.pickupDateTime,"YYYY-MM-DD"),pickupTime:b(e.pickupDateTime,"HH:mm"),pickedUpDate:b(e.pickedUpDateTime,"YYYY-MM-DD"),pickedUpTime:b(e.pickedUpDateTime,"HH:mm"),createdDate:r()().format("YYYY-MM-DD"),createdTime:r()().format("HH:mm"),auth:Object(c.d)().username,branch:Object(c.d)().branch});delete j.pickupDateTime,delete j.pickedDateTime;const m=t.map(e=>{const t=Object(n.a)({},e);return delete t.id,t});return Object(i.e)("/v1/cargo/create-with-package"+Object(l.a)("CARGO-HBL-CREATED"),{cargo:j,packages:m})},editHbl:async(e,t,a,s,r,d,b)=>{const j=Object(n.a)(Object(n.a)({},t),d||{});return a&&(j.amount=Object(o.a)(a),j.paid=r,j.amountSpec=JSON.stringify(a.map(e=>({costType:e.costType,amount:e.amount}))),j.amountSystem=JSON.stringify(s.map(e=>({costType:e.costType,amount:e.amount})))),Object(i.f)("/v1/cargo/update/"+e+Object(l.a)(b||"EDIT-CARGO-DETAILS")+"&branch=".concat(Object(c.d)().branch),j)},editJob:async(e,t)=>{const a={pickupDate:b(t.pickupDateTime,"YYYY-MM-DD"),pickupTime:b(t.pickupDateTime,"HH:mm"),pickupArea:t.pickupArea};return Object(i.f)("/v1/cargo/update/"+e+Object(l.a)("EDIT-JOB")+"&branch=".concat(Object(c.d)().branch),a)},addJob:async e=>{const t=Object(n.a)(Object(n.a)({},e),{},{pickupDate:e.pickupDateTime.format("YYYY-MM-DD"),pickupTime:e.pickupDateTime.format("HH:mm"),createdDate:r()().format("YYYY-MM-DD"),createdTime:r()().format("HH:mm"),branch:Object(c.d)().branch,auth:Object(c.d)().username,priority:Math.floor(r.a.duration(r()().diff(r()("2021-01-01"))).asSeconds())});return delete t.pickupDateTime,Object(i.e)("/v1/cargo/create"+Object(l.a)("JOB-CREATED"),t)},getCargo:async e=>Object(i.c)("/v1/cargo/get-by-id/"+e+"?branch=".concat(Object(c.d)().branch)),getCargoByHbl:async(e,t)=>Object(i.c)("/v1/cargo/get-by-hbl?hbl="+e+"&branch="+(t||Object(c.d)().branch)),getCargos:async e=>Object(d.size)(e)>0?Object(i.c)("/v1/cargo/get-by-ids?"+e.reduce((e,t)=>e+"&ids="+t,"").substring(1)+"&branch=".concat(Object(c.d)().branch)):new Promise(e=>e([])),getCargosByHbl:async(e,t)=>Object(d.size)(e)>0?Object(i.c)("/v1/cargo/get-by-hbls?branch="+(t||Object(c.d)().branch)+e.reduce((e,t)=>e+"&hbls="+t,"")):new Promise(e=>e([])),deleteCargo:async e=>Object(i.a)("/v1/cargo/delete-many"+Object(l.a)("DELETE-CARGO")+"&branch=".concat(Object(c.d)().branch),e),undoDeleteCargo:async e=>Object(i.f)("/v1/cargo/undo-delete/"+e+Object(l.a)("DELETE-CARGO-UNDO")+"&branch=".concat(Object(c.d)().branch)),assignCargo:async(e,t)=>Object(i.f)("/v1/cargo/update-many?sms=DRIVER-ASSIGNED"+Object(l.a)("DRIVER-ASSIGN-JOB","&")+"&branch=".concat(Object(c.d)().branch),{payload:{driverId:t},ids:e,ifFetched:[-1]}),retryCargo:async e=>Object(i.f)("/v1/cargo/update-many"+Object(l.a)("RETRY-JOB")+"&branch=".concat(Object(c.d)().branch),{payload:{fetched:-1},ids:e}),retryDomestic:async e=>Object(i.f)("/v1/cargo/update-many"+Object(l.a)("RETRY-JOB")+"&branch=".concat(Object(c.d)().branch),{payload:{fetched:-12},ids:e}),assignCargoPriority:async e=>Object(i.f)("/v1/cargo/update-several"+Object(l.a)("SET-JOB-PRIORITY")+"&branch=".concat(Object(c.d)().branch),e),assignCargoWarehouse:async(e,t)=>Object(i.f)("/v1/cargo/update-many"+Object(l.a)("SET-BRANCH-WAREHOUSE")+"&branch=".concat(Object(c.d)().branch),{payload:{pickupWarehouseZone:t},ids:e}),assignDeliveryRoute:async(e,t)=>Object(i.f)("/v1/cargo/update-many"+Object(l.a)("SET-DELIVERY-ROUTE")+"&branch=".concat(Object(c.d)().branch),{payload:{deliveryRoute:t},ids:e}),assignCustomCleared:async(e,t)=>Object(i.f)("/v1/cargo/update-many"+Object(l.a)("CUSTOMS-CLEARED")+"&branch=".concat(Object(c.d)().branch),{payload:{fetched:3},ids:e}),assignCustomClearedAndCompleted:async(e,t)=>Object(i.f)("/v1/cargo/update-many"+Object(l.a)("CUSTOMS-CLEARED-COMPLETED")+"&branch=".concat(Object(c.d)().branch),{payload:{fetched:4},ids:e}),markAsShortLoading:async(e,t)=>Object(i.f)("/v1/cargo/update-many"+Object(l.a)("SHORT-LOADING")+"&branch=".concat(Object(c.d)().branch),{payload:{shortLoaded:t||"S:"},ids:e}),markAsShortLoadingFixed:async(e,t)=>Object(i.f)("/v1/cargo/update-many"+Object(l.a)("SHORT-LOADING-FIXED")+"&branch=".concat(Object(c.d)().branch),{payload:{shortLoaded:""},ids:e}),receiveCashCargo:async(e,t)=>Object(i.f)("/v1/cargo/update-many?sms=CASHED"+Object(l.a)("CASHED","&")+"&branch=".concat(Object(c.d)().branch,"&driverName=").concat(t),{payload:{fetched:1,cashedBy:Object(c.d)().username,cashedDate:r()().format("YYYY-MM-DD"),cashedTime:r()().format("HH:mm")},ids:e}),revertCashCargo:async e=>Object(i.f)("/v1/cargo/update-many"+Object(l.a)("REVERT-CASH")+"&branch=".concat(Object(c.d)().branch),{payload:{fetched:0},ids:e}),getDeletedCargo:async e=>{let{startDate:t,endDate:a}=e;return Object(i.c)("/v1/cargo/get-all-deleted?branch=".concat(Object(c.d)().branch,"&startDate=").concat(t,"&endDate=").concat(a))},getLoadedCargos:async e=>Object(i.c)("/v1/cargo/get-by-loading-id/"+e+"?branch=".concat(Object(c.d)().branch)),getDispatchedCargo:async e=>Object(i.c)("/v1/cargo/get-by-dispatched-id/"+e+"?branch=".concat(Object(c.d)().branch)),getDispatchedCargoAll:async e=>{let{startDate:t,endDate:a}=e;return Object(i.e)("/v1/cargo/get-all-in-destination-delivery-warehouse",{branch:Object(c.d)().branch,fetched:3,start:t,end:a})}}},40:function(e,t,a){"use strict";a.r(t),a.d(t,"setUserGlobal",function(){return l}),a.d(t,"getUserGlobal",function(){return d}),a.d(t,"clientY",function(){return b}),a.d(t,"fakeLogin",function(){return j});var n=a(4),i=a(91),c=a(18),s=a(114);const r=new AbortController,o={client:null},l=e=>{o.client=e},d=e=>{var t;return e?null===(t=o.client)||void 0===t?void 0:t[e]:o.client},b=()=>{if(o.client)return o.client;try{return JSON.parse(localStorage.getItem("mw-b"))}catch(e){return[]}},j=function(e){const t=e.split("?branch=")[1],a=t.split("&username=")[0],n=t.split("&username=")[1],i=n.split("&jwt=")[0],c=n.split("&jwt=")[1];console.log(a,i,c),localStorage.setItem("mw-b",JSON.stringify([a])),localStorage.setItem("mw-u",i),o.client=[a],document.cookie="api=".concat(c,"; max-age=").concat(54e6,"; path=/;")};t.default={login:async function(e,t){document.cookie="api=; Max-Age=-999; path=/;";try{let a=await fetch("".concat(Object(s.a)().resourceUrl,"/v1/authenticate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(n.a)(Object(n.a)({},e),{},{type:t}))}).then(i.a);const r=[...a.branch];return localStorage.setItem("mw-b",JSON.stringify(r)),localStorage.setItem("mw-u",e.username),localStorage.setItem("mw-u-type",t||c.c.user),o.client=r,document.cookie="api=".concat(a.jwt,"; max-age=").concat(54e6,"; path=/;"),a}catch(a){throw a}},logout:async function(){try{document.cookie="api=; Max-Age=-999; path=/;",localStorage.removeItem("mw-b"),localStorage.removeItem("mw-u"),localStorage.removeItem("mw-u-type"),o.client=null;try{const{getAuth:e}=a(88);await e().signOut()}catch(e){console.log("Firebase signout skipped:",e.message)}}catch(t){throw console.error("Logout error:",t),t}},getAuthedUser:async function(){try{return localStorage.getItem("mw-u")}catch(e){throw e}},aborter:r}},414:function(e,t){},415:function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"b",function(){return l});var n=a(7),i=a(27);const c=(e,t)=>{let{weight:a,volume:n}=t;if(""===e)return 0;const i=e.replace("weight",a).replace("volume",n);return console.log(i),(e=>{if(""===e)return 0;const t=e.split(" ");if(1===t.length)return+e;if(3===t.length){if("*"===t[1])return+t[0]*+t[2];if(">"===t[1])return+t[0]>=+t[2];if("<"===t[1])return+t[0]<+t[2]}})(i)},s=(e,t,a)=>{let{condition:n,valueIf:i,valueNot:s}=e;if(""===n)return c(i,{weight:t,volume:a});{const e=c(n,{weight:t,volume:a});return c(e?i:s,{weight:t,volume:a})}},r=(e,t,a,c,r,l)=>{const d=[],b=Object(n.c)().filter(a=>a.cargoMode===e&&a.deliveryType===t),j=Object(n.c)().filter(t=>t.cargoMode===e&&"All remaining"===t.deliveryType);b.forEach(e=>{d.push({editable:"NO"!==e.editable,costType:e.costType,amount:Object(i.b)(s(e,a,c))})}),0===b.length&&j.forEach(e=>{d.push({editable:"NO"!==e.editable,costType:e.costType,amount:Object(i.b)(s(e,a,c))})});const m=o(r,c,e);return[...d,...m,{costType:"OTHER CHARGES",amount:0,editable:!0},{costType:"DISCOUNT",amount:0,editable:!0}]},o=(e,t,a)=>{const c=[];if("riyadh"===Object(n.d)().branch&&(a===Object(n.d)().cargoMode[1]?(c.push({costType:"BILL CHARGE",amount:50,editable:!0}),c.push({costType:"BILL VAT "+100*Object(n.b)(Object(n.d)().branch).vat+"%",amount:Object(i.b)(50*Object(n.b)(Object(n.d)().branch).vat),editable:!1}),e===Object(n.d)().warehouseLocation[0]?c.push({costType:"DEST. CHARGES",amount:Object(i.b)(140*t),editable:!0}):e===Object(n.d)().warehouseLocation[1]&&c.push({costType:"DEST. CHARGES",amount:Object(i.b)(225*t),editable:!0})):a===Object(n.d)().cargoMode[0]&&c.push({costType:"BILL CHARGE",amount:40,editable:!1})),"dubai"===Object(n.d)().branch&&a===Object(n.d)().cargoMode[1]){const e=t<=.91?0:t<=.94?175:t<=1.62?245:t<=2.01?250:t<=2.51?260:t<=3?325:t<=3.8?400:450;c.push({costType:"BOX CHARGES",amount:Object(i.b)(e),editable:!0}),c.push({costType:"BOX VAT "+100*Object(n.b)(Object(n.d)().branch).vat+"%",amount:Object(i.b)(e*Object(n.b)(Object(n.d)().branch).vat),editable:!1}),c.push({costType:"VOLUME CHARGE",amount:0,editable:!0})}return c},l=(e,t)=>{var a,c,s;if(!e)return;const r="string"===typeof t.amountSpec?JSON.parse(t.amountSpec||"[]"):t.amountSpec,o=(null===(a=r.find(e=>"DEST. CHARGES"===e.costType))||void 0===a?void 0:a.amount)||"0",l=(null===(c=r.find(e=>"BILL CHARGE"===e.costType))||void 0===c?void 0:c.amount)||"0",d=(null===(s=r.find(e=>e.costType==="BILL VAT "+100*Object(n.b)(Object(n.d)().branch).vat+"%"))||void 0===s?void 0:s.amount)||"0",b=t.amount;return{hblCharge:Object(i.b)(+l),hblVat:Object(i.b)(+d),destiCharges:Object(i.b)(+o),frieghtCharges:Object(i.b)(+b-(+o+ +l+ +d)),grandTotal:b,paid:t.paid}}},420:function(e,t,a){"use strict";(function(e){var n=a(1),i=a.n(n),c=a(73),s=a(53),r=a(421),o=a(17),l=a(43),d=a(309),b=a(644),j=a(455),m=a(645),u=a(186),p=a(294),g=a.n(p),h=a(452),O=a(3),x=(a(401),a(451)),f=a(40),v=(a(633),a(0));const y=Object(d.a)({success:{backgroundColor:"rgb(152, 230, 152)",color:"rgb(15, 62, 15)"},error:{backgroundColor:"rgb(255, 179, 179)",color:"rgb(77, 0, 0)"},warning:{backgroundColor:"rgb(255, 204, 153)",color:"rgb(77, 38, 0)"},info:{backgroundColor:"rgb(153, 204, 255)",color:"rgb(0, 51, 102)"}});class C extends i.a.Component{render(){var t;const{classes:a}=this.props,n=i.a.createRef(),d=e=>()=>{n.current.closeSnackbar(e)};return null!==(t=window.location.href)&&void 0!==t&&t.split("pending?branch=")[1]&&Object(f.fakeLogin)(window.location.href),Object(v.jsx)(m.a,{children:Object(v.jsx)(b.a,{theme:h.a,children:Object(v.jsxs)(o.a,{maxSnack:4,autoHideDuration:1e4,ref:n,action:e=>Object(v.jsx)(u.a,{style:{color:"#eeeeee"},onClick:d(e),children:Object(v.jsx)(g.a,{})}),anchorOrigin:{vertical:"top",horizontal:"center"},classes:{variantSuccess:a.success,variantError:a.error,variantWarning:a.warning,variantInfo:a.info},children:[Object(v.jsx)(O.i,{}),Object(v.jsx)(O.h,{}),Object(v.jsx)(l.DialogProvider,{children:Object(v.jsx)(s.a,{utils:r.a,children:Object(v.jsx)(c.a,{basename:"undefined"!==typeof e&&Object({NODE_ENV:"production",PUBLIC_URL:"/circle",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_OLD_TYPE:"OBA"}).REACT_APP_BASE_URL||"/",children:Object(v.jsx)(x.a,{})})})})]})})})}}t.a=Object(j.a)(y)(C)}).call(this,a(116))},424:function(e,t,a){"use strict";var n=a(10);const i="#FFFFFF",c="#FF3EA5";t.a={black:"#000000",white:i,transparent:"rgba(0, 0, 0, 0)",tableHeader:{background:"rgb(220, 231, 239)",color:"rgb(0, 72, 128)"},boxShadow:{default:"16px 16px 16px rgb(0,0,0, 0.10)"},primary:{contrastText:i,dark:"rgba(69, 135, 182, 0.25)",main:c,light:n.colors.indigo[100]},shades:{main:c,light:"#6420AA",alpha:"rgba(69, 135, 182, 0.25)",bg:"#fef4ff",green:"#43a047",red:"#f32013",greenRgb:"rgb(67, 160, 71)"},secondary:{contrastText:i,dark:n.colors.blue[900],main:n.colors.blue.A400,light:n.colors.blue.A400},success:{contrastText:i,dark:n.colors.green[900],main:n.colors.green[600],light:n.colors.green[400]},info:{contrastText:i,dark:n.colors.blue[900],main:n.colors.blue[600],light:n.colors.blue[400]},warning:{contrastText:i,dark:n.colors.orange[900],main:n.colors.orange[600],light:n.colors.orange[400]},error:{contrastText:i,dark:n.colors.red[900],main:n.colors.red[600],light:n.colors.red[400]},text:{primary:n.colors.blueGrey[900],secondary:n.colors.blueGrey[600],link:n.colors.blue[600]},background:{default:i,paper:i},sidebar:{background:"white",activeColor:i,color:n.colors.blueGrey[200],activeTab:{background:i}},icon:n.colors.blueGrey[600],divider:n.colors.grey[200],table:{light:{background:"rgb(0, 87, 153, 0.08)"},dark:{background:"rgb(0, 87, 153, 0.03)"},hover:{background:"rgb(0, 87, 153, 0.20)"}},dashboard:{warning:"rgb(248, 192, 185)",success:"rgb(202, 231, 202)",info:"rgb(200, 229, 250)"}}},426:function(e,t,a){"use strict";var n=a(10);const i="#FFFFFF",c="#820000";t.a={black:"#000000",white:i,transparent:"rgba(0, 0, 0, 0)",tableHeader:{background:"rgb(220, 231, 239)",color:"rgb(0, 72, 128)"},boxShadow:{default:"16px 16px 16px rgb(0,0,0, 0.10)"},primary:{contrastText:i,dark:"rgba(69, 135, 182, 0.25)",main:c,light:n.colors.indigo[100]},shades:{main:c,light:"#043161",alpha:"rgba(69, 135, 182, 0.25)",bg:"#fef4ff",green:"#43a047",red:"#f32013",greenRgb:"rgb(67, 160, 71)"},secondary:{contrastText:i,dark:n.colors.blue[900],main:n.colors.blue.A400,light:n.colors.blue.A400},success:{contrastText:i,dark:n.colors.green[900],main:n.colors.green[600],light:n.colors.green[400]},info:{contrastText:i,dark:n.colors.blue[900],main:n.colors.blue[600],light:n.colors.blue[400]},warning:{contrastText:i,dark:n.colors.orange[900],main:n.colors.orange[600],light:n.colors.orange[400]},error:{contrastText:i,dark:n.colors.red[900],main:n.colors.red[600],light:n.colors.red[400]},text:{primary:n.colors.blueGrey[900],secondary:n.colors.blueGrey[600],link:n.colors.blue[600]},background:{default:i,paper:i},sidebar:{background:"white",activeColor:i,color:n.colors.blueGrey[200],activeTab:{background:i}},icon:n.colors.blueGrey[600],divider:n.colors.grey[200],table:{light:{background:"rgb(0, 87, 153, 0.08)"},dark:{background:"rgb(0, 87, 153, 0.03)"},hover:{background:"rgb(0, 87, 153, 0.20)"}},dashboard:{warning:"rgb(248, 192, 185)",success:"rgb(202, 231, 202)",info:"rgb(200, 229, 250)"}}},451:function(e,t,a){"use strict";var n=a(1),i=a.n(n),c=a(51),s=a(5),r=a(309),o=a(196),l=a(646),d=a(458),b=a(671),j=a(6),m=a(4),u=a(73),p=(a(401),a(744)),g=a(677),h=a(70),O=a(457),x=a(672),f=a(289),v=a.p+"static/media/logo.ce017fb0.png",y=a(120),C=a.n(y),D=a(10),w=a(647),S=a(380),k=a(642),T=a(307),I=a(301),M=a.n(I),E=a(300),Y=a.n(E),A=a(417),N=a(113),z=a(15),L=a(0);const R=["branch","pages","open","className","name","branchType"],B=Object(r.a)(e=>({root:{},item:{display:"flex",paddingTop:0,paddingBottom:0,overflow:"hidden"},button:{color:D.colors.blueGrey[800],padding:"10px 8px",justifyContent:"flex-start",textTransform:"none",letterSpacing:0,width:"100%",fontWeight:e.typography.fontWeightMedium,whiteSpace:"nowrap"},icon:{color:e.palette.icon,width:24,height:24,display:"flex",alignItems:"center",marginRight:e.spacing(1)},active:{color:e.palette.primary.main,fontWeight:e.typography.fontWeightMedium,"& $icon":{color:e.palette.primary.main}},collapsecomp:{paddingLeft:e.spacing(2)},expandIcon:{float:"right",position:"absolute",paddingRight:e.spacing(1),right:0}})),F=Object(n.forwardRef)((e,t)=>Object(L.jsx)("div",{ref:t,style:{flexGrow:1},children:Object(L.jsx)(u.c,Object(m.a)({},e))}));var P=e=>{const{branch:t,pages:a,open:n,className:c,name:r,branchType:o}=e,l=Object(j.a)(e,R),d=B(),[b]=i.a.useState({}),[u,p]=i.a.useState(!1),[g,h]=i.a.useState(()=>{var e={};return a.forEach(t=>{e[t.title]=!1}),e}),O=i.a.useReducer(()=>({}))[1],x=e=>{h(g[e]?{[e]:!1}:{[e]:!0}),O()},v=(e,t)=>!0===n?Object(L.jsx)(w.a,{className:d.item,disableGutters:!0,children:!0===e.isCollapsible&&e.subMenuList instanceof Array?Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(f.a,{className:d.button,onClick:()=>x(e.title),children:[Object(L.jsx)("div",{className:d.icon,children:e.icon}),Object(N.b)(e.title),Object(L.jsx)("div",{className:d.expandIcon,children:!0===g[e.title]?Object(L.jsx)(Y.a,{}):Object(L.jsx)(M.a,{})})]})}):Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(f.a,{activeClassName:d.active,className:d.button,component:F,to:e.href,children:[Object(L.jsx)("div",{className:d.icon,children:e.icon}),Object(N.b)(e.title),Object(L.jsx)("div",{className:d.expandIcon,children:b[e.title]?Object(L.jsx)(A.a,{size:"small",label:b[e.title]||0,style:{fontSize:11,background:z.a.shades.main,color:"white",padding:"0px"}}):Object(L.jsx)(L.Fragment,{})})]})})},t):Object(L.jsx)(S.a,{title:Object(N.b)(e.title),children:Object(L.jsx)(w.a,{className:d.item,disableGutters:!0,children:!0===e.isCollapsible&&e.subMenuList instanceof Array?Object(L.jsxs)(f.a,{className:d.button,onClick:()=>x(e.title),children:[Object(L.jsx)("div",{className:d.icon,children:e.icon}),null]}):Object(L.jsxs)(f.a,{activeClassName:d.active,className:d.button,component:F,to:e.href,children:[Object(L.jsx)("div",{className:d.icon,children:e.icon}),null]})})},t);return Object(L.jsxs)(L.Fragment,{children:[r&&Object(L.jsxs)(f.a,{style:{paddingTop:20,fontSize:15},onClick:()=>p(!u),children:[Object(L.jsx)("div",{style:{textAlign:"left",width:"100%",fontWeight:"bold"},children:r}),Object(L.jsx)("div",{className:d.expandIcon,children:!0===u?Object(L.jsx)(Y.a,{}):Object(L.jsx)(M.a,{})})]}),!u&&Object(L.jsx)(k.a,Object(m.a)(Object(m.a)({},l),{},{className:Object(s.a)(d.root,c),children:a.map((e,t)=>!0===e.isCollapsible&&e.subMenuList instanceof Array?Object(L.jsxs)(i.a.Fragment,{children:[v(e,t),Object(L.jsx)(T.a,{in:g&&!0===g[e.title]&&n,timeout:"auto",unmountOnExit:!0,className:d.collapsecomp,children:Object(L.jsx)(k.a,{component:"div",disablePadding:!0,children:e.subMenuList.map((e,a)=>v(e,t+"_"+a))})})]},t):v(e,t))}))]})},H=a(251),W=a.n(H),U=a(428),_=a.n(U),G=a(250),q=a.n(G),V=a(249),J=a.n(V),K=a(161),Z=a.n(K),X=a(429),Q=a.n(X),$=a(430),ee=a.n($),te=a(18),ae=a(696),ne=a(697);var ie=[{name:"",menu:[{title:"Dashboard",href:"/dashboard",icon:Object(L.jsx)(_.a,{}),types:[te.a.pickup,te.a.delivery]},{title:"Membership",isCollapsible:!0,types:[te.a.pickup,te.a.delivery],subMenuList:[{title:"New Member",href:"/new-member",icon:Object(L.jsx)(J.a,{}),types:[te.a.pickup]},{title:"Search/Edit",href:"/search",icon:Object(L.jsx)(q.a,{}),types:[te.a.pickup,te.a.delivery,te.a.domestic]}],icon:Object(L.jsx)(ae.a,{})},{title:"Office",isCollapsible:!0,types:[te.a.pickup],subMenuList:[{title:"Subscriptions",href:"/subscriptions",icon:Object(L.jsx)(Z.a,{}),types:[te.a.pickup]}],icon:Object(L.jsx)(ne.a,{})},{title:"Reports",isCollapsible:!0,types:[te.a.pickup,te.a.delivery],subMenuList:[{title:"Batch Summary",href:"/batch-summary",icon:Object(L.jsx)(Q.a,{}),types:[te.a.pickup,te.a.delivery,te.a.domestic]}],icon:Object(L.jsx)(ee.a,{})}]}],ce=a(3);const se=["branch","branchType","open","variant","onClose","onDrawerOpen","onSignOut","className","isDesktop"],re=i.a.forwardRef((e,t)=>Object(L.jsx)("div",{ref:t,style:{flexGrow:1},children:Object(L.jsx)(u.c,Object(m.a)({},e))})),oe=Object(r.a)(e=>({drawer:{backgroundImage:"linear-gradient(white, white, white, white, white, #04316133, #82000033, white)",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerMobile:{background:e.palette.sidebar.background,width:240,[e.breakpoints.up("lg")]:{marginTop:0,height:"calc(100% - 64px)"}},drawerClose:{height:"auto",background:e.palette.sidebar.background,overflowX:"hidden",width:e.spacing(7)+1,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),[e.breakpoints.up("sm")]:{width:e.spacing(7)+3}},root:{display:"flex",flexDirection:"column",padding:e.spacing(1),paddingTop:e.spacing(6)},button:{padding:"10px 8px",justifyContent:"flex-start",textTransform:"none",letterSpacing:0,width:"100%",fontWeight:e.typography.fontWeightMedium,whiteSpace:"nowrap"},icon:{color:e.palette.icon,width:24,height:24,display:"flex",alignItems:"center",marginRight:e.spacing(1)},logoWrapper:{textAlign:"center"},logo:{width:"70%",padding:e.spacing(1),borderRadius:"4rem",boxShadow:"0px 0px 35px rgba(0,0,0,0.25)"},divider:{[e.breakpoints.up("lg")]:{margin:e.spacing(2)}},hidden:{opacity:0}}));var le=e=>{const{branch:t,branchType:a,open:n,variant:i,onClose:c,onDrawerOpen:r,onSignOut:o,className:l,isDesktop:d}=e,b=Object(j.a)(e,se),u=oe();return Object(L.jsx)(p.a,Object(m.a)(Object(m.a)({anchor:"left",onClose:c,onOpen:r,open:n,classes:{paper:d?Object(s.a)({[u.drawer]:n,[u.drawerClose]:!n}):u.drawerMobile},variant:d?"permanent":i},b),{},{children:Object(L.jsxs)(C.a,{children:[Object(L.jsxs)(g.a,{container:!0,style:{paddingLeft:30,paddingTop:30},children:[Object(L.jsx)("img",{src:v,alt:"logo",style:{width:40,marginRight:10}}),Object(L.jsxs)(g.a,{item:!0,children:[Object(L.jsx)(h.a,{children:"Zahira College"}),Object(L.jsxs)(h.a,{children:["Mawanella - ","OBA"]})]})]}),Object(L.jsxs)("div",{className:Object(s.a)(u.root,l),children:[Object(L.jsx)(P,{pages:ie[0].menu,name:ie[0].name,open:n,branch:t,branchType:a}),n?Object(L.jsx)(O.a,{in:!0,style:{transformOrigin:"left"},timeout:1e3,children:Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(x.a,{className:u.divider}),Object(L.jsx)(g.a,{container:!0,children:Object(L.jsxs)(f.a,{className:u.button,component:re,to:"/sign-in",children:[Object(L.jsx)("div",{className:u.icon,children:Object(L.jsx)(W.a,{})}),"Logout"]})})]})}):null]})]})}))},de=(a(665),a(378),a(186)),be=(a(741),a(368)),je=(a(371),a(432),a(431),a(7));a(698);Object(r.a)(e=>({root:{boxShadow:e.palette.secondary.light},logo:{height:"46px",padding:"4px",marginTop:"4px"},toolbar:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},titleWrapper:{flexGrow:1,userSelect:"none"},title:{userSelect:"none",color:e.palette.primary.contrastText,fontWeight:400,flexGrow:1,textAlign:"center",[e.breakpoints.down("md")]:{display:"hidden"}},subtitle:{userSelect:"none",color:e.palette.primary.contrastText,fontWeight:600,flexGrow:1,textAlign:"center",fontFamily:"Changa",[e.breakpoints.down("sm")]:{display:"hidden"}},flexGrow:{flexGrow:1},signOutButton:{marginLeft:e.spacing(1)},branch:{width:130,overrides:{MuiSvgIcon:{color:"white"}}},textField:{width:"90%",marginLeft:"auto",marginRight:"auto",paddingBottom:0,marginTop:0,fontWeight:500},input:{color:"white"}}));var me=a(17),ue=a(40);const pe=Object(r.a)(e=>({root:{background:e.palette.background.default,paddingTop:6,height:"100%",overflow:"auto",[e.breakpoints.up("sm")]:{paddingTop:5},transition:e.transitions.create("padding",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},desktopLeftPadding:{paddingLeft:e.spacing(7)+1},shiftContent:{paddingLeft:240},content:{height:"98%",paddingTop:0,marginTop:6},childContainer:{height:"96%"},footerContainer:{height:"4%"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}));var ge=e=>{const{children:t}=e,{enqueueSnackbar:a}=Object(me.b)(),c=pe(),r=Object(o.a)(),j=Object(l.a)(r.breakpoints.up("md"),{defaultMatches:!0}),m=Object(ue.clientY)()||[""],[u,p]=Object(n.useState)(!1),[g,h]=Object(n.useState)(!1),[O]=i.a.useState(m[0]),[x]=i.a.useState({});i.a.useEffect(()=>{p(!0===j)},[j]);const f=window.location.href.includes("driver-app"),v=u,y=i.a.Children.map(t,e=>i.a.cloneElement(e,{isMobile:!j}));return Object(L.jsxs)("div",{className:Object(s.a)({[c.root]:!0,[c.shiftContent]:u&&j,[c.desktopLeftPadding]:j}),children:[Object(L.jsx)(d.a,{className:c.backdrop,open:g,onClick:h,children:Object(L.jsx)(b.a,{color:"inherit"})}),!f&&Object(L.jsx)(le,{onClose:()=>{p(!1)},onDrawerOpen:()=>{p(!0)},open:v,onSignOut:async()=>{try{await ue.default.logout(),f?window.Android.mwLogout():window.location.href.includes("/customer/")?window.location="".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/circle",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_OLD_TYPE:"OBA"}).REACT_APP_BASE_URL||"","/sign-in/customer"):window.location="".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/circle",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_OLD_TYPE:"OBA"}).REACT_APP_BASE_URL||"","/sign-in")}catch(e){a("Could not log out, please delete cookies manually to ensure data safety",{variant:"warning"})}},branch:O,branchType:x.type,isDesktop:j,variant:"temporary"}),!g&&Object(L.jsx)("main",{className:c.content,children:Object(L.jsx)("div",{className:c.childContainer,children:y})})]})};const he=Object(r.a)(()=>({root:{overflowY:"scroll",height:"100%"},content:{height:"100%"}}));var Oe=e=>{const{children:t}=e,a=he();return Object(L.jsx)("div",{className:a.root,children:Object(L.jsx)("main",{className:a.content,children:t})})},xe=a(101),fe=a(252),ve=a.n(fe);var ye=e=>{let{error:t}=e;return Object(L.jsxs)(g.a,{container:!0,alignContent:"center",justify:"center",alignItems:"center",spacing:4,component:xe.a,style:{height:"100%",width:"100%",margin:0},children:[Object(L.jsx)(g.a,{item:!0,children:t?Object(L.jsx)(ve.a,{}):Object(L.jsx)(b.a,{})}),Object(L.jsx)(g.a,{item:!0,children:t?Object(L.jsx)(h.a,{children:"Error. Please contact a Admin."}):Object(L.jsx)(h.a,{children:"Loading your experience..."})})]})},Ce=a(88);const De=["layout","component","types"];var we=e=>{const{layout:t,component:a,types:n}=e,s=Object(j.a)(e,De),[r,o]=i.a.useState();return i.a.useEffect(()=>{if("true"===sessionStorage.getItem("testMode")||"true"===localStorage.getItem("testMode")){const e={uid:"test-user",email:"test@zahiracollege.com",displayName:"Test User",emailVerified:!0};return Object(ue.setUserGlobal)(e),void o(e)}Object(Ce.getAuth)().onAuthStateChanged(e=>{e?(Object(ue.setUserGlobal)(e),o(e)):o(null)})},[]),r?Object(L.jsx)(c.b,Object(m.a)(Object(m.a)({},s),{},{render:e=>Object(L.jsx)(t,{types:n,children:Object(L.jsx)(a,Object(m.a)(Object(m.a)({},s),e))})})):void 0!==r?Object(L.jsx)(c.a,{to:"/sign-in"}):Object(L.jsx)(c.b,Object(m.a)(Object(m.a)({},s),{},{render:()=>Object(L.jsx)(t,{children:Object(L.jsx)(ye,{})})}))};const Se=["layout","component"];var ke=e=>{const{layout:t,component:a}=e,n=Object(j.a)(e,Se);return Object(L.jsx)(c.b,Object(m.a)(Object(m.a)({},n),{},{render:e=>Object(L.jsx)(t,{children:Object(L.jsx)(a,Object(m.a)({},e))})}))};const Te=Object(r.a)(e=>({root:{minHeight:"100vh",backgroundColor:"#F0F8FF",display:"flex",alignItems:"center",justifyContent:"center",padding:e.spacing(2)},card:{backgroundColor:"#FFFFFF",borderRadius:"16px",padding:0,maxWidth:"500px",width:"100%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.1)",overflow:"hidden"},flagStripes:{display:"flex",height:"10px",width:"100%"},redStripe:{backgroundColor:"#820000",flex:1},whiteStripe:{backgroundColor:"#FFFFFF",flex:1},blueStripe:{backgroundColor:"#0d498d",flex:1},content:{padding:e.spacing(4),textAlign:"center",[e.breakpoints.down("sm")]:{padding:e.spacing(3)}},logo:{width:"140px",height:"auto",margin:e.spacing(3,"auto",e.spacing(2)),display:"block"},title1:{fontSize:"1.5rem",fontWeight:700,color:"#0d498d",marginBottom:e.spacing(1),letterSpacing:"0.5px",[e.breakpoints.down("sm")]:{fontSize:"1.25rem"}},title2:{fontSize:"1.1rem",fontWeight:700,color:"#0d498d",textTransform:"uppercase",marginBottom:e.spacing(.5),letterSpacing:"0.5px",[e.breakpoints.down("sm")]:{fontSize:"1rem"}},title3:{fontSize:"0.9rem",fontWeight:400,color:"#820000",textTransform:"uppercase",marginBottom:e.spacing(3),letterSpacing:"0.5px",[e.breakpoints.down("sm")]:{fontSize:"0.8rem"}},buttonContainer:{display:"flex",flexDirection:"column",gap:e.spacing(2),marginTop:e.spacing(3),width:"100%"},googleButton:{backgroundColor:"#8B4513 !important",color:"#FFFFFF !important",padding:"14px 24px !important",fontSize:"1rem !important",fontWeight:600,textTransform:"none !important",borderRadius:"8px !important",minHeight:"50px !important",width:"100%",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",transition:"all 0.3s ease","&:hover":{backgroundColor:"#7A3D0F !important",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.3)",transform:"translateY(-1px)"},"&:active":{transform:"translateY(0)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"},"&:disabled":{backgroundColor:"#A0826D !important",color:"#FFFFFF !important",opacity:.6}},emailButton:{backgroundColor:"#0d498d !important",color:"#FFFFFF !important",padding:"14px 24px !important",fontSize:"1rem !important",fontWeight:600,textTransform:"none !important",borderRadius:"8px !important",minHeight:"50px !important",width:"100%",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",transition:"all 0.3s ease","&:hover":{backgroundColor:"#0a3a70 !important",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.3)",transform:"translateY(-1px)"},"&:active":{transform:"translateY(0)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"},"&:disabled":{backgroundColor:"#4A6FA5 !important",color:"#FFFFFF !important",opacity:.6}},emailInput:{marginBottom:e.spacing(2),"& .MuiOutlinedInput-root":{borderRadius:"8px"}},errorText:{color:e.palette.error.main,marginTop:e.spacing(1),fontSize:"0.875rem"},testButton:{backgroundColor:"#6c757d !important",color:"#FFFFFF !important",padding:"12px 24px !important",fontSize:"0.9rem !important",fontWeight:500,textTransform:"none !important",borderRadius:"8px !important",minHeight:"44px !important",width:"100%",marginTop:e.spacing(1),boxShadow:"0 1px 3px rgba(0, 0, 0, 0.15)",transition:"all 0.3s ease","&:hover":{backgroundColor:"#5a6268 !important",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.2)"}}}));var Ie=Object(c.g)(e=>{const t=Te(),{enqueueSnackbar:i}=Object(me.b)(),[c,s]=Object(n.useState)(""),[r,o]=Object(n.useState)(!1),[l,d]=Object(n.useState)(!1),[b,j]=Object(n.useState)(!1),[m,u]=Object(n.useState)("");Object(n.useEffect)(()=>{if(Object(Ce.isSignInWithEmailLink)(window.location.href)){const e=localStorage.getItem("emailForSignIn");if(e)return void p(e)}const t=Object(Ce.getAuth)().onAuthStateChanged(t=>{if(t){const t=localStorage.getItem("loginType");"google"===t?e.history.push("/dashboard"):"email"===t?e.history.push("/user/profile"):e.history.push("/dashboard")}});return()=>t()},[]);const p=async e=>{j(!0),u("");try{await Object(Ce.signInWithEmailLink)(e,window.location.href),localStorage.setItem("loginType","email"),localStorage.removeItem("emailForSignIn"),i("Successfully signed in!",{variant:"success"})}catch(m){u(m.message||"Failed to sign in with email link"),i(m.message||"Failed to sign in",{variant:"error"}),j(!1)}},g=async()=>{if(c&&c.includes("@")){j(!0),u("");try{await Object(Ce.sendSignInLinkToEmail)(c),localStorage.setItem("emailForSignIn",c),localStorage.setItem("loginType","email"),d(!0),i("Sign-in link sent to your email! Please check your inbox and click the link to sign in.",{variant:"success",autoHideDuration:8e3})}catch(m){u(m.message||"Failed to send sign-in link"),i(m.message||"Failed to send sign-in link",{variant:"error"}),j(!1)}}else u("Please enter a valid email address")};return Object(L.jsx)("div",{className:t.root,children:Object(L.jsxs)("div",{className:t.card,children:[Object(L.jsxs)("div",{className:t.flagStripes,children:[Object(L.jsx)("div",{className:t.redStripe}),Object(L.jsx)("div",{className:t.whiteStripe}),Object(L.jsx)("div",{className:t.blueStripe})]}),Object(L.jsxs)("div",{className:t.content,children:[Object(L.jsx)("img",{src:v,alt:"Zahira College Logo",className:t.logo}),Object(L.jsx)(h.a,{className:t.title1,children:"Zahirians Members Circle"}),Object(L.jsx)(h.a,{className:t.title2,children:"OLD BOYS' ASSOCIATION"}),Object(L.jsx)(h.a,{className:t.title3,children:"ZAHIRA COLLEGE MAWANELLA"}),m&&Object(L.jsx)(h.a,{className:t.errorText,children:m}),r?l?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(h.a,{variant:"body1",style:{marginBottom:16,color:"#4caf50"},children:["\u2713 Sign-in link sent to ",Object(L.jsx)("strong",{children:c})]}),Object(L.jsx)(h.a,{variant:"body2",color:"textSecondary",style:{marginBottom:16},children:"Please check your email and click the link to sign in. The link will work on this device."}),Object(L.jsx)(f.a,{fullWidth:!0,variant:"text",onClick:()=>{o(!1),d(!1),s(""),u("")},style:{marginTop:8},children:"Back to Login"})]}):Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(be.a,{fullWidth:!0,className:t.emailInput,label:"Email Address",type:"email",value:c,onChange:e=>s(e.target.value),onKeyPress:e=>{"Enter"===e.key&&!b&&c&&g()},disabled:b,variant:"outlined",autoFocus:!0}),Object(L.jsx)(f.a,{fullWidth:!0,className:t.emailButton,onClick:g,disabled:b||!c||!c.includes("@"),children:b?"Sending...":"Send Login Link"}),Object(L.jsx)(f.a,{fullWidth:!0,variant:"text",onClick:()=>{o(!1),s(""),u("")},disabled:b,style:{marginTop:8},children:"Back"})]}):Object(L.jsxs)("div",{className:t.buttonContainer,children:[Object(L.jsx)(f.a,{fullWidth:!0,variant:"contained",className:t.googleButton,onClick:async()=>{j(!0),u("");try{await Object(Ce.signInWithGoogle)(),localStorage.setItem("loginType","google")}catch(m){u(m.message||"Failed to sign in with Google"),i(m.message||"Failed to sign in with Google",{variant:"error"}),j(!1)}},disabled:b,children:"Login with Google"}),Object(L.jsx)(f.a,{fullWidth:!0,variant:"contained",className:t.emailButton,onClick:()=>o(!0),disabled:b,children:"Login with email"}),Object(L.jsx)(f.a,{fullWidth:!0,variant:"contained",className:t.testButton,onClick:async()=>{j(!0),u("");try{const c={uid:"test-user-"+Date.now(),email:"test@zahiracollege.com",displayName:"Test User",emailVerified:!0};localStorage.setItem("loginType","email"),localStorage.setItem("testMode","true"),sessionStorage.setItem("userSessionToken","test-mode-token"),sessionStorage.setItem("userMemberId","test-member-id"),sessionStorage.setItem("testMode","true");try{const{setUserGlobal:e}=a(40);e(c)}catch(t){}try{const e=Object(Ce.getAuth)();await e.signInAnonymously(),localStorage.setItem("loginType","email")}catch(n){console.log("Test mode: Continuing without Firebase auth")}i("Test login successful! No verification required.",{variant:"success"}),setTimeout(()=>{e.history.push("/user/profile")},500)}catch(m){u("Test login failed"),i("Test login failed: "+m.message,{variant:"error"}),j(!1)}},disabled:b,children:"\ud83e\uddea Test Login (No Verification)"})]})]})]})})});const Me=Object(r.a)(e=>({root:{padding:e.spacing(2)},content:{paddingTop:35,textAlign:"center"},image:{marginTop:5,display:"inline-block",maxWidth:"100%",width:560}}));var Ee=()=>{const e=Me();return Object(L.jsx)("div",{className:e.root,children:Object(L.jsx)(g.a,{container:!0,justify:"center",spacing:4,children:Object(L.jsx)(g.a,{item:!0,lg:6,xs:12,children:Object(L.jsxs)("div",{className:e.content,children:[Object(L.jsx)(h.a,{variant:"h1",children:"404: page doesn't exist"}),Object(L.jsx)(h.a,{variant:"subtitle2",children:"Sorry."})]})})})})},Ye=a(668),Ae=a(669),Ne=a(700),ze=a(701),Le=a(60),Re=a(24);const Be="memberVerifications",Fe=()=>Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),Pe=async(e,t)=>{const a=Object(Le.e)(),n=Object(Re.b)(a,"members"),i=[];e&&i.push(Object(Re.k)(n,Object(Re.n)("email","==",e))),t&&i.push(Object(Re.k)(n,Object(Re.n)("contact","==",t)));for(const c of i){const e=await Object(Re.h)(c);if(!e.empty){const t=e.docs[0];return Object(m.a)({id:t.id},t.data())}}return null};var He=async(e,t)=>{try{const a=await Pe(e,t);if(!a)throw new Error("No member found with this email or phone number");const n=Fe(),i=new Date(Date.now()+864e5),c="".concat(window.location.origin,"/user/verify?token=").concat(n),s=Object(Le.e)(),r=Object(Re.d)(s,Be,"link_".concat(n));await Object(Re.l)(r,{memberId:a.id,token:n,type:"link",expiresAt:i,createdAt:new Date});const o=e||a.email;return o&&await(async(e,t,a)=>{const n="".concat(window.location.origin,"/user/verify?token=").concat(t);return console.log("[EMAIL LINK] To: ".concat(e,", Link: ").concat(n,", Member: ").concat(a)),console.log("\u26a0\ufe0f  Email integration required! Link is logged above for testing."),{success:!0}})(o,n,a.fullName||a.shortName),{success:!0,link:c,token:n}}catch(a){throw a}},We=async e=>{try{const t=Object(Le.e)(),a=Object(Re.d)(t,Be,"link_".concat(e)),n=await Object(Re.g)(a);if(!n.exists())throw new Error("Invalid or expired link");const i=n.data();if(new Date>i.expiresAt.toDate())throw await Object(Re.c)(a),new Error("Link has expired");const c=Fe(),s=new Date(Date.now()+72e5),r=Object(Re.d)(t,Be,"session_".concat(i.memberId));return await Object(Re.l)(r,{memberId:i.memberId,token:c,type:"session",expiresAt:s,createdAt:new Date}),await Object(Re.c)(a),{success:!0,token:c,memberId:i.memberId}}catch(t){throw t}},Ue=async e=>{try{const t=Object(Le.e)(),a=Object(Re.b)(t,Be),n=Object(Re.k)(a,Object(Re.n)("token","==",e),Object(Re.n)("type","==","session")),i=await Object(Re.h)(n);return i.empty||await Object(Re.c)(i.docs[0].ref),{success:!0}}catch(t){throw t}},_e=a(33),Ge=a(699);const qe=Object(r.a)(e=>({headerContainer:{backgroundColor:"#fff",padding:e.spacing(2,3),borderBottom:"3px solid",borderImage:"linear-gradient(to right, #820000 0%, #820000 50%, #043161 50%, #043161 100%) 1",[e.breakpoints.down("sm")]:{padding:e.spacing(1.5,2)}},headerContent:{display:"flex",alignItems:"center",justifyContent:"space-between",maxWidth:1400,margin:"0 auto",gap:e.spacing(2),[e.breakpoints.down("sm")]:{flexDirection:"column",alignItems:"flex-start",gap:e.spacing(1)}},leftSection:{display:"flex",alignItems:"center",gap:e.spacing(2),flex:1,[e.breakpoints.down("sm")]:{width:"100%",gap:e.spacing(1.5)}},logo:{width:70,height:70,objectFit:"contain",[e.breakpoints.down("sm")]:{width:50,height:50}},titleSection:{display:"flex",flexDirection:"column",gap:e.spacing(.5)},mainTitle:{fontSize:"1.5rem",fontWeight:600,color:"#043161",lineHeight:1.2,[e.breakpoints.down("md")]:{fontSize:"1.25rem"},[e.breakpoints.down("sm")]:{fontSize:"1rem"}},subtitle:{fontSize:"0.875rem",fontWeight:600,color:"#820000",textTransform:"uppercase",letterSpacing:"0.5px",[e.breakpoints.down("sm")]:{fontSize:"0.75rem"}},collegeText:{fontSize:"0.75rem",color:"#666",fontWeight:500,[e.breakpoints.down("sm")]:{fontSize:"0.65rem"}},rightSection:{display:"flex",alignItems:"center",gap:e.spacing(2),[e.breakpoints.down("sm")]:{width:"100%",justifyContent:"space-between",gap:e.spacing(1)}},memberInfo:{textAlign:"right",[e.breakpoints.down("sm")]:{textAlign:"left",flex:1}},memberName:{fontSize:"1rem",fontWeight:600,color:"#043161",lineHeight:1.2,[e.breakpoints.down("sm")]:{fontSize:"0.875rem"}},memberId:{fontSize:"0.75rem",color:"#666",fontWeight:500,[e.breakpoints.down("sm")]:{fontSize:"0.65rem"}},logoutButton:{color:"#820000","&:hover":{backgroundColor:"rgba(130, 0, 0, 0.08)"},[e.breakpoints.down("sm")]:{padding:e.spacing(1)}},testModeBadge:{display:"inline-block",backgroundColor:"#ff9800",color:"#fff",padding:"2px 8px",borderRadius:4,fontSize:"0.65rem",fontWeight:600,marginLeft:e.spacing(1),[e.breakpoints.down("sm")]:{fontSize:"0.55rem",padding:"2px 6px"}}}));var Ve=e=>{let{memberName:t,memberId:a,onLogout:n,showLogout:i=!0}=e;const c=qe(),s=Object(_e.a)(),r=(Object(l.a)(s.breakpoints.down("sm")),"true"===sessionStorage.getItem("testMode"));return Object(L.jsx)("div",{className:c.headerContainer,children:Object(L.jsxs)("div",{className:c.headerContent,children:[Object(L.jsxs)("div",{className:c.leftSection,children:[Object(L.jsx)("img",{src:v,alt:"Zahira College Logo",className:c.logo}),Object(L.jsxs)("div",{className:c.titleSection,children:[Object(L.jsx)(h.a,{className:c.mainTitle,children:"Zahirians Members Circle"}),Object(L.jsx)(h.a,{className:c.subtitle,children:"Old Boys' Association"}),Object(L.jsx)(h.a,{className:c.collegeText,children:"Zahira College Mawanella"})]})]}),Object(L.jsxs)("div",{className:c.rightSection,children:[t&&Object(L.jsxs)("div",{className:c.memberInfo,children:[Object(L.jsxs)(h.a,{className:c.memberName,children:[t,r&&Object(L.jsx)("span",{className:c.testModeBadge,children:"TEST MODE"})]}),a&&Object(L.jsxs)(h.a,{className:c.memberId,children:["Member ID: ",a]})]}),i&&n&&Object(L.jsx)(de.a,{className:c.logoutButton,onClick:n,title:"Logout",children:Object(L.jsx)(Ge.a,{})})]})]})})};const Je=Object(r.a)(e=>{var t,a;return{root:{backgroundImage:"url(./images/login-bg.jpg)",backgroundSize:"cover",backgroundPosition:"top",minHeight:"100vh",display:"flex",flexDirection:"column",backgroundColor:e.palette.background.default||"#f5f5f5"},card:{maxWidth:450,width:"100%",margin:"auto",marginTop:e.spacing(4),marginBottom:e.spacing(4),borderRadius:10,background:"rgba(255, 255, 255, 0.95)",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",[e.breakpoints.down("sm")]:{margin:e.spacing(2),marginTop:e.spacing(2)}},content:{padding:e.spacing(4),textAlign:"center",[e.breakpoints.down("sm")]:{padding:e.spacing(2)}},textField:{marginBottom:e.spacing(3),marginTop:e.spacing(2),"& .MuiOutlinedInput-root":{fontSize:"1.1rem",padding:"14px 16px",minHeight:"60px"},"& .MuiInputLabel-outlined":{fontSize:"1.1rem",transform:"translate(16px, 20px) scale(1)","&.MuiInputLabel-shrink":{transform:"translate(16px, -6px) scale(0.75)"}},"& .MuiInputBase-input":{padding:"14px 16px",fontSize:"1.1rem"}},button:{marginTop:e.spacing(1),padding:e.spacing(1.5),fontSize:"1rem"},successMessage:{marginTop:e.spacing(2),padding:e.spacing(2),backgroundColor:(null===(t=e.palette.success)||void 0===t?void 0:t.light)||"#e8f5e9",borderRadius:8,color:(null===(a=e.palette.success)||void 0===a?void 0:a.dark)||"#2e7d32"},linkBox:{marginTop:e.spacing(2),padding:e.spacing(2),backgroundColor:"#f5f5f5",borderRadius:8,border:"1px solid #ddd",wordBreak:"break-all"},linkText:{fontFamily:"monospace",fontSize:"0.9rem",color:e.palette.primary.main,cursor:"pointer",textDecoration:"underline"}}});var Ke=Object(c.g)(e=>{const t=Je(),{enqueueSnackbar:a}=Object(me.b)(),{history:c,location:s}=e,r=new URLSearchParams(s.search).get("token"),[o,l]=Object(n.useState)(!1),[d,b]=Object(n.useState)(""),[j,m]=Object(n.useState)(!1),[u,p]=Object(n.useState)("");i.a.useEffect(()=>{r&&g(r)},[r]);const g=async e=>{l(!0);try{const t=await We(e);sessionStorage.setItem("userSessionToken",t.token),sessionStorage.setItem("userMemberId",t.memberId),a("Verification successful!",{variant:"success"}),c.push("/user/profile")}catch(t){a(t.message||"Invalid or expired link",{variant:"error"})}finally{l(!1)}},O=async()=>{if(d&&d.includes("@")){l(!0);try{const e=await He(d,null);m(!0),e.link&&p(e.link),a("Secure link sent to your email!",{variant:"success"})}catch(e){a(e.message||"Failed to send secure link",{variant:"error"})}finally{l(!1)}}else a("Please enter a valid email address",{variant:"warning"})};return Object(L.jsxs)("div",{className:t.root,children:[Object(L.jsx)(Ve,{showLogout:!1}),Object(L.jsx)(Ye.a,{className:t.card,children:Object(L.jsxs)(Ae.a,{className:t.content,children:[Object(L.jsx)(ce.r,{loading:o}),j?Object(L.jsxs)("div",{className:t.successMessage,children:[Object(L.jsx)(h.a,{variant:"h6",gutterBottom:!0,children:"\u2713 Link Sent!"}),Object(L.jsxs)(h.a,{variant:"body2",children:["We've sent a secure link to ",Object(L.jsx)("strong",{children:d})]}),Object(L.jsx)(h.a,{variant:"body2",style:{marginTop:10},children:"Please check your email and click the link to access your profile."}),u&&Object(L.jsxs)("div",{className:t.linkBox,children:[Object(L.jsx)(h.a,{variant:"body2",style:{marginBottom:8,fontWeight:"bold"},children:"Development Mode - Click link below:"}),Object(L.jsx)(h.a,{variant:"body2",className:t.linkText,onClick:()=>{window.location.href=u},children:u}),Object(L.jsx)(h.a,{variant:"caption",color:"textSecondary",style:{display:"block",marginTop:8},children:"(This link is shown because email service is not configured yet)"})]}),Object(L.jsx)(h.a,{variant:"body2",color:"textSecondary",style:{marginTop:15,fontSize:"0.85rem"},children:"The link will expire in 24 hours."}),Object(L.jsx)(f.a,{variant:"outlined",color:"primary",size:"small",style:{marginTop:15},onClick:()=>{m(!1),b(""),p("")},children:"Send to Different Email"})]}):Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(h.a,{variant:"body1",color:"textSecondary",style:{marginBottom:10},children:"Enter your email address to receive a secure link to access and update your member details"}),Object(L.jsx)(be.a,{fullWidth:!0,className:t.textField,label:"Email Address",type:"email",value:d,onChange:e=>b(e.target.value),onKeyPress:e=>{"Enter"===e.key&&!o&&d&&O()},InputProps:{startAdornment:Object(L.jsx)(Ne.a,{style:{marginRight:8,color:"#999"}})},disabled:o,autoFocus:!0}),Object(L.jsx)(f.a,{fullWidth:!0,variant:"contained",color:"primary",className:t.button,onClick:O,disabled:o||!d||!d.includes("@"),startIcon:Object(L.jsx)(ze.a,{}),size:"large",children:o?"Sending...":"Send Secure Link"}),Object(L.jsx)(f.a,{fullWidth:!0,variant:"outlined",color:"secondary",className:t.button,onClick:()=>{sessionStorage.setItem("userSessionToken","test-mode-token"),sessionStorage.setItem("userMemberId","test-member-id"),sessionStorage.setItem("testMode","true"),c.push("/user/profile")},style:{marginTop:10},size:"large",children:"\ud83e\uddea Test Mode - Skip Verification"})]})]})})]})}),Ze=a(686),Xe=a(683),Qe=a(684),$e=a(705),et=a(704),tt=a(689),at=a(706),nt=a(702),it=a(55),ct=a(673),st=a(674),rt=a(695),ot=a(11),lt=a.n(ot);const dt=Object(r.a)(e=>({card:{backgroundColor:e.palette.background.paper||"#fff",borderRadius:8,padding:e.spacing(2),marginBottom:e.spacing(2)},buttonGroup:{marginTop:e.spacing(3),display:"flex",justifyContent:"space-between"}}));var bt=e=>{var t,a,n;let{memberData:c,memberId:s,onNext:r,onDataUpdate:o}=e;const l=dt(),{enqueueSnackbar:d}=Object(me.b)(),[b,j]=i.a.useState(!1),[u,p]=i.a.useState(!1),[h,O]=i.a.useState({}),[x,v]=i.a.useState(!1),[y,C]=i.a.useState({}),[D,w]=i.a.useState({});let S=null,k={};try{var T;S=null===(T=Object(je.d)())||void 0===T?void 0:T.branch,k=S&&Object(je.b)(S)||{}}catch(M){S=null,k={}}i.a.useEffect(()=>{if(c){const e=e=>{if(!e)return lt()().subtract(25,"year");if(lt.a.isMoment(e))return e;try{return lt()(e)}catch(M){return lt()().subtract(25,"year")}},t=Object(m.a)(Object(m.a)({},c),{},{dateOfBirth:e(c.dateOfBirth),memberSince:c.memberSince?e(c.memberSince):lt()().startOf("year")});O(t),C(JSON.parse(JSON.stringify(t)))}},[c]);const I=e=>{const t=Object(m.a)(Object(m.a)({},h),{},{[e.target.name]:e.target.value});O(t);const a=JSON.stringify(t)!==JSON.stringify(y);if(v(a),D[e.target.name]){const t=Object(m.a)({},D);delete t[e.target.name],w(t)}};return Object(L.jsx)(Ye.a,{className:l.card,children:Object(L.jsxs)(Ae.a,{children:[Object(L.jsx)(ce.r,{loading:b||u}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:0},children:Object(L.jsx)(g.a,{item:!0,xs:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"PERSONAL DETAILS"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:2,children:[Object(L.jsx)(ce.C,{size:6,label:"Full Name*",name:"fullName",value:h.fullName,onChange:I,error:D.fullName,helperText:D.fullName}),Object(L.jsx)(ce.C,{size:6,label:"Name with Initial*",name:"shortName",value:h.shortName,onChange:I}),Object(L.jsx)(ce.C,{size:6,label:"NIC Number*",name:"nic",value:h.nic,onChange:I,error:D.nic,helperText:D.nic}),Object(L.jsx)(ce.C,{size:6,label:"Membership ID",name:"memberCode",value:h.memberCode,disabled:!0}),Object(L.jsx)(ce.u,{size:3,name:"gender",onChange:I,value:h.gender,values:["Male","Female"],error:D.gender}),D.gender&&Object(L.jsx)(g.a,{item:!0,xs:12,children:Object(L.jsx)("span",{style:{color:"#f44336",fontSize:"0.75rem",marginLeft:"14px"},children:D.gender})}),Object(L.jsx)(ce.e,{size:3,label:"Date of Birth*",name:"dateOfBirth",value:h.dateOfBirth,onChange:I,error:D.dateOfBirth,helperText:D.dateOfBirth})]})})]})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:5},children:Object(L.jsx)(g.a,{item:!0,xs:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"CONTACT DETAILS"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:2,children:[Object(L.jsx)(ce.C,{size:3,label:"Email*",name:"email",value:h.email,onChange:I,error:D.email,helperText:D.email}),Object(L.jsx)(ce.C,{size:6,label:"Address",name:"address",value:h.address,onChange:I}),Object(L.jsx)(ce.s,{size:6,label:"Mobile Number*",name:"contact",countryCode:S&&(null===(t=Object(je.d)())||void 0===t?void 0:t.countryCodeConsignee)||"+94",value:h.contact,onChange:I,error:D.contact,helperText:D.contact}),Object(L.jsx)(ce.s,{size:6,label:"Landline Number",name:"contactAlt",countryCode:S&&(null===(a=Object(je.d)())||void 0===a?void 0:a.countryCodeConsignee)||"+94",value:h.contactAlt,onChange:I}),Object(L.jsx)(ce.C,{size:6,label:"Note",name:"note",value:h.note,onChange:I})]})})]})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:5},children:Object(L.jsx)(g.a,{item:!0,xs:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"SCHOOL DAYS"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:2,children:[Object(L.jsx)(ce.C,{size:2,label:"O/L Batch*",name:"batchOl",value:h.batchOl,onChange:I,error:D.batchOl,helperText:D.batchOl}),Object(L.jsx)(ce.C,{size:2,label:"A/L Batch",name:"batchAl",value:h.batchAl,onChange:I}),Object(L.jsx)(ce.C,{size:2,label:"Year of Admission",name:"yearOfAdmission",value:h.yearOfAdmission,onChange:I}),Object(L.jsx)(ce.C,{size:2,label:"Year of Leaving",name:"yearOfLeaving",value:h.yearOfLeaving,onChange:I}),Object(L.jsx)(ce.C,{size:2,label:"Index Number",name:"indexNumber",value:h.indexNumber,onChange:I}),Object(L.jsx)(ce.C,{size:6,label:"Achievements",name:"achievements",value:h.achievements,onChange:I}),Object(L.jsx)(ce.C,{size:6,label:"Positions Held",name:"postionsHeld",value:h.postionsHeld,onChange:I})]})})]})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:5},children:Object(L.jsx)(g.a,{item:!0,xs:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"EMPLOYMENT DETAILS"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:2,children:[Object(L.jsx)(ce.C,{size:2,label:"Work Place",name:"workPlace",value:h.workPlace,onChange:I}),Object(L.jsx)(ce.C,{size:2,label:"Designation",name:"designation",value:h.designation,onChange:I}),Object(L.jsx)(ce.D,{size:2,label:"Category",name:"workCategory",auto:S&&(null===(n=Object(je.d)())||void 0===n?void 0:n.workCategory)||[],value:h.workCategory,onChange:I}),Object(L.jsx)(ce.C,{size:6,label:"Note",name:"workNote",value:h.workNote,onChange:I})]})})]})})}),Object(L.jsxs)("div",{className:l.buttonGroup,children:[Object(L.jsx)("div",{}),Object(L.jsx)(f.a,{variant:"contained",color:"primary",size:"large",endIcon:Object(L.jsx)(rt.a,{}),disabled:u,onClick:async()=>{if((()=>{const e={};return h.fullName&&h.fullName.trim()||(e.fullName="Full Name is required"),h.nic&&h.nic.trim()||(e.nic="NIC Number is required"),h.gender||(e.gender="Gender is required"),h.dateOfBirth&&("string"!==typeof h.dateOfBirth||h.dateOfBirth.trim())||(e.dateOfBirth="Date of Birth is required"),h.email&&h.email.trim()||(e.email="Email is required"),h.contact&&h.contact.trim()||(e.contact="Mobile Number is required"),h.batchOl&&h.batchOl.trim()||(e.batchOl="O/L Year is required"),w(e),0===Object.keys(e).length})())if(x){p(!0);try{const e=e=>e?"string"===typeof e?e:lt.a.isMoment(e)?e.format("YYYY-MM-DD"):null:null,t={shortName:h.shortName,fullName:h.fullName,nic:h.nic,gender:h.gender,email:h.email,address:h.address,contact:h.contact,contactAlt:h.contactAlt,note:h.note,workPlace:h.workPlace,designation:h.designation,workCategory:h.workCategory,workNote:h.workNote,dateOfBirth:e(h.dateOfBirth),memberSince:e(h.memberSince),batchOl:h.batchOl,batchAl:h.batchAl,yearOfAdmission:h.yearOfAdmission,yearOfLeaving:h.yearOfLeaving,indexNumber:h.indexNumber,achievements:h.achievements,postionsHeld:h.postionsHeld,obaNote:h.obaNote};await it.a.updateSelf(s,t),C(JSON.parse(JSON.stringify(h))),v(!1),o(t),r&&r()}catch(e){d(e.message||"Failed to update",{variant:"error"})}finally{p(!1)}}else r&&r();else d("Please fill all mandatory fields",{variant:"error"})},children:u?"Saving...":x?"Save & Continue":"Continue"})]})]})})},jt=a(703);const mt=Object(r.a)(e=>({card:{backgroundColor:e.palette.background.paper||"#fff",borderRadius:8,padding:e.spacing(3),marginBottom:e.spacing(2),[e.breakpoints.down("sm")]:{padding:e.spacing(2)}},buttonGroup:{marginTop:e.spacing(3),display:"flex",justifyContent:"space-between",gap:e.spacing(2),[e.breakpoints.down("sm")]:{flexDirection:"column"}},button:{fontSize:"1.125rem",padding:"10px 24px",[e.breakpoints.down("sm")]:{fontSize:"1rem",padding:"12px 24px",width:"100%"}},sectionTitle:{fontSize:"1.5rem",fontWeight:"bold",marginTop:e.spacing(3),marginBottom:e.spacing(2),[e.breakpoints.down("sm")]:{fontSize:"1.375rem",marginTop:e.spacing(2)}},sectionDescription:{fontSize:"1.125rem",marginBottom:e.spacing(2),[e.breakpoints.down("sm")]:{fontSize:"1rem"}},amountCard:{padding:e.spacing(2.5),backgroundColor:"#f5f5f5",marginBottom:e.spacing(3),borderRadius:8,[e.breakpoints.down("sm")]:{padding:e.spacing(2)}},amountLabel:{fontSize:"1.125rem",marginBottom:e.spacing(1),[e.breakpoints.down("sm")]:{fontSize:"1rem"}},amountValue:{fontSize:"2rem",fontWeight:"bold",[e.breakpoints.down("sm")]:{fontSize:"1.75rem"}},amountSubtext:{fontSize:"1rem",marginTop:e.spacing(.5),[e.breakpoints.down("sm")]:{fontSize:"0.9375rem"}},divider:{marginTop:e.spacing(3),marginBottom:e.spacing(3),[e.breakpoints.down("sm")]:{marginTop:e.spacing(2),marginBottom:e.spacing(2)}},cardDetailsSection:{marginTop:e.spacing(2)},textField:{"& .MuiOutlinedInput-root":{fontSize:"1.125rem",padding:"12px 14px",minHeight:"56px",[e.breakpoints.down("sm")]:{fontSize:"1rem",padding:"14px 16px",minHeight:"56px"}},"& .MuiInputLabel-outlined":{fontSize:"1.125rem",[e.breakpoints.down("sm")]:{fontSize:"1rem"}},"& .MuiInputBase-input":{padding:"12px 14px",fontSize:"1.125rem",[e.breakpoints.down("sm")]:{fontSize:"1rem",padding:"14px 16px"}}},cardPreviewContainer:{marginTop:e.spacing(3),marginBottom:e.spacing(3),[e.breakpoints.down("sm")]:{marginTop:e.spacing(2),marginBottom:e.spacing(2)}},cardPreview:{borderRadius:16,padding:e.spacing(4),color:"#fff",minHeight:220,display:"flex",flexDirection:"column",justifyContent:"space-between",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",position:"relative",overflow:"hidden",[e.breakpoints.down("sm")]:{minHeight:200,padding:e.spacing(3)}},cardPreviewDesign:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},cardIcon:{fontSize:"3rem",opacity:.9,marginBottom:e.spacing(1),[e.breakpoints.down("sm")]:{fontSize:"2.5rem"}},cardLabel:{fontSize:"0.875rem",opacity:.9,marginBottom:e.spacing(1),[e.breakpoints.down("sm")]:{fontSize:"0.8125rem"}},cardMemberId:{fontSize:"1.25rem",letterSpacing:"0.1em",marginTop:e.spacing(2),fontWeight:500,[e.breakpoints.down("sm")]:{fontSize:"1.125rem"}},cardName:{fontSize:"1.5rem",textTransform:"uppercase",marginTop:e.spacing(2),fontWeight:"bold",letterSpacing:"0.05em",[e.breakpoints.down("sm")]:{fontSize:"1.25rem"}},cardNamePlaceholder:{fontSize:"1.5rem",textTransform:"uppercase",marginTop:e.spacing(2),fontWeight:"bold",letterSpacing:"0.05em",opacity:.6,fontStyle:"italic",[e.breakpoints.down("sm")]:{fontSize:"1.25rem"}}}));var ut=e=>{var t;let{memberData:a,memberId:n,onNext:c,onBack:s,onDataUpdate:r}=e;const o=mt(),{enqueueSnackbar:l}=Object(me.b)(),[d,b]=i.a.useState(!1),j=3e3,[m,u]=i.a.useState((null===a||void 0===a?void 0:a.paymentMethod)||"Online Payment"),[p,O]=i.a.useState((null===a||void 0===a||null===(t=a.cardDetails)||void 0===t?void 0:t.nameOnCard)||(null===a||void 0===a?void 0:a.fullName)||"");return Object(L.jsx)(Ye.a,{className:o.card,children:Object(L.jsxs)(Ae.a,{children:[Object(L.jsx)(ce.r,{loading:d}),Object(L.jsx)(h.a,{variant:"h4",style:{fontSize:"1.75rem",fontWeight:"bold",marginBottom:8},children:"Zahirians Circle"}),Object(L.jsxs)(h.a,{className:o.sectionDescription,color:"textSecondary",children:["Annual subscription fee: Rs. ",j.toLocaleString()," per year. Please choose your payment method."]}),Object(L.jsxs)("div",{className:o.amountCard,children:[Object(L.jsx)(h.a,{className:o.amountLabel,color:"textSecondary",children:"Annual Subscription Amount"}),Object(L.jsxs)(h.a,{className:o.amountValue,color:"primary",children:["Rs. ",j.toLocaleString()]}),Object(L.jsx)(h.a,{className:o.amountSubtext,color:"textSecondary",children:"Per year"})]}),Object(L.jsx)(x.a,{className:o.divider}),Object(L.jsx)(h.a,{className:o.sectionTitle,children:"Payment Method"}),Object(L.jsx)(ce.u,{size:12,name:"paymentMethod",value:m,onChange:e=>u(e.target.value),values:["Online Payment","Collect in Person"]}),Object(L.jsx)(x.a,{className:o.divider}),Object(L.jsxs)("div",{className:o.cardDetailsSection,children:[Object(L.jsxs)(h.a,{className:o.sectionTitle,children:[Object(L.jsx)(nt.a,{style:{verticalAlign:"middle",marginRight:8,fontSize:"1.5rem"}}),"Membership Card Details"]}),Object(L.jsx)(h.a,{className:o.sectionDescription,color:"textSecondary",style:{marginBottom:20},children:"Customize how your name appears on your membership card"}),Object(L.jsx)("div",{className:o.cardPreviewContainer,children:Object(L.jsxs)("div",{className:"".concat(o.cardPreview," ").concat(o.cardPreviewDesign),children:[Object(L.jsxs)("div",{children:[Object(L.jsx)(nt.a,{className:o.cardIcon}),Object(L.jsx)(h.a,{className:o.cardLabel,children:"MEMBERSHIP CARD"}),(null===a||void 0===a?void 0:a.memberCode)&&Object(L.jsx)(h.a,{className:o.cardMemberId,children:a.memberCode})]}),Object(L.jsx)("div",{children:p?Object(L.jsx)(h.a,{className:o.cardName,children:p.toUpperCase()}):Object(L.jsx)(h.a,{className:o.cardNamePlaceholder,children:"YOUR NAME HERE"})})]})}),Object(L.jsx)(g.a,{container:!0,spacing:3,children:Object(L.jsx)(g.a,{item:!0,xs:12,children:Object(L.jsx)(be.a,{fullWidth:!0,className:o.textField,label:"Name on Card",placeholder:"Enter name as you want it on your card",value:p,onChange:e=>O(e.target.value),variant:"outlined",helperText:"This name will appear on your membership card. You can see the preview above."})})})]}),Object(L.jsxs)("div",{className:o.buttonGroup,children:[Object(L.jsx)(f.a,{variant:"outlined",color:"primary",size:"large",startIcon:Object(L.jsx)(jt.a,{}),onClick:s,disabled:d,className:o.button,children:"Back"}),Object(L.jsx)(f.a,{variant:"contained",color:"primary",size:"large",endIcon:Object(L.jsx)(rt.a,{}),disabled:d||!m,onClick:async()=>{if(m)if(!p||p.trim().length<2)l("Please enter a name for your membership card",{variant:"warning"});else{b(!0);try{const e={subscriptionAmount:j,subscriptionType:"annual",paymentMethod:m||"Online Payment",subscriptionDate:(new Date).toISOString(),cardDetails:{nameOnCard:p.trim(),updatedAt:(new Date).toISOString()}};await it.a.updateSelf(n,e),r(e),c&&c()}catch(e){l(e.message||"Failed to save",{variant:"error"})}finally{b(!1)}}else l("Please select a payment method",{variant:"warning"})},className:o.button,children:"Continue"})]})]})})};const pt=Object(r.a)(e=>({card:{backgroundColor:e.palette.background.paper||"#fff",borderRadius:8,padding:e.spacing(4),marginBottom:e.spacing(2),textAlign:"center"},successIcon:{fontSize:80,color:e.palette.success.main||"#4caf50",marginBottom:e.spacing(2)},button:{marginTop:e.spacing(3),padding:e.spacing(1.5,4)}}));var gt=e=>{let{memberData:t,onComplete:a}=e;const n=pt();return Object(L.jsx)(Ye.a,{className:n.card,children:Object(L.jsxs)(Ae.a,{children:[Object(L.jsx)(tt.a,{className:n.successIcon}),Object(L.jsx)(h.a,{variant:"h4",gutterBottom:!0,children:"Verification Complete!"}),Object(L.jsxs)(h.a,{variant:"body1",color:"textSecondary",style:{marginTop:20,marginBottom:10},children:["Thank you, ",Object(L.jsx)("strong",{children:(null===t||void 0===t?void 0:t.fullName)||(null===t||void 0===t?void 0:t.shortName)})]}),Object(L.jsx)(h.a,{variant:"body2",color:"textSecondary",style:{marginBottom:30},children:"Your profile has been successfully set up. You can now view and manage your details anytime."}),Object(L.jsx)(f.a,{variant:"contained",color:"primary",size:"large",className:n.button,onClick:a,children:"View My Profile"})]})})};const ht=Object(r.a)(e=>({card:{backgroundColor:e.palette.background.paper||"#fff",borderRadius:8,padding:e.spacing(2),marginBottom:e.spacing(2)},buttonGroup:{marginTop:e.spacing(3),display:"flex",justifyContent:"flex-start"}}));var Ot=e=>{let{memberData:t,onBack:a}=e;const n=ht();return Object(L.jsx)(Ye.a,{className:n.card,children:Object(L.jsxs)(Ae.a,{children:[Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:0},children:Object(L.jsx)(g.a,{item:!0,xs:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"PERSONAL DETAILS"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:1,children:[Object(L.jsx)(ce.p,{size:3,label:"Membership ID",value:null===t||void 0===t?void 0:t.memberCode}),Object(L.jsx)(ce.p,{size:3,label:"Short Name",value:null===t||void 0===t?void 0:t.shortName}),Object(L.jsx)(ce.p,{size:6,label:"Full Name",value:null===t||void 0===t?void 0:t.fullName}),Object(L.jsx)(ce.p,{size:3,label:"Gender",value:null===t||void 0===t?void 0:t.gender}),Object(L.jsx)(ce.p,{size:3,label:"NIC Number",value:null===t||void 0===t?void 0:t.nic}),Object(L.jsx)(ce.p,{size:3,label:"Date of Birth",value:null===t||void 0===t?void 0:t.dateOfBirth})]})})]})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:5},children:Object(L.jsx)(g.a,{item:!0,xs:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"CONTACT DETAILS"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:1,children:[Object(L.jsx)(ce.p,{size:3,label:"Email",value:null===t||void 0===t?void 0:t.email}),Object(L.jsx)(ce.p,{size:6,label:"Address",value:null===t||void 0===t?void 0:t.address}),Object(L.jsx)(ce.p,{size:3,label:"Mobile",value:null===t||void 0===t?void 0:t.contact}),Object(L.jsx)(ce.p,{size:3,label:"Landline",value:null===t||void 0===t?void 0:t.contactAlt}),Object(L.jsx)(ce.p,{size:6,label:"Note",value:null===t||void 0===t?void 0:t.note})]})})]})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:5},children:Object(L.jsx)(g.a,{item:!0,xs:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"SCHOOL DAYS"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:1,children:[Object(L.jsx)(ce.p,{size:2,label:"O/L Batch",value:null===t||void 0===t?void 0:t.batchOl}),Object(L.jsx)(ce.p,{size:2,label:"A/L Batch",value:null===t||void 0===t?void 0:t.batchAl}),Object(L.jsx)(ce.p,{size:2,label:"Year of Admission",value:null===t||void 0===t?void 0:t.yearOfAdmission}),Object(L.jsx)(ce.p,{size:2,label:"Year of Leaving",value:null===t||void 0===t?void 0:t.yearOfLeaving}),Object(L.jsx)(ce.p,{size:2,label:"Index Number",value:null===t||void 0===t?void 0:t.indexNumber}),Object(L.jsx)(ce.p,{size:6,label:"Achievements",value:null===t||void 0===t?void 0:t.achievements}),Object(L.jsx)(ce.p,{size:6,label:"Positions Held",value:null===t||void 0===t?void 0:t.postionsHeld})]})})]})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:5},children:Object(L.jsx)(g.a,{item:!0,xs:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"EMPLOYMENT DETAILS"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:1,children:[Object(L.jsx)(ce.p,{size:2,label:"Work Place",value:null===t||void 0===t?void 0:t.workPlace}),Object(L.jsx)(ce.p,{size:2,label:"Designation",value:null===t||void 0===t?void 0:t.designation}),Object(L.jsx)(ce.p,{size:2,label:"Category",value:null===t||void 0===t?void 0:t.workCategory}),Object(L.jsx)(ce.p,{size:6,label:"Note",value:null===t||void 0===t?void 0:t.workNote})]})})]})})}),Object(L.jsx)("div",{className:n.buttonGroup,children:Object(L.jsx)(f.a,{variant:"outlined",color:"primary",size:"large",startIcon:Object(L.jsx)(jt.a,{}),onClick:a,children:"Back"})})]})})};const xt=Object(r.a)(e=>({card:{backgroundColor:e.palette.background.paper||"#fff",borderRadius:8,padding:e.spacing(3),marginBottom:e.spacing(2)},infoCard:{backgroundColor:e.palette.primary.light||"#e3f2fd",borderRadius:8,padding:e.spacing(2),marginTop:e.spacing(2)},buttonGroup:{marginTop:e.spacing(3),display:"flex",justifyContent:"flex-start"}}));var ft=e=>{let{memberData:t,onBack:a}=e;const n=xt();return Object(L.jsx)(Ye.a,{className:n.card,children:Object(L.jsxs)(Ae.a,{children:[Object(L.jsxs)(h.a,{variant:"h5",gutterBottom:!0,children:[Object(L.jsx)(et.a,{style:{verticalAlign:"middle",marginRight:8}}),"Subscriptions & Donations"]}),Object(L.jsxs)(g.a,{container:!0,spacing:2,style:{marginTop:10},children:[Object(L.jsx)(g.a,{item:!0,xs:12,md:6,children:Object(L.jsx)(ce.p,{size:12,label:"Annual Subscription Amount",value:null!==t&&void 0!==t&&t.subscriptionAmount?"Rs. ".concat(t.subscriptionAmount.toLocaleString()):"Not set"})}),Object(L.jsx)(g.a,{item:!0,xs:12,md:6,children:Object(L.jsx)(ce.p,{size:12,label:"Subscription Type",value:"annual"===(null===t||void 0===t?void 0:t.subscriptionType)?"Annual":(null===t||void 0===t?void 0:t.subscriptionType)||"Not set"})}),Object(L.jsx)(g.a,{item:!0,xs:12,md:6,children:Object(L.jsx)(ce.p,{size:12,label:"Payment Method",value:(null===t||void 0===t?void 0:t.paymentMethod)||"Not set"})}),(null===t||void 0===t?void 0:t.subscriptionDate)&&Object(L.jsx)(g.a,{item:!0,xs:12,md:6,children:Object(L.jsx)(ce.p,{size:12,label:"Subscription Date",value:new Date(t.subscriptionDate).toLocaleDateString()})})]}),!(null!==t&&void 0!==t&&t.subscriptionAmount)&&Object(L.jsx)("div",{className:n.infoCard,children:Object(L.jsx)(h.a,{variant:"body2",children:"No subscription set up yet. You can update your subscription details from the Edit Details page."})}),Object(L.jsx)("div",{className:n.buttonGroup,children:Object(L.jsx)(f.a,{variant:"outlined",color:"primary",size:"large",startIcon:Object(L.jsx)(jt.a,{}),onClick:a,children:"Back"})})]})})};Object(r.a)(e=>({card:{backgroundColor:e.palette.background.paper||"#fff",borderRadius:8,padding:e.spacing(3),marginBottom:e.spacing(2)},cardPreview:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:16,padding:e.spacing(4),color:"#fff",minHeight:200,display:"flex",flexDirection:"column",justifyContent:"space-between",marginTop:e.spacing(2),boxShadow:"0 8px 16px rgba(0,0,0,0.2)"},cardNumber:{fontSize:"1.5rem",letterSpacing:"0.2em",marginTop:e.spacing(2)},cardName:{fontSize:"1.2rem",textTransform:"uppercase",marginTop:e.spacing(2)},buttonGroup:{marginTop:e.spacing(3),display:"flex",justifyContent:"flex-start"}}));const vt=Object(r.a)(e=>({root:{minHeight:"100vh",backgroundColor:e.palette.background.default||"#f5f5f5"},container:{maxWidth:1200,margin:"0 auto",padding:e.spacing(2),[e.breakpoints.down("sm")]:{padding:e.spacing(1)}},stepper:{backgroundColor:"transparent",padding:e.spacing(3,0),"& .MuiStepLabel-root":{alignItems:"center"},"& .MuiStepLabel-iconContainer":{padding:0,display:"flex",alignItems:"center",justifyContent:"center"}},content:{marginTop:e.spacing(2)},stepIconRoot:{color:"#eaeaf0",display:"flex",height:44,alignItems:"center",justifyContent:"center",[e.breakpoints.down("sm")]:{height:40}},stepIcon:{width:44,height:44,borderRadius:"50%",backgroundColor:"#eaeaf0",display:"flex",alignItems:"center",justifyContent:"center",color:"#9e9e9e",zIndex:1,fontSize:"1.5rem",transition:"all 0.3s ease",[e.breakpoints.down("sm")]:{width:40,height:40,fontSize:"1.375rem"},"&.active":{backgroundColor:e.palette.primary.main,color:"#fff",boxShadow:"0 4px 8px rgba(0,0,0,0.15)"},"&.completed":{backgroundColor:"#4caf50",color:"#fff"}},stepIconSvg:{fontSize:"1.5rem",[e.breakpoints.down("sm")]:{fontSize:"1.375rem"}}})),yt=e=>{const t=vt(),{active:a,completed:n,icon:i}=e,c=(s=i,{1:$e.a,2:et.a,3:tt.a,4:at.a,5:nt.a}[s]||$e.a);var s;return Object(L.jsx)("div",{className:t.stepIconRoot,children:Object(L.jsx)("div",{className:"".concat(t.stepIcon," ").concat(a?"active":""," ").concat(n?"completed":""),children:n?Object(L.jsx)(tt.a,{className:t.stepIconSvg}):Object(L.jsx)(c,{className:t.stepIconSvg})})})};var Ct=Object(c.g)(e=>{const t=vt(),{history:a}=e,[n,c]=i.a.useState(!0),[s,r]=i.a.useState(null),[o,l]=i.a.useState(null),[d,b]=i.a.useState(0),[j,u]=i.a.useState(!0);let p=null;try{var g;p=null===(g=Object(je.d)())||void 0===g?void 0:g.branch}catch(v){p=null}i.a.useEffect(()=>{const e=sessionStorage.getItem("userSessionToken"),t=sessionStorage.getItem("userMemberId"),a="true"===sessionStorage.getItem("testMode"),n=async e=>{c(!0);try{const t=await it.a.get({id:e});if(!(t&&Object.keys(t).length>0))throw new Error("Member not found");{const a=Object(m.a)(Object(m.a)({},t),{},{id:e});l(a),r(e);const n=t.subscriptionAmount&&t.subscriptionAmount>0,i=t.cardDetails&&t.cardDetails.nameOnCard;u(!n&&!i),b(0)}}catch(t){console.error("Failed to load member:",t)}finally{c(!1)}};e&&t||a?a?it.a.get({}).then(e=>{if(e&&Array.isArray(e)&&e.length>0){const t=e[0];sessionStorage.setItem("userSessionToken","test-mode-token"),sessionStorage.setItem("userMemberId",t.id),sessionStorage.setItem("testMode","true"),n(t.id)}else{const e={id:"mock-member-001",nameWithInitials:"A.B. Test",fullName:"Test Member",email:"test@example.com",mobile:"+94771234567",address:"123 Test Street, Colombo",batchOl:"2020",subscriptionAmount:0,cardDetails:null};sessionStorage.setItem("userSessionToken","test-mode-token"),sessionStorage.setItem("userMemberId",e.id),sessionStorage.setItem("testMode","true"),l(e),r(e.id),u(!0),b(0),c(!1)}}).catch(e=>{console.error("Could not load members, using mock data:",e);const t={id:"mock-member-001",nameWithInitials:"A.B. Test",fullName:"Test Member",email:"test@example.com",mobile:"+94771234567",address:"123 Test Street, Colombo",batchOl:"2020",subscriptionAmount:0,cardDetails:null};sessionStorage.setItem("userSessionToken","test-mode-token"),sessionStorage.setItem("userMemberId",t.id),sessionStorage.setItem("testMode","true"),l(t),r(t.id),u(!0),b(0),c(!1)}):e&&t&&n(t):window.location.href="/user/verify"},[]);const h=()=>{b(e=>e+1)},O=()=>{b(e=>e-1)},x=e=>{l(t=>Object(m.a)(Object(m.a)({},t),e))};if(n||!o)return Object(L.jsx)("div",{className:t.root,children:Object(L.jsx)(ce.r,{loading:!0})});const f=j?["Edit Details","Zahirians Circle","Verification & Complete"]:["Edit Details","View Details","Zahirians Circle"];return Object(L.jsxs)("div",{className:t.root,children:[Object(L.jsx)(Ve,{memberName:(null===o||void 0===o?void 0:o.fullName)||(null===o||void 0===o?void 0:o.nameWithInitials),memberId:(null===o||void 0===o?void 0:o.memberCode)||s,onLogout:async()=>{try{try{await Object(Ce.getAuth)().signOut()}catch(v){console.log("Firebase signout error:",v)}const t=sessionStorage.getItem("userSessionToken");if(t&&"test-mode-token"!==t)try{await Ue(t)}catch(e){console.log("Session clear error (ignored):",e)}}catch(e){console.log("Logout error (ignored):",e)}finally{sessionStorage.removeItem("userSessionToken"),sessionStorage.removeItem("userMemberId"),sessionStorage.removeItem("testMode"),window.location.href="/user/verify"}}}),Object(L.jsxs)("div",{className:t.container,children:[Object(L.jsx)(Ze.a,{activeStep:d,className:t.stepper,alternativeLabel:!0,children:f.map((e,t)=>Object(L.jsx)(Xe.a,{children:Object(L.jsx)(Qe.a,{onClick:()=>{b(t)},style:{cursor:"pointer"},StepIconComponent:yt,StepIconProps:{icon:t+1},children:e})},e))}),Object(L.jsx)("div",{className:t.content,children:(()=>{if(j)switch(d){case 0:return Object(L.jsx)(bt,{memberData:o,memberId:s,onNext:h,onDataUpdate:x});case 1:return Object(L.jsx)(ut,{memberData:o,memberId:s,onNext:h,onBack:O,onDataUpdate:x});case 2:return Object(L.jsx)(gt,{memberData:o,onComplete:()=>{u(!1),b(0)}});default:return null}else switch(d){case 0:return Object(L.jsx)(bt,{memberData:o,memberId:s,onNext:h,onDataUpdate:x});case 1:return Object(L.jsx)(Ot,{memberData:o,onBack:O});case 2:return Object(L.jsx)(ft,{memberData:o,onBack:O});default:return null}})()})]})]})}),Dt=a(670),wt=a(667);a(433);const St=["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(153, 102, 255, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(153, 102, 255, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(153, 102, 255, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"];var kt=a(707),Tt=a(708),It=a(709),Mt=a(710);var Et=e=>{const{details:t,loading:a}=e,[n,c]=i.a.useState([]);return i.a.useEffect(()=>{const e=[{color:St[2],label:"New Members",labelRight:"Today",isActive:!0,value:t.assigned,icon:Object(L.jsx)(kt.a,{fontSize:"large",style:{color:"white"}})},{color:St[6],label:"Total Members",labelRight:"All",isActive:!1,value:t.driverPicked,icon:Object(L.jsx)(Tt.a,{fontSize:"large",style:{color:"white"}})},{color:St[0],label:"Pending",labelRight:"Month",isActive:!1,value:t.notPicked,icon:Object(L.jsx)(It.a,{fontSize:"large",style:{color:"white"}})},{color:St[3],label:"Subscriptions",labelRight:"Today",isActive:!0,value:t.totalPicked,icon:Object(L.jsx)(Mt.a,{fontSize:"large",style:{color:"white"}})}];c(e)},[t]),Object(L.jsx)(g.a,{container:!0,style:{paddingBottom:50},children:n.map(e=>Object(L.jsx)(g.a,{item:!0,xs:12,sm:3,style:{padding:20,paddingLeft:20},children:Object(L.jsx)(ce.b,{data:e,color:e.color,loading:a})}))})},Yt=a(68),At=a(13);new AbortController;var Nt=async e=>Object(At.c)("/v1/dashboard/get-landing-page-flow-chart?branchType=".concat(Object(je.d)().type,"&branch=").concat(Object(je.d)().branch,"&startDate=").concat(e)),zt=async e=>Object(At.c)("/v1/dashboard/hbl-monthly?branchType=".concat(Object(je.d)().type,"&branch=").concat(Object(je.d)().branch,"&startDate=").concat(e)),Lt=async(e,t)=>Object(At.c)("/v1/dashboard/cross-branch?branchType=".concat(Object(je.d)().type,"&branch=").concat(e.join("&branch="),"&date=").concat(t)),Rt=async(e,t)=>Object(At.c)("/v1/dashboard/cross-branch-hbls?branchType=".concat(Object(je.d)().type,"&branch=").concat(e.join("&branch="),"&date=").concat(t)),Bt=async(e,t)=>Object(At.c)("/v1/dashboard/cross-branch-shipments?branchType=".concat(Object(je.d)().type,"&branch=").concat(e.join("&branch="),"&date=").concat(t)),Ft=async(e,t)=>Object(At.c)("/v1/dashboard/sales-aggregate?branchType=".concat(Object(je.d)().type,"&branch=").concat(Object(je.d)().branch,"&startDate=").concat(e,"&quarter=").concat(t)),Pt=async e=>Object(At.c)("/v1/dashboard/summary-monthly?branchType=".concat(Object(je.d)().type,"&branch=").concat(Object(je.d)().branch,"&startDate=").concat(e)),Ht=async e=>Object(At.c)("/v1/dashboard/driver-monthly?branchType=".concat(Object(je.d)().type,"&branch=").concat(Object(je.d)().branch,"&startDate=").concat(e)),Wt=a(74),Ut=a.n(Wt),_t=a(693);a(711),a(712),a(713);var Gt=a(19);const qt=["Today","Two days","Four days","One week"];var Vt=e=>{const[t,a]=i.a.useState(0),[n,c]=i.a.useState(!1),{enqueueSnackbar:s}=Object(me.b)(),[r,o]=i.a.useState({startDate:lt()().subtract(2,"d").format("YYYY-MM-DD"),timeFrame:qt[1]}),[l,d]=i.a.useState({jobs:"-",directHbl:"-",assigned:"-",notAssigned:"-",driverPicked:"-",totalPicked:"-",notPicked:"-",cashed:"-",notCashed:"-"});return i.a.useEffect(()=>{c(!0),c(!1)},[s,t,c,r]),Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(Ye.a,{elevation:0,children:[Object(L.jsx)(Dt.a,{title:Object(L.jsxs)(g.a,{container:!0,spacing:1,justify:"space-between",alignContent:"space-between",alignItems:"space-between",children:[Object(L.jsx)(ce.j,{size:4,title:Object(N.b)("Dashboard"),subtitle:Object(N.b)("Welcome, ")+Object(ue.getUserGlobal)("displayName")}),Object(L.jsxs)(g.a,{container:!0,spacing:2,xs:8,justify:"flex-end",alignContent:"center",alignItems:"center",style:{paddingRight:10,paddingTop:10},children:[Object(L.jsxs)(h.a,{style:{paddingRight:10},children:[r.startDate," Onwards "]}),Object(L.jsx)(wt.a,{color:"primary",children:qt.map(e=>Object(L.jsx)(f.a,{size:"small",variant:e===r.timeFrame?"contained":"outlined",onClick:n=>(e=>{let n;e===qt[0]?n=lt()().subtract(0,"d").format("YYYY-MM-DD"):e===qt[1]?n=lt()().subtract(2,"d").format("YYYY-MM-DD"):e===qt[2]?n=lt()().subtract(4,"d").format("YYYY-MM-DD"):e===qt[3]&&(n=lt()().subtract(7,"d").format("YYYY-MM-DD")),o(Object(m.a)(Object(m.a)({},r),{},{timeFrame:e,startDate:n})),a(t+1)})(e),children:e}))})]})]})}),Object(L.jsx)(Ae.a,{children:Object(L.jsx)(Ye.a,{style:{paddingTop:0},children:Object(L.jsx)(Et,{details:l,loading:n})})})]})})},Jt=a(714);var Kt=e=>{const{details:t,loading:a}=e,[n,c]=i.a.useState([]);return i.a.useEffect(()=>{const e=[{color:St[7],label:"Assigned Jobs",labelRight:"Now",isActive:!0,value:t.totalJobs,icon:Object(L.jsx)(Jt.a,{fontSize:"large",style:{color:"white"}})},{color:St[6],label:"Delivered",labelRight:"Now",isActive:!0,value:t.doorDelivered,icon:Object(L.jsx)(Tt.a,{fontSize:"large",style:{color:"white"}})},{color:St[4],label:"Pending",labelRight:"Now",isActive:!0,value:t.jobAssignedNotDelivered,icon:Object(L.jsx)(It.a,{fontSize:"large",style:{color:"white"}})}];c(e)},[t]),Object(L.jsx)(g.a,{container:!0,style:{paddingBottom:50},children:n.map(e=>Object(L.jsx)(g.a,{item:!0,xs:12,sm:4,style:{padding:30,paddingLeft:30},children:Object(L.jsx)(ce.b,{data:e,color:e.color,loading:a})}))})};const Zt=["Today","Two days","Four days","One week"];var Xt=e=>{const[t,a]=i.a.useState(0),[n,c]=i.a.useState(!1),{enqueueSnackbar:s}=Object(me.b)(),[r,o]=i.a.useState({startDate:lt()().subtract(4,"d").format("YYYY-MM-DD"),timeFrame:Zt[2]}),[l,d]=i.a.useState({jobs:"-",directHbl:"-",assigned:"-",notAssigned:"-",driverPicked:"-",totalPicked:"-",notPicked:"-",cashed:"-",notCashed:"-"});return i.a.useEffect(()=>{c(!0),Nt(r.startDate).then(e=>{let t=0,a=0,n=0,i=0;Object(Gt.map)(e,e=>{"NULL#3"===e.label?a=+e.value:"NULL#4"===e.label?i=+e.value:e.label.includes("#3")?t=+e.value:e.label.includes("#4")&&(n=+e.value)}),d({totalJobs:n+t,jobAssignedNotDelivered:t,doorDelivered:n,upbDelivered:i,jobNotAssigned:a})}).catch(e=>{s("Could not fetch",{variant:"error"})}).finally(e=>c(!1))},[s,t,c,r]),Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(Ye.a,{elevation:0,children:[Object(L.jsx)(Dt.a,{title:Object(L.jsxs)(g.a,{container:!0,spacing:1,justify:"space-between",alignContent:"space-between",alignItems:"space-between",children:[Object(L.jsx)(ce.j,{size:4,title:"Dashboard",subtitle:"Welcome, "+localStorage.getItem("mw-u")}),Object(L.jsxs)(g.a,{container:!0,spacing:2,xs:8,justify:"flex-end",alignContent:"center",alignItems:"center",style:{paddingRight:10,paddingTop:10},children:[Object(L.jsxs)(h.a,{style:{paddingRight:10},children:[r.startDate," Onwards "]}),Object(L.jsx)(wt.a,{color:"primary",children:Zt.map(e=>Object(L.jsx)(f.a,{size:"small",variant:e===r.timeFrame?"contained":"outlined",onClick:n=>(e=>{let n;e===Zt[0]?n=lt()().subtract(0,"d").format("YYYY-MM-DD"):e===Zt[1]?n=lt()().subtract(2,"d").format("YYYY-MM-DD"):e===Zt[2]?n=lt()().subtract(4,"d").format("YYYY-MM-DD"):e===Zt[3]&&(n=lt()().subtract(7,"d").format("YYYY-MM-DD")),o(Object(m.a)(Object(m.a)({},r),{},{timeFrame:e,startDate:n})),a(t+1)})(e),children:e}))})]})]})}),Object(L.jsx)(Ae.a,{children:Object(L.jsxs)(Ye.a,{style:{paddingTop:0},children:[Object(L.jsx)(Kt,{details:l,loading:n}),Object(L.jsx)("div",{style:{padding:10}})]})})]})})};var Qt=e=>{const{details:t,loading:a}=e,[n,c]=i.a.useState([]);return i.a.useEffect(()=>{const e=[{color:St[7],label:"Assigned Jobs",labelRight:"Now",isActive:!0,value:t.totalJobs,icon:Object(L.jsx)(Jt.a,{fontSize:"large",style:{color:"white"}})},{color:St[6],label:"Delivered",labelRight:"Now",isActive:!0,value:t.doorDelivered,icon:Object(L.jsx)(Tt.a,{fontSize:"large",style:{color:"white"}})},{color:St[4],label:"Pending",labelRight:"Now",isActive:!0,value:t.jobAssignedNotDelivered,icon:Object(L.jsx)(It.a,{fontSize:"large",style:{color:"white"}})}];c(e)},[t]),Object(L.jsx)(g.a,{container:!0,style:{paddingBottom:50},children:n.map(e=>Object(L.jsx)(g.a,{item:!0,xs:12,sm:4,style:{padding:30,paddingLeft:30},children:Object(L.jsx)(ce.b,{data:e,color:e.color,loading:a})}))})};const $t=["Today","Two days","Four days","One week"];var ea=e=>{const[t,a]=i.a.useState(0),[n,c]=i.a.useState(!1),{enqueueSnackbar:s}=Object(me.b)(),[r,o]=i.a.useState({startDate:lt()().subtract(4,"d").format("YYYY-MM-DD"),timeFrame:$t[2]}),[l,d]=i.a.useState({jobs:"-",directHbl:"-",assigned:"-",notAssigned:"-",driverPicked:"-",totalPicked:"-",notPicked:"-",cashed:"-",notCashed:"-"});return i.a.useEffect(()=>{c(!0),Nt(r.startDate).then(e=>{let t=0,a=0,n=0,i=0;Object(Gt.map)(e,e=>{"NULL#3"===e.label?a=+e.value:"NULL#4"===e.label?i=+e.value:e.label.includes("#3")?t=+e.value:e.label.includes("#4")&&(n=+e.value)}),d({totalJobs:n+t,jobAssignedNotDelivered:t,doorDelivered:n,upbDelivered:i,jobNotAssigned:a})}).catch(e=>{s("Could not fetch",{variant:"error"})}).finally(e=>c(!1))},[s,t,c,r]),Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(Ye.a,{elevation:0,children:[Object(L.jsx)(Dt.a,{title:Object(L.jsxs)(g.a,{container:!0,spacing:1,justify:"space-between",alignContent:"space-between",alignItems:"space-between",children:[Object(L.jsx)(ce.j,{size:4,title:"Dashboard",subtitle:"Welcome, "+localStorage.getItem("mw-u")}),Object(L.jsxs)(g.a,{container:!0,spacing:2,xs:8,justify:"flex-end",alignContent:"center",alignItems:"center",style:{paddingRight:10,paddingTop:10},children:[Object(L.jsxs)(h.a,{style:{paddingRight:10},children:[r.startDate," Onwards "]}),Object(L.jsx)(wt.a,{color:"primary",children:$t.map(e=>Object(L.jsx)(f.a,{size:"small",variant:e===r.timeFrame?"contained":"outlined",onClick:n=>(e=>{let n;e===$t[0]?n=lt()().subtract(0,"d").format("YYYY-MM-DD"):e===$t[1]?n=lt()().subtract(2,"d").format("YYYY-MM-DD"):e===$t[2]?n=lt()().subtract(4,"d").format("YYYY-MM-DD"):e===$t[3]&&(n=lt()().subtract(7,"d").format("YYYY-MM-DD")),o(Object(m.a)(Object(m.a)({},r),{},{timeFrame:e,startDate:n})),a(t+1)})(e),children:e}))})]})]})}),Object(L.jsx)(Ae.a,{children:Object(L.jsxs)(Ye.a,{style:{paddingTop:0},children:[Object(L.jsx)(Qt,{details:l,loading:n}),Object(L.jsx)("div",{style:{padding:10}})]})})]})})};var ta=e=>Object(je.d)().type===te.a.domestic?Object(L.jsx)(ea,{}):Object(je.d)().type===te.a.delivery?Object(L.jsx)(Xt,{}):Object(L.jsx)(Vt,{}),aa=a(45),na=a.n(aa),ia=a(162),ca=a.n(ia),sa=a(163),ra=a.n(sa);const oa={legend:{position:"right"}};var la=e=>{const{changed:t,searchFields:a}=e,{enqueueSnackbar:n}=Object(me.b)(),[c,s]=i.a.useState({labels:[],datasets:[{data:[]}]}),[r,o]=i.a.useState(!1);return i.a.useEffect(()=>{o(!0),Ht(a.startDate).then(e=>{const t=Ut()(ca()(na()(ra()(e,e=>e.label),e=>({label:e.label,value:+e.value})),["value"],["desc"]),(e,t)=>{let{label:a,value:n}=t;return{labels:[...e.labels,"".concat(a," (").concat(n,")")],values:[...e.values,n]}},{labels:[],values:[]});s({labels:t.labels||[],datasets:[{label:"Completed Jobs",data:t.values||[],backgroundColor:St,borderColor:St,borderWidth:1}]})}).catch(e=>{n("Could not fetch",{variant:"error"})}).finally(e=>o(!1))},[n,t,a]),Object(L.jsxs)(L.Fragment,{children:[!r&&Object(L.jsx)("div",{style:{paddingRight:30},children:Object(L.jsx)(Yt.b,{data:c,options:oa})}),r&&Object(L.jsx)(_t.a,{variant:"text",height:250})]})};const da={scales:{yAxes:[{ticks:{stepSize:1,beginAtZero:!0},scaleLabel:{display:!0,labelString:"HBL"}}],xAxes:[{scaleLabel:{display:!0,labelString:"Date"}}]},legend:{display:!1}};var ba=e=>{const{changed:t,searchFields:a}=e,{enqueueSnackbar:n}=Object(me.b)(),[c,s]=i.a.useState({labels:[],datasets:[{data:[]}]}),[r,o]=i.a.useState(!1);return i.a.useEffect(()=>{o(!0),zt(a.startDate).then(e=>{const t=Ut()(ca()(e,["label"],["asc"]),(e,t)=>{let{label:a,value:n}=t;return{labels:[...e.labels,(a||"").substring(8)],values:[...e.values,n]}},{labels:[],values:[]});s({labels:t.labels||[],datasets:[{data:t.values||[],backgroundColor:St,borderColor:St,borderWidth:1}]})}).catch(e=>{n("Could not fetch",{variant:"error"})}).finally(e=>o(!1))},[n,t,a]),Object(L.jsxs)(L.Fragment,{children:[!r&&Object(L.jsx)(Yt.a,{data:c,options:da}),r&&Object(L.jsx)(_t.a,{variant:"text",height:250})]})},ja=a(715);var ma=e=>{const{changed:t,searchFields:a}=e,{enqueueSnackbar:n}=Object(me.b)(),[c,s]=i.a.useState([{},{}]),[r,o]=i.a.useState(!1);return i.a.useEffect(()=>{o(!0),Pt(a.startDate).then(e=>{const t=Ut()(e,(e,t)=>{let{label:a,value:n}=t;return Object(m.a)(Object(m.a)({},e),{},{[a]:n})},{}),a=[{color:St[6],label:"HBLs",labelRight:Object(je.d)().branch,isActive:!0,value:t["this-month-cargo"],icon:Object(L.jsx)(Mt.a,{fontSize:"large",style:{color:"white"}})},{color:St[7],label:"Shipments",labelRight:Object(je.d)().branch,isActive:!0,value:t["this-month-loading"],icon:Object(L.jsx)(ja.a,{fontSize:"large",style:{color:"white"}})}];s(a)}).catch(e=>{n("Could not fetch",{variant:"error"})}).finally(e=>o(!1))},[n,t,a]),Object(L.jsxs)(g.a,{container:!0,style:{paddingBottom:25},children:[Object(L.jsx)(g.a,{item:!0,xs:12,sm:6,style:{},children:Object(L.jsx)(ce.b,{data:c[0],color:c[0].color,loading:r})}),Object(L.jsx)(g.a,{item:!0,xs:12,sm:6,style:{paddingLeft:25},children:Object(L.jsx)(ce.b,{data:c[1],color:c[1].color,loading:r})})]})};var ua=e=>{let{searchFields:t}=e;return Object(L.jsxs)(g.a,{container:!0,style:{paddingBottom:30},children:[Object(L.jsx)(g.a,{item:!0,xs:12,sm:6,style:{padding:20},children:Object(L.jsxs)(Ye.a,{elevation:2,style:{},children:[Object(L.jsx)(Dt.a,{title:"Contribution of Drivers"}),Object(L.jsx)(Ae.a,{children:Object(L.jsx)(la,{searchFields:t})})]})}),Object(L.jsxs)(g.a,{item:!0,xs:12,sm:6,style:{padding:20},children:[Object(L.jsx)(ma,{searchFields:t}),Object(L.jsxs)(Ye.a,{elevation:2,style:{marginTop:20},children:[Object(L.jsx)(Dt.a,{title:"Number of HBL per day"}),Object(L.jsx)(Ae.a,{children:Object(L.jsx)(ba,{searchFields:t})})]})]}),Object(L.jsx)(g.a,{item:!0,xs:12,sm:6,style:{padding:20}})]})},pa=a(716);const ga=["Two days","This week","This month","Three Months"];var ha=e=>{const[t,a]=i.a.useState({startDate:lt()().startOf("month").format("YYYY-MM-DD"),timeFrame:"This month"});return Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(Ye.a,{elevation:0,children:[Object(L.jsx)(Dt.a,{title:Object(L.jsxs)(g.a,{container:!0,spacing:1,justify:"space-between",alignContent:"space-between",alignItems:"space-between",children:[Object(L.jsx)(ce.j,{Icon:pa.a,size:4,title:"Progress/Efficiency",subtitle:"Hi, "+localStorage.getItem("mw-u")}),Object(L.jsx)(g.a,{container:!0,spacing:2,xs:8,justify:"flex-end",alignContent:"center",alignItems:"center",style:{paddingRight:10,paddingTop:10},children:Object(L.jsx)(wt.a,{color:"primary",children:ga.map(e=>Object(L.jsx)(f.a,{variant:e===t.timeFrame?"contained":"outlined",onClick:n=>(e=>{let n;"Two days"===e?n=lt()().subtract(2,"d").format("YYYY-MM-DD"):"This week"===e?n=lt()().startOf("week").format("YYYY-MM-DD"):"This month"===e?n=lt()().startOf("month").format("YYYY-MM-DD"):"Three Months"===e&&(n=lt()().subtract(90,"d").format("YYYY-MM-DD")),a(Object(m.a)(Object(m.a)({},t),{},{timeFrame:e,startDate:n}))})(e),children:e}))})})]})}),Object(L.jsx)(Ae.a,{children:Object(L.jsxs)(Ye.a,{style:{paddingTop:0},children:[Object(L.jsx)(ua,{searchFields:t}),Object(L.jsx)("div",{style:{padding:200}})]})})]})})};const Oa={scales:{yAxes:[{ticks:{stepSize:1,beginAtZero:!0},scaleLabel:{display:!0,labelString:"Members"}}],xAxes:[{scaleLabel:{display:!0,labelString:"Batch"}}]},legend:{display:!1}};var xa=e=>{const{changed:t,searchFields:a}=e,{enqueueSnackbar:n}=Object(me.b)(),[c,s]=i.a.useState({labels:[],datasets:[{data:[]}]}),[r,o]=i.a.useState(!1);return i.a.useEffect(()=>{},[n,t,a]),Object(L.jsxs)(L.Fragment,{children:[!r&&Object(L.jsx)(Yt.a,{data:c,options:Oa}),r&&Object(L.jsx)(_t.a,{variant:"text",height:250})]})};a(253);var fa=async(e,t)=>Object(At.c)("/v1/driver/get-by-id/".concat(e,"?branch=").concat(t||Object(je.d)().branch)),va=async()=>Object(At.c)("/v1/driver/get-all?branch=".concat(Object(je.d)().branch));var ya=e=>{let{searchFields:t}=e;return Object(L.jsxs)(g.a,{container:!0,style:{paddingBottom:30},children:[Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,style:{padding:0},children:Object(L.jsxs)(Ye.a,{elevation:2,style:{marginTop:20},children:[Object(L.jsx)(Dt.a,{title:"Members :: Batch"}),Object(L.jsx)(Ae.a,{children:Object(L.jsx)(xa,{searchFields:t})})]})}),Object(L.jsx)(g.a,{item:!0,xs:12,sm:6,style:{padding:20}})]})},Ca=a(717);const Da=["One Month","Two Months","Three Months"];var wa=e=>{const[t,a]=i.a.useState({startDate:lt()().subtract(31,"d").format("YYYY-MM-DD"),timeFrame:Da[0]});return Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(Ye.a,{elevation:0,children:[Object(L.jsx)(Dt.a,{title:Object(L.jsxs)(g.a,{container:!0,spacing:1,justify:"space-between",alignContent:"space-between",alignItems:"space-between",children:[Object(L.jsx)(ce.j,{Icon:Ca.a,size:4,title:"Members",subtitle:"Batch Comparision"}),Object(L.jsx)(g.a,{container:!0,spacing:2,xs:8,justify:"flex-end",alignContent:"center",alignItems:"center",style:{paddingRight:10,paddingTop:10},children:Object(L.jsx)(wt.a,{color:"primary",children:Da.map(e=>Object(L.jsx)(f.a,{variant:e===t.timeFrame?"contained":"outlined",onClick:n=>(e=>{let n;e===Da[0]?n=lt()().subtract(31,"d").format("YYYY-MM-DD"):e===Da[1]?n=lt()().subtract(62,"d").format("YYYY-MM-DD"):e===Da[2]&&(n=lt()().subtract(92,"d").format("YYYY-MM-DD")),a(Object(m.a)(Object(m.a)({},t),{},{timeFrame:e,startDate:n}))})(e),children:e}))})})]})}),Object(L.jsx)(Ae.a,{children:Object(L.jsxs)(Ye.a,{style:{paddingTop:0},children:[Object(L.jsx)(ya,{searchFields:t}),Object(L.jsx)("div",{style:{padding:200}})]})})]})})};const Sa={scales:{yAxes:[{ticks:{beginAtZero:!0},scaleLabel:{display:!0,labelString:"Sales"}}],xAxes:[{scaleLabel:{display:!0,labelString:"Aggregated on Date"}}]},legend:{display:!1}};var ka=e=>{const{changed:t,searchFields:a,timeFrames:n}=e,{enqueueSnackbar:c}=Object(me.b)(),[s,r]=i.a.useState({labels:[],datasets:[{data:[]}]}),[o,l]=i.a.useState(!1);return i.a.useEffect(()=>{l(!0),Ft(a.startDate,a.timeQuarter).then(e=>{const t={},i=[],c=[];let s="",o="";a.timeFrame===n[0]?(s=14,o="d"):a.timeFrame===n[1]?(s=50,o="d"):a.timeFrame===n[2]?(s=6,o="M"):a.timeFrame===n[3]&&(s=12,o="M");for(let a=0;a<s;a++)if("d"===o){e.forEach(e=>{t[e.label]=e.value});const n=lt()().subtract(a,o).format("YYYY-MM-DD");i[a]=n.substring(5),c[a]=t[n]||0}else if("M"===o){e.forEach(e=>{t[e.label.substring(0,7)]=e.value});const n=lt()().subtract(a,o).format("YYYY-MM");i[a]=n,c[a]=t[n]||0}r({labels:i.reverse()||[],datasets:[{data:c.reverse()||[],backgroundColor:St,borderColor:St,borderWidth:1}]})}).catch(e=>{c("Could not fetch",{variant:"error"})}).finally(e=>l(!1))},[c,t,a,n]),Object(L.jsxs)(L.Fragment,{children:[!o&&Object(L.jsx)(Yt.a,{data:s,options:Sa}),o&&Object(L.jsx)(_t.a,{variant:"text",height:250})]})};var Ta=e=>{let{searchFields:t,timeFrames:a}=e;return Object(L.jsxs)(g.a,{container:!0,style:{paddingBottom:30},children:[Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,style:{padding:0},children:Object(L.jsxs)(Ye.a,{elevation:2,style:{marginTop:20},children:[Object(L.jsx)(Dt.a,{title:"Sales :: "+t.timeFrame}),Object(L.jsx)(Ae.a,{children:Object(L.jsx)(ka,{timeFrames:a,searchFields:t})})]})}),Object(L.jsx)(g.a,{item:!0,xs:12,sm:6,style:{padding:20}})]})},Ia=a(718);const Ma=["Two Weeks - daily","Two Month - daily","Six Months - Monthly","One Year - Monthly"];var Ea=e=>{const[t,a]=i.a.useState({startDate:lt()().subtract(31,"d").format("YYYY-MM-DD"),timeFrame:Ma[0],timeQuarter:"DAILY"});return Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(Ye.a,{elevation:0,children:[Object(L.jsx)(Dt.a,{title:Object(L.jsxs)(g.a,{container:!0,spacing:1,justify:"space-between",alignContent:"space-between",alignItems:"space-between",children:[Object(L.jsx)(ce.j,{Icon:Ia.a,size:4,title:"Sales Trend",subtitle:"Hi, "+localStorage.getItem("mw-u")}),Object(L.jsx)(g.a,{container:!0,spacing:2,xs:8,justify:"flex-end",alignContent:"center",alignItems:"center",style:{paddingRight:10,paddingTop:10},children:Object(L.jsx)(wt.a,{color:"primary",children:Ma.map(e=>Object(L.jsx)(f.a,{size:"small",variant:e===t.timeFrame?"contained":"outlined",onClick:n=>(e=>{let n,i;e===Ma[0]?(n=lt()().subtract(14,"d").format("YYYY-MM-DD"),i="DAILY"):e===Ma[1]?(n=lt()().subtract(2,"M").format("YYYY-MM-DD"),i="DAILY"):e===Ma[2]?(n=lt()().subtract(6,"M").format("YYYY-MM-DD"),i="MONTHLY"):e===Ma[3]&&(n=lt()().subtract(12,"M").format("YYYY-MM-DD"),i="MONTHLY"),a(Object(m.a)(Object(m.a)({},t),{},{timeQuarter:i,timeFrame:e,startDate:n}))})(e),children:e}))})})]})}),Object(L.jsx)(Ae.a,{children:Object(L.jsxs)(Ye.a,{style:{paddingTop:0},children:[Object(L.jsx)(Ta,{searchFields:t,timeFrames:Ma}),Object(L.jsx)("div",{style:{padding:200}})]})})]})})},Ya=a(27);const Aa=(e,t)=>Object(L.jsx)("th",{style:{textAlign:"right",background:z.a.shades.light,color:"white"},children:e.label});var Na=[{label:"  ",name:"",options:{customHeadRender:Aa,display:!0}},{name:"level",options:{display:!1}},{name:"currency",options:{display:!1}},{label:"Criteria",name:"id",options:{viewColumns:!1,filter:!1,sort:!1,customBodyRender:function(e,t){return 1===t.rowData[1]?Object(L.jsx)("b",{children:e}):Object(L.jsxs)(L.Fragment,{children:["\xa0 \xa0 \xa0 \xa0 \xa0 ",e]})}}},{label:"HBL Count",name:"count",options:{viewColumns:!1,filter:!1,sort:!1,setCellProps:()=>({align:"right"}),customHeadRender:Aa,customBodyRender:function(e,t){return 1===t.rowData[1]?Object(L.jsx)(A.a,{label:Math.round(e),style:{color:"white",backgroundColor:z.a.shades.green}}):Object(L.jsx)(A.a,{label:Math.round(e)})}}},{label:"Total sales",name:"amount",options:{viewColumns:!1,filter:!1,sort:!1,setCellProps:()=>({align:"right"}),customHeadRender:Aa,customBodyRender:function(e,t){return 1===t.rowData[1]?Object(L.jsx)(A.a,{label:t.rowData[2]+" "+Object(Ya.d)(Math.round(e)),style:{color:"white",backgroundColor:z.a.shades.green}}):Object(L.jsx)(A.a,{label:t.rowData[2]+" "+Object(Ya.d)(Math.round(e))})}}},{label:"Total Collection",name:"paid",options:{viewColumns:!1,filter:!1,sort:!1,setCellProps:()=>({align:"right"}),customHeadRender:Aa,customBodyRender:function(e,t){return 1===t.rowData[1]?Object(L.jsx)("b",{children:t.rowData[2]+" "+Object(Ya.d)(Math.round(e))}):t.rowData[2]+" "+Object(Ya.d)(Math.round(e))}}},{label:"  ",name:"",options:{customHeadRender:Aa,display:!0}}],za=a(644),La=a(135),Ra=a(302),Ba=a.n(Ra);const Fa=Object(La.a)({overrides:{MuiTableCell:{root:{paddingLeft:"6px !important",paddingRight:"6px !important",paddingTop:"2px !important",paddingBottom:"2px !important"}},MUIDataTableHeadCell:{root:{padding:"8px !important",border:"1px solid white",backgroundColor:z.a.shades.light+" !important",color:"rgb(255, 255, 255) !important"}},MuiIconButton:{root:{margin:"0 6px",padding:7,fontSize:20,color:z.a.shades.main,"&:hover":{cursor:"pointer"}}},MuiButton:{root:{backgroundColor:z.a.shades.main+" !important","&:hover":{backgroundColor:z.a.shades.light+" !important"},"&$disabled":{backgroundColor:z.a.shades.light+" !important"}}},MuiCheckbox:{root:{"&$checked":{color:z.a.shades.main+" !important"}}},MuiChip:{label:{paddingLeft:"6px !important",paddingRight:"6px !important"}}}});var Pa=e=>{const{data:t,columns:a,minified:n,customToolbar:i,filter:c,onRowClick:r,noSearch:o,noPagination:l,sort:d,viewColumns:b,noDownload:j,title:m}=e;a.forEach(e=>e.options.setCellHeaderProps=e=>({}));const u={elevation:1,responsive:"standard",tableBodyHeight:"100%",selectableRows:"none",customToolbar:i,textLabels:{body:{noMatch:"No Items"}},downloadOptions:{filename:"reports.csv"},setRowProps:(e,t)=>({className:Object(s.a)({})}),onRowClick:r,fixedHeader:!0,viewColumns:void 0!==b&&b,download:!n&&(void 0===j||!j),search:!n&&(void 0===o||!o),print:!1,sort:void 0!==d&&d,filter:!n&&c,filterType:"checkbox",serverSide:!1,pagination:!n&&(void 0===l||!l),enableNestedDataAccess:".",rowsPerPage:100};return n?Object(L.jsx)(Ba.a,{data:t,options:u,columns:a}):Object(L.jsx)(za.a,{theme:Fa,children:Object(L.jsx)(Ba.a,{title:m,data:t,options:u,columns:a})})};var Ha=e=>{const{rawDetails:t,loading:a,level1:n,level2:c,paramter:s}=e,{enqueueSnackbar:r}=Object(me.b)(),[o,l]=i.a.useState({labels:["qatar","dubai"],datasets:[{data:[12,13]},{data:[32,23]}]});return i.a.useEffect(()=>{const e=t.filter(e=>1===e.level).map(e=>e[n]),a="branch"===c?Object(ue.clientY)():"warehouseLocation"===c?Object(je.d)().warehouseLocation:"cargoMode"===c?Object(je.d)().cargoMode:"deliveryType"===c?Object(je.d)().deliveryType:[],i=a.map(e=>t.filter(t=>2===t.level&&t[c]===e).map(e=>e[s]));l({labels:e||[],datasets:i.map((e,t)=>({label:a[t],data:e,backgroundColor:St[4+t],stack:"Stack 0"}))})},[r,t,n,c,s]),Object(L.jsxs)(L.Fragment,{children:[!a&&Object(L.jsx)(Yt.a,{data:o,options:(d="Total HBL "+s,{plugins:{title:{display:!0,text:"Chart.js Bar Chart - Stacked"}},responsive:!0,interaction:{mode:"index",intersect:!1},scales:{x:{stacked:!0},y:{stacked:!0},yAxes:[{scaleLabel:{display:!0,labelString:d}}]}})}),a&&Object(L.jsx)(_t.a,{variant:"text",height:250})]});var d};const Wa=[{label:"Branch",value:"branch"},{label:"Cargo Mode",value:"cargoMode"},{label:"Delivery Type",value:"deliveryType"},{label:"Warehouse Location",value:"warehouseLocation"}];var Ua=e=>{const{changed:t,searchFields:a}=e,{enqueueSnackbar:n}=Object(me.b)(),[c,s]=i.a.useState([]),[r,o]=i.a.useState([]),[l,d]=i.a.useState(!1),[b,j]=i.a.useState("branch"),[m,u]=i.a.useState("cargoMode");return i.a.useEffect(()=>{d(!0),Lt(Object(ue.clientY)(),a.startDate).then(e=>{o(e)}).catch(e=>{n("Could not fetch",{variant:"error"})}).finally(e=>d(!1))},[n,t,a]),i.a.useEffect(()=>{const e=[],t=Object(Gt.groupBy)(r,b),a=Object(Gt.map)(Object(Gt.values)(t),e=>Object(Gt.reduce)(e,(e,t)=>({[b]:t[b],level:1,id:t[b].toUpperCase()+" ("+b.toLowerCase()+")",count:(e.count||0)+ +t.count,amount:(e.amount||0)+ +t.amount,paid:(e.paid||0)+ +t.paid,currency:"branch"===b?Object(je.b)(t.branch).currency:""}),{}));Object(Gt.forEach)(a,a=>{const n=t[a[b]],i=Object(Gt.groupBy)(n,m),c=Object(Gt.map)(Object(Gt.values)(i),e=>Object(Gt.reduce)(e,(e,t)=>({[m]:t[m],id:" - - - > "+t[m].toUpperCase()+" ("+m.toLowerCase()+")",level:2,count:(e.count||0)+ +t.count,amount:(e.amount||0)+ +t.amount,paid:(e.paid||0)+ +t.paid,currency:"branch"===m||"branch"===b?Object(je.b)(t.branch).currency:""}),{}));e.push(a,...c)}),s(e)},[n,r,b,m]),Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(g.a,{container:!0,children:[Object(L.jsxs)(g.a,{container:!0,xs:12,sm:12,md:12,lg:12,xl:12,style:{marginBottom:10},children:[Object(L.jsx)(ce.v,{size:2,label:"Primary Level",valueObjects:Wa,value:b,onChange:e=>j(e.target.value)}),Object(L.jsx)(ce.v,{size:2,label:"Secondary Level",valueObjects:Wa,style:{marginLeft:10},value:m,onChange:e=>e.target.value!==b&&u(e.target.value)})]}),Object(L.jsxs)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:[Object(L.jsx)(ce.r,{loading:l}),Object(L.jsx)(Pa,{data:c,columns:Na,filter:!1,noSearch:!0,noPagination:!0,noDownload:!0})]}),Object(L.jsx)(g.a,{item:!0,xs:5,sm:5,md:5,lg:5,xl:5,style:{marginTop:80,paddingLeft:40},children:Object(L.jsx)(Ha,{paramter:"count",rawDetails:c,loading:!1,level1:b,level2:m})}),Object(L.jsx)(g.a,{item:!0,xs:2,sm:2,md:2,lg:2,xl:2,style:{marginTop:80}}),Object(L.jsx)(g.a,{item:!0,xs:5,sm:5,md:5,lg:5,xl:5,style:{marginTop:80,paddingRight:40},children:Object(L.jsx)(Ha,{paramter:"amount",rawDetails:c,loading:!1,level1:b,level2:m})})]})})};var _a=e=>{let{searchFields:t}=e;return Object(L.jsx)(g.a,{container:!0,style:{paddingBottom:30},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,style:{padding:0},children:Object(L.jsx)(Ua,{searchFields:t})})})};const Ga=["One Week","One Month","Three Months"];var qa=e=>{const[t,a]=i.a.useState({startDate:lt()().subtract(7,"d").format("YYYY-MM-DD"),timeFrame:Ga[0]});return Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(Ye.a,{elevation:0,children:[Object(L.jsx)(Dt.a,{title:Object(L.jsxs)(g.a,{container:!0,spacing:1,justify:"space-between",alignContent:"space-between",alignItems:"space-between",children:[Object(L.jsx)(ce.j,{Icon:Ca.a,size:4,title:"Cross Branch Sales",subtitle:"Hi, "+localStorage.getItem("mw-u")}),Object(L.jsx)(g.a,{container:!0,spacing:2,xs:8,justify:"flex-end",alignContent:"center",alignItems:"center",style:{paddingRight:10,paddingTop:10},children:Object(L.jsx)(wt.a,{color:"primary",children:Ga.map(e=>Object(L.jsx)(f.a,{variant:e===t.timeFrame?"contained":"outlined",onClick:n=>(e=>{let n;e===Ga[0]?n=lt()().subtract(7,"d").format("YYYY-MM-DD"):e===Ga[1]?n=lt()().subtract(31,"d").format("YYYY-MM-DD"):e===Ga[2]&&(n=lt()().subtract(92,"d").format("YYYY-MM-DD")),a(Object(m.a)(Object(m.a)({},t),{},{timeFrame:e,startDate:n}))})(e),children:e}))})})]})}),Object(L.jsx)(Ae.a,{children:Object(L.jsxs)(Ye.a,{style:{paddingTop:0},children:[Object(L.jsx)(_a,{searchFields:t}),Object(L.jsx)("div",{style:{padding:200}})]})})]})})};const Va=(e,t)=>Object(L.jsx)("th",{style:{textAlign:"center",background:z.a.shades.light,color:"white"},children:e.label});var Ja=[{label:"  ",name:"",options:{customHeadRender:Va,display:!0}},{name:"level",options:{display:!1}},{label:"Criteria",name:"id",options:{viewColumns:!1,filter:!1,sort:!1,customBodyRender:function(e,t){return 1===t.rowData[1]?Object(L.jsx)("b",{children:e}):Object(L.jsxs)(L.Fragment,{children:["\xa0 \xa0 \xa0 \xa0 \xa0 ",e]})}}},{label:"HBL",name:"countPending",options:{viewColumns:!1,filter:!1,sort:!1,setCellProps:()=>({align:"center"}),customHeadRender:Va,customBodyRender:function(e,t){return 0===t.rowIndex?Object(L.jsx)("b",{children:"Pending"}):1===t.rowData[1]?Object(L.jsx)("b",{children:Math.round(e)}):Math.round(e)}}},{label:"Volume",name:"volumePending",options:{viewColumns:!1,filter:!1,sort:!1,setCellProps:()=>({align:"center"}),customHeadRender:Va,customBodyRender:function(e,t){return 0===t.rowIndex?Object(L.jsx)("b",{children:"Pending"}):1===t.rowData[1]?Object(L.jsx)("b",{children:Math.round(e)}):Math.round(e)}}},{label:"Weight",name:"weightPending",options:{viewColumns:!1,filter:!1,sort:!1,setCellProps:()=>({align:"center"}),customHeadRender:Va,customBodyRender:function(e,t){return 0===t.rowIndex?Object(L.jsx)("b",{children:"Pending"}):1===t.rowData[1]?Object(L.jsx)("b",{children:Math.round(e)}):Math.round(e)}}},{label:"  ",name:"id",options:{viewColumns:!1,filter:!1,sort:!1,customBodyRender:function(e,t){return Object(L.jsx)(L.Fragment,{children:" "})}}},{label:"HBL",name:"countLoaded",options:{viewColumns:!1,filter:!1,sort:!1,setCellProps:()=>({align:"center"}),customHeadRender:Va,customBodyRender:function(e,t){return 0===t.rowIndex?Object(L.jsx)("b",{children:"Loaded"}):1===t.rowData[1]?Object(L.jsx)("b",{children:Math.round(e)}):Math.round(e)}}},{label:"Volume",name:"volumeLoaded",options:{viewColumns:!1,filter:!1,sort:!1,setCellProps:()=>({align:"center"}),customHeadRender:Va,customBodyRender:function(e,t){return 0===t.rowIndex?Object(L.jsx)("b",{children:"Loaded"}):1===t.rowData[1]?Object(L.jsx)("b",{children:Math.round(e)}):Math.round(e)}}},{label:"Weight",name:"weightLoaded",options:{viewColumns:!1,filter:!1,sort:!1,setCellProps:()=>({align:"center"}),customHeadRender:Va,customBodyRender:function(e,t){return 0===t.rowIndex?Object(L.jsx)("b",{children:"Loaded"}):1===t.rowData[1]?Object(L.jsx)("b",{children:Math.round(e)}):Math.round(e)}}},{label:"Shipment",name:"shipmentLoaded",options:{viewColumns:!1,filter:!1,sort:!1,setCellProps:()=>({align:"center"}),customHeadRender:Va,customBodyRender:function(e,t){return 0===t.rowIndex?Object(L.jsx)("b",{children:"Loaded"}):1===t.rowData[1]?Object(L.jsx)("b",{children:Math.round(e)}):Math.round(e)}}},{label:"  ",name:"id",options:{viewColumns:!1,filter:!1,sort:!1,customBodyRender:function(e,t){return Object(L.jsx)(L.Fragment,{children:" "})}}},{label:"HBL",name:"countReached",options:{viewColumns:!1,filter:!1,sort:!1,setCellProps:()=>({align:"center"}),customHeadRender:Va,customBodyRender:function(e,t){return 0===t.rowIndex?Object(L.jsx)("b",{children:"Reached"}):1===t.rowData[1]?Object(L.jsx)("b",{children:Math.round(e)}):Math.round(e)}}},{label:"Volume",name:"volumeReached",options:{viewColumns:!1,filter:!1,sort:!1,setCellProps:()=>({align:"center"}),customHeadRender:Va,customBodyRender:function(e,t){return 0===t.rowIndex?Object(L.jsx)("b",{children:"Reached"}):1===t.rowData[1]?Object(L.jsx)("b",{children:Math.round(e)}):Math.round(e)}}},{label:"Weight",name:"weightReached",options:{viewColumns:!1,filter:!1,sort:!1,setCellProps:()=>({align:"center"}),customHeadRender:Va,customBodyRender:function(e,t){return 0===t.rowIndex?Object(L.jsx)("b",{children:"Reached"}):1===t.rowData[1]?Object(L.jsx)("b",{children:Math.round(e)}):Math.round(e)}}},{label:"Shipment",name:"shipmentReached",options:{viewColumns:!1,filter:!1,sort:!1,setCellProps:()=>({align:"center"}),customHeadRender:Va,customBodyRender:function(e,t){return 0===t.rowIndex?Object(L.jsx)("b",{children:"Reached"}):1===t.rowData[1]?Object(L.jsx)("b",{children:Math.round(e)}):Math.round(e)}}},{label:"  ",name:"",options:{customHeadRender:Va,display:!0}}];const Ka=[{label:"Branch",value:"branch"},{label:"Cargo Mode",value:"cargoMode"}];var Za=e=>{const{changed:t,searchFields:a}=e,{enqueueSnackbar:n}=Object(me.b)(),[c,s]=i.a.useState([]),[r,o]=i.a.useState([]),[l,d]=i.a.useState([]),[b,j]=i.a.useState(!1),[u,p]=i.a.useState("branch"),[h,O]=i.a.useState("cargoMode");return i.a.useEffect(()=>{j(2),Rt(Object(ue.clientY)(),a.startDate).then(e=>{o(e)}).catch(e=>{n("Could not fetch HBLs",{variant:"error"})}).finally(e=>j(e=>e-1)),Bt(Object(ue.clientY)(),a.startDate).then(e=>{d(e)}).catch(e=>{n("Could not fetch Shipments",{variant:"error"})}).finally(e=>j(e=>e-1))},[n,t,a]),i.a.useEffect(()=>{const e=[],t=Object(Gt.groupBy)(r,u),a=Object(Gt.map)(Object(Gt.values)(t),e=>Object(Gt.reduce)(e,(e,t)=>Object(m.a)(Object(m.a)({},e),{},{[u]:t[u],level:1,id:t[u].toUpperCase(),["count".concat(t.fetched)]:(e["count".concat(t.fetched)]||0)+ +t.count,["volume".concat(t.fetched)]:(e["volume".concat(t.fetched)]||0)+ +t.volume,["weight".concat(t.fetched)]:(e["weight".concat(t.fetched)]||0)+ +t.weight,shipmentLoaded:l.filter(e=>e[u]===t[u]&&"0"===e.reached).reduce((e,t)=>e+ +t.count,0)||0,shipmentReached:l.filter(e=>e[u]===t[u]&&"1"===e.reached).reduce((e,t)=>e+ +t.count,0)||0}),{}));console.log(r.filter(e=>"Pending"===e.fetched&&"qatar"===e[u]&&"Air Cargo"===e[h])),Object(Gt.forEach)(a,a=>{const n=t[a[u]],i=Object(Gt.groupBy)(n,h),c=Object(Gt.map)(Object(Gt.values)(i),e=>Object(Gt.reduce)(e,(e,t)=>Object(m.a)(Object(m.a)({},e),{},{[h]:t[h],id:" - - - > "+t[h].toUpperCase(),level:2,["count".concat(t.fetched)]:(e["count".concat(t.fetched)]||0)+ +t.count,["volume".concat(t.fetched)]:(e["volume".concat(t.fetched)]||0)+ +t.volume,["weight".concat(t.fetched)]:(e["weight".concat(t.fetched)]||0)+ +t.weight,shipmentLoaded:l.filter(e=>e[h]===t[h]&&e[u]===t[u]&&"0"===e.reached).reduce((e,t)=>e+ +t.count,0)||0,shipmentReached:l.filter(e=>e[h]===t[h]&&e[u]===t[u]&&"1"===e.reached).reduce((e,t)=>e+ +t.count,0)||0}),{}));e.push(a,...c)});const n=e.map(e=>Object(m.a)(Object(m.a)({},e),{},{countPending:e.countPending||0,countLoaded:e.countLoaded||0,countReached:e.countReached||0,volumePending:e.volumePending||0,volumeLoaded:e.volumeLoaded||0,volumeReached:e.volumeReached||0,weightPending:e.weightPending||0,weightLoaded:e.weightLoaded||0,weightReached:e.weightReached||0}));s([...n,{id:"TOTAL",level:1,countPending:Object(Gt.reduce)(n,(e,t)=>e+ +(1===t.level&&t.countPending||0),0),countLoaded:Object(Gt.reduce)(n,(e,t)=>e+ +(1===t.level&&t.countLoaded||0),0),countReached:Object(Gt.reduce)(n,(e,t)=>e+ +(1===t.level&&t.countReached||0),0),volumePending:Object(Gt.reduce)(n,(e,t)=>e+ +(1===t.level&&t.volumePending||0),0),volumeLoaded:Object(Gt.reduce)(n,(e,t)=>e+ +(1===t.level&&t.volumeLoaded||0),0),volumeReached:Object(Gt.reduce)(n,(e,t)=>e+ +(1===t.level&&t.volumeReached||0),0),weightPending:Object(Gt.reduce)(n,(e,t)=>e+ +(1===t.level&&t.weightPending||0),0),weightLoaded:Object(Gt.reduce)(n,(e,t)=>e+ +(1===t.level&&t.weightLoaded||0),0),weightReached:Object(Gt.reduce)(n,(e,t)=>e+ +(1===t.level&&t.weightReached||0),0),shipmentLoaded:Object(Gt.reduce)(n,(e,t)=>e+ +(1===t.level&&t.shipmentLoaded||0),0),shipmentReached:Object(Gt.reduce)(n,(e,t)=>e+ +(1===t.level&&t.shipmentReached||0),0)}])},[n,r,l,u,h]),Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(g.a,{container:!0,children:[Object(L.jsxs)(g.a,{container:!0,xs:12,sm:12,md:12,lg:12,xl:12,style:{marginBottom:10},children:[Object(L.jsx)(ce.v,{size:2,label:"Primary Level",valueObjects:Ka,value:u,onChange:e=>p(e.target.value)}),Object(L.jsx)(ce.v,{size:2,label:"Secondary Level",valueObjects:Ka,style:{marginLeft:10},value:h,onChange:e=>e.target.value!==u&&O(e.target.value)})]}),Object(L.jsxs)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:[Object(L.jsx)(ce.r,{loading:!!b}),Object(L.jsx)(Pa,{data:[{},...c],columns:Ja,filter:!1,noSearch:!0,noPagination:!0,noDownload:!0})]}),!1]})})};var Xa=e=>{let{searchFields:t}=e;return Object(L.jsx)(g.a,{container:!0,style:{paddingBottom:30},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,style:{padding:0},children:Object(L.jsx)(Za,{searchFields:t})})})};const Qa=["Two Weeks","One Month","Three Months"];var $a=e=>{const[t,a]=i.a.useState({startDate:lt()().subtract(14,"d").format("YYYY-MM-DD"),timeFrame:Qa[0]});return Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(Ye.a,{elevation:0,children:[Object(L.jsx)(Dt.a,{title:Object(L.jsxs)(g.a,{container:!0,spacing:1,justify:"space-between",alignContent:"space-between",alignItems:"space-between",children:[Object(L.jsx)(ce.j,{Icon:Ca.a,size:4,title:"Cross Branch Shipments",subtitle:"Hi, "+localStorage.getItem("mw-u")}),Object(L.jsx)(g.a,{container:!0,spacing:2,xs:8,justify:"flex-end",alignContent:"center",alignItems:"center",style:{paddingRight:10,paddingTop:10},children:Object(L.jsx)(wt.a,{color:"primary",children:Qa.map(e=>Object(L.jsx)(f.a,{variant:e===t.timeFrame?"contained":"outlined",onClick:n=>(e=>{let n;e===Qa[0]?n=lt()().subtract(14,"d").format("YYYY-MM-DD"):e===Qa[1]?n=lt()().subtract(31,"d").format("YYYY-MM-DD"):e===Qa[2]&&(n=lt()().subtract(92,"d").format("YYYY-MM-DD")),a(Object(m.a)(Object(m.a)({},t),{},{timeFrame:e,startDate:n}))})(e),children:e}))})})]})}),Object(L.jsx)(Ae.a,{children:Object(L.jsxs)(Ye.a,{style:{paddingTop:0},children:[Object(L.jsx)(Xa,{searchFields:t}),Object(L.jsx)("div",{style:{padding:200}})]})})]})})};a(254);var en=a(164);a(304);var tn=a(719);a(441),a(442);var an=a(38);var nn=async()=>Object(At.c)("/v1/zone/get-all?branch=".concat(Object(je.d)().branch)),cn=a(720),sn=(a(721),a(722));a(447);var rn,on=a(122),ln=a(258),dn=a(123);const bn=dn.a.div(rn||(rn=Object(on.a)(["\n    position: absolute;\n    width: 38px;\n    height: 37px;\n    background-image: url(https://icon-library.com/images/pin-icon-png/pin-icon-png-9.jpg);\n    background-size: contain;\n    background-repeat: no-repeat;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    -webkit-transform: translate(-50%,-50%);\n    -ms-transform: translate(-50%,-50%);\n    transform: translate(-50%,-50%);\n    cursor: grab;\n"]))),jn=e=>{let{text:t,onClick:a}=e;return Object(L.jsx)(bn,{alt:t,onClick:a})};jn.defaultProps={onClick:null};const mn="AIzaSyAT29fYAnGsmcUacyqR0mnKvAL2PiAXqpQ";var un;dn.a.main(un||(un=Object(on.a)(["\n  width: 100%;\n  height: 80vh;\n"])));a(91);var pn=a(723);a(724);a(725),a(691);Object(r.a)(e=>({overlayHeader:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,boxShadow:"0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23)"},overlayTitle:{flexGrow:1}}));var gn=a(727),hn=[{label:"ID",name:"id",options:{display:!1}},{label:"Qualification",name:"type",options:{customBodyRender:function(e,t){return Object(L.jsx)(A.a,{label:e,style:{color:"white",backgroundColor:z.a.shades.green}})}}},{label:"School",name:"length",options:{}},{label:"Year",name:"volume",options:{}}],On=a(726),xn=a(43);var fn=e=>{const{setOverlayDetail:t,packages:a,setPackages:n,setOverlayType:c}=e,s=Object(xn.useDialog)(),r=Object(je.b)(Object(je.d)().branch).packagePricing,o=[...hn,{label:"Price",name:"price",options:{display:r}},{name:"actions",label:"  ",options:{empty:!0,viewColumns:!1,filter:!1,sort:!1,customBodyRender:(e,r)=>Object(L.jsxs)(i.a.Fragment,{children:[Object(L.jsx)(S.a,{title:"Delete",children:Object(L.jsx)("span",{children:Object(L.jsx)(de.a,{onClick:()=>{return e=r.rowData[0],t=r.rowData[1],void s.confirm({title:Object(L.jsx)("span",{style:{fontWeight:500,fontSize:18,letterSpacing:"-0.06px",lineHeight:"24px"},children:"DELETE CONFIRMATION"}),message:Object(L.jsxs)(h.a,{children:["Are you sure you want to ",Object(L.jsxs)("strong",{children:["Remove ",t]})]}),ok:{text:"Delete",variant:"contained",color:"primary"}}).then(()=>{n(a.filter(t=>t.id!==e))});var e,t},children:Object(L.jsx)(On.a,{})})})}),Object(L.jsx)(S.a,{title:"Edit/Change Password",children:Object(L.jsx)("span",{children:Object(L.jsx)(de.a,{onClick:()=>{t({id:r.rowData[0]}),c("ADD_EDU")},children:Object(L.jsx)($e.a,{})})})})]})}}];return Object(L.jsx)("div",{children:Object(L.jsx)(g.a,{container:!0,children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsx)(Pa,{data:a,columns:o,minified:!0})})})})};const vn=(e,t,a,n)=>{const i="Female"===e?"G":"B";let c;if(a)c=a.toString();else if(t){const e=parseInt(t);c=isNaN(e)?(new Date).getFullYear().toString():(e+3).toString()}else c=(new Date).getFullYear().toString();const s=n.toString().padStart(4,"0");return"ZO".concat(i).concat(c).concat(s)};var yn=e=>{const{loading:t,setLoading:a,setOverlayDetail:n,packages:c,setPackages:s,setOverlayType:r,setCargoRedundantData:o}=e,{enqueueSnackbar:l}=Object(me.b)(),d=Object(xn.useDialog)(),b={dateOfBirth:lt()().subtract(25,"year"),memberSince:lt()().startOf("year"),gender:"Male",obaType:"Not Exco",fetched:0,auth:Object(ue.getUserGlobal)("displayName"),uuid:Math.random().toString(16).slice(2,10)+"-"+Math.random().toString(16).slice(2,10)},[j,u]=i.a.useState(Object(m.a)({},b)),[p,h]=i.a.useState(!1),[O,x]=i.a.useState(!1),[v,y]=i.a.useState(0),[C,D]=i.a.useState(""),[w,S]=i.a.useState({}),[k,T]=i.a.useState({}),I=((Object(je.b)(Object(je.d)().branch)||{}).addressBreakdown||"").split(",");i.a.useEffect(()=>{const e=I.filter(e=>k[e]).map(e=>e+" "+k[e]).join(", ");u(Object(m.a)(Object(m.a)({},j),{},{address:e}))},[k]),i.a.useEffect(()=>{o(Object(m.a)({},j))},[o,j.warehouseLocation]);const M=()=>{it.a.getMax().then(e=>E(e+1e3+1))},E=async e=>{a(!0);let t=C;if(!t&&j.gender&&(j.batchOl||j.batchAl))try{let e;if(j.batchAl)e=j.batchAl;else if(j.batchOl){const t=parseInt(j.batchOl);isNaN(t)||(e=(t+3).toString())}if(e){const a=await it.a.getNextSequence(j.gender,e);t=vn(j.gender,j.batchOl,j.batchAl,a)}}catch(i){console.error("Error generating membership ID:",i)}it.a.create(Object(m.a)(Object(m.a)({},j),{},{memberId:e,memberCode:t||"ZCM-".concat("OBA","-").concat(e,"-").concat(String.fromCharCode(65+Math.floor(26*Math.random()))),dateOfBirth:"string"===typeof j.dateOfBirth?j.dateOfBirth:j.dateOfBirth.format("YYYY-MM-DD"),memberSince:"string"===typeof j.memberSince?j.memberSince:j.memberSince.format("YYYY-MM-DD"),education:c})).then(e=>{l("Created",{variant:"success"}),r("VIEW"),n({id:e}),N()}).catch(e=>{l("Could not Create",{variant:"error"})}).finally(e=>a(!1))},Y=e=>{if(u(Object(m.a)(Object(m.a)({},j),{},{[e.target.name]:e.target.value})),w[e.target.name]){const t=Object(m.a)({},w);delete t[e.target.name],S(t)}},A=()=>{const e={};return j.fullName&&j.fullName.trim()||(e.fullName="Full Name is required"),j.nic&&j.nic.trim()||(e.nic="NIC Number is required"),j.gender||(e.gender="Gender is required"),j.dateOfBirth&&("string"!==typeof j.dateOfBirth||j.dateOfBirth.trim())||(e.dateOfBirth="Date of Birth is required"),j.email&&j.email.trim()||(e.email="Email is required"),j.contact&&j.contact.trim()||(e.contact="Mobile Number is required"),j.batchOl&&j.batchOl.trim()||(e.batchOl="O/L Year is required"),S(e),0===Object.keys(e).length};i.a.useEffect(()=>{(async()=>{if(j.gender&&(j.batchOl||j.batchAl))try{let e;if(j.batchAl)e=j.batchAl;else if(j.batchOl){const t=parseInt(j.batchOl);isNaN(t)||(e=(t+3).toString())}if(e){const t=await it.a.getNextSequence(j.gender,e),a=vn(j.gender,j.batchOl,j.batchAl,t);D(a)}}catch(e){console.error("Error generating membership ID:",e);const t=vn(j.gender,j.batchOl,j.batchAl,1);D(t)}else D("")})()},[j.gender,j.batchOl,j.batchAl]);const N=()=>{u(Object(m.a)({},b)),s([]),h(!1),T({}),x(!1)};return Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("div",{children:Object(L.jsx)(g.a,{container:!0,children:Object(L.jsxs)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:[Object(L.jsx)(ce.r,{loading:t}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:0},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"PERSONAL DETAILS"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:2,alignContent:"flex-start",alignItems:"flex-start",justify:"flex-start",children:[Object(L.jsx)(ce.C,{size:6,label:"Full Name*",name:"fullName",Icon:cn.a,value:j.fullName,onChange:Y,error:w.fullName,helperText:w.fullName}),Object(L.jsx)(ce.C,{size:6,label:"Name with Initial*",name:"shortName",Icon:cn.a,value:j.shortName,onChange:Y}),Object(L.jsx)(ce.C,{size:6,label:"NIC No*",name:"nic",value:j.nic,onChange:Y,error:w.nic,helperText:w.nic}),Object(L.jsx)(ce.C,{size:6,label:"Membership ID",name:"memberCode",value:C,disabled:!0,helperText:"Auto-generated based on gender and batch year"}),Object(L.jsx)(ce.u,{size:3,name:"gender",onChange:Y,value:j.gender,values:["Male","Female"],error:w.gender}),w.gender&&Object(L.jsx)(g.a,{item:!0,xs:12,children:Object(L.jsx)("span",{style:{color:"#f44336",fontSize:"0.75rem",marginLeft:"14px"},children:w.gender})}),Object(L.jsx)(ce.e,{size:3,label:"Date of Birth*",name:"dateOfBirth",value:j.dateOfBirth,onChange:Y,error:w.dateOfBirth,helperText:w.dateOfBirth})]})})]})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:5},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"CONTACT DETAILS"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:2,alignContent:"flex-start",alignItems:"flex-start",justify:"flex-start",children:[Object(L.jsx)(ce.C,{size:3,label:"Email*",name:"email",value:j.email,onChange:Y,error:w.email,helperText:w.email}),Object(L.jsx)(ce.C,{size:6,label:"Address",name:"address",value:j.address,onChange:Y}),t?Object(L.jsx)(ce.C,{size:6}):Object(L.jsx)(ce.s,{size:6,label:"Mobile Number*",name:"contact",countryCode:Object(je.d)().countryCodeConsignee,value:j.contact,onChange:Y,error:w.contact,helperText:w.contact}),t?Object(L.jsx)(ce.C,{size:5}):Object(L.jsx)(ce.s,{size:6,label:"Landline Number",name:"contactAlt",countryCode:Object(je.d)().countryCodeConsignee,value:j.contactAlt,onChange:Y}),Object(L.jsx)(ce.C,{size:6,label:"Note",name:"note",value:j.note,onChange:Y})]})})]})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:5},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"SCHOOL DAYS"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:2,alignContent:"flex-start",alignItems:"flex-start",justify:"flex-start",children:[Object(L.jsx)(ce.C,{size:2,label:"O/L Batch*",name:"batchOl",value:j.batchOl,onChange:Y,error:w.batchOl,helperText:w.batchOl}),Object(L.jsx)(ce.C,{size:2,label:"A/L Batch",name:"batchAl",value:j.batchAl,onChange:Y}),Object(L.jsx)(ce.C,{size:2,label:"Year of Admission",name:"yearOfAdmission",value:j.yearOfAdmission,onChange:Y}),Object(L.jsx)(ce.C,{size:2,label:"Year of Leaving",name:"yearOfLeaving",value:j.yearOfLeaving,onChange:Y}),Object(L.jsx)(ce.C,{size:2,label:"Index Number",name:"indexNumber",value:j.indexNumber,onChange:Y}),Object(L.jsx)(ce.C,{size:6,label:"Achievements",name:"achievements",value:j.achievements,onChange:Y}),Object(L.jsx)(ce.C,{size:6,label:"Postions Held",name:"postionsHeld",value:j.postionsHeld,onChange:Y}),Object(L.jsx)(ce.C,{size:6,label:"Note",name:"note",value:j.note,onChange:Y})]})})]})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:5},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"EDUCATION DETAILS"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:2,alignContent:"flex-start",alignItems:"flex-start",justify:"flex-start",children:[Object(L.jsx)(g.a,{item:!0,xs:12,md:11,style:{paddingTop:15,paddingBottom:5},children:Object(L.jsx)(f.a,{variant:"contained",color:"primary",endIcon:Object(L.jsx)(gn.a,{}),disabled:t,onClick:()=>{r("ADD_EDU"),n({})},children:"Add Education"})}),Object(L.jsx)(g.a,{item:!0,xs:12,md:12,children:Object(L.jsx)(fn,{setPackages:s,packages:c,setOverlayDetail:n,setOverlayType:r})})]})})]})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:5},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"EMPLOYMENT DETAILS"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:2,alignContent:"flex-start",alignItems:"flex-start",justify:"flex-start",children:[Object(L.jsx)(ce.C,{size:2,label:"Work Place",name:"workPlace",value:j.workPlace,onChange:Y}),Object(L.jsx)(ce.C,{size:2,label:"Designation",name:"designation",value:j.designation,onChange:Y}),Object(L.jsx)(ce.D,{size:2,label:"Category",name:"workCategory",auto:Object(je.d)().workCategory,value:j.workCategory,onChange:Y}),Object(L.jsx)(ce.C,{size:6,label:"Note",name:"workNote",value:j.workNote,onChange:Y})]})})]})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:5},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"OBA RELATED"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:2,alignContent:"flex-start",alignItems:"flex-start",justify:"flex-start",children:[Object(L.jsx)(ce.e,{label:"Membership since",name:"memberSince",value:j.memberSince,onChange:Y}),Object(L.jsx)(ce.u,{size:3,name:"obaType",onChange:Y,value:j.obaType,values:["Not Exco","Exco","Ex-Exco"]}),Object(L.jsx)(ce.C,{size:6,label:"Note",name:"obaNote",value:j.obaNote,onChange:Y})]})})]})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:20},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(g.a,{container:!0,spacing:1,alignContent:"flex-end",alignItems:"flex-end",justify:"flex-end",children:[Object(L.jsx)(f.a,{variant:"outlined",color:"primary",size:"medium",style:{marginRight:5},disabled:t,onClick:()=>N(),children:"Clear"}),Object(L.jsx)(f.a,{variant:"contained",color:"primary",size:"medium",endIcon:Object(L.jsx)(sn.a,{}),style:{marginRight:5},disabled:t,onClick:()=>{A()?v?d.confirm(Object(ce.d)("Continue? Paid amount is Zero","ADD WITH ZERO PAYMENT")).then(()=>{M()}):M():l("Please fill all mandatory fields",{variant:"error"})},children:"Create Membership"})]})})}),Object(L.jsx)(ce.r,{loading:t})]})})})})};var Cn=e=>{const{overlayDetail:t,setOverlayDetail:a,setPackages:n,packages:c}=e,{enqueueSnackbar:s}=Object(me.b)(),[r,o]=i.a.useState(void 0!==t.id?c.filter(e=>e.id===t.id)[0]:{quantity:1}),l=Object(je.b)(Object(je.d)().branch).packagePricing,d=e=>{o(Object(m.a)(Object(m.a)({},r),{},{[e.target.name]:e.target.value}))};return Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("div",{children:Object(L.jsx)(g.a,{container:!0,children:Object(L.jsxs)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:[Object(L.jsx)(ce.m,{title:"ADD EDUCATIONAL QUALIFICATION",onClose:()=>a(!1)}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:0},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsx)(ct.a,{defaultExpanded:!0,children:Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:1,alignContent:"flex-start",alignItems:"flex-start",justify:"flex-start",children:[Object(L.jsx)(ce.D,{size:6,label:"Type",name:"type",auto:Object(je.d)().eduType,value:r.type,onChange:d}),Object(L.jsx)(ce.C,{size:6,label:"Completion year",name:"completionYear",value:r.completionYear,onChange:d}),Object(L.jsx)(ce.D,{size:6,label:"Category",name:"category",auto:Object(je.d)().eduCategory,value:r.category,onChange:d}),Object(L.jsx)(ce.C,{size:6,label:"Name of the course",name:"course",value:r.course,onChange:d}),Object(L.jsx)(ce.C,{size:6,label:"Institution/University/School",name:"institution",value:r.institution,onChange:d}),Object(L.jsx)(ce.C,{size:12,label:"Remarks",name:"remarks",value:r.remarks,onChange:d})]})})})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:20,paddingBottom:20},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsx)(g.a,{container:!0,spacing:1,alignContent:"flex-end",alignItems:"flex-end",justify:"flex-end",children:Object(L.jsx)(f.a,{variant:"contained",color:"primary",endIcon:Object(L.jsx)(gn.a,{}),onClick:()=>(()=>{if(l&&void 0===r.price)return void s("Please calculate price",{variant:"warning"});if(!r.type)return void s("Please select Type",{variant:"warning"});if(!r.quantity)return void s("Please type quantity",{variant:"warning"});if(+r.quantity<=0)s("Please type quantity",{variant:"warning"});else{if(void 0!==t.id){const e=c.map(e=>e.id!==t.id?e:Object(m.a)(Object(m.a)({},r),{},{id:new Date}));n(e)}else n([...c,Object(m.a)(Object(m.a)({},r),{},{id:new Date})]);a(!1)}})(),children:"Add Education"})})})})]})})})})},Dn=[{label:"ID",name:"id",options:{display:!1}},{name:"shortLoaded",options:{display:!1}},{label:"Type",name:"type",options:{customBodyRender:function(e,t){return t.rowData[1]?Object(L.jsx)(A.a,{label:e,style:{backgroundColor:z.a.shades.red,color:"white"}}):Object(L.jsx)(A.a,{label:e})}}},{label:"Course",name:"course",options:{}},{label:"Institution",name:"institution",options:{}},{label:"Remarks",name:"remarks",options:{}}],wn=a(190),Sn=a.n(wn);var kn=e=>{const{packages:t,shortLoaded:a}=e,[n,c]=i.a.useState({});return i.a.useEffect(()=>{c({quantity:Object(Ya.c)(t),weight:Object(Ya.i)(t),volume:Object(Ya.h)(t)})},[t]),Object(L.jsx)("div",{children:Object(L.jsx)(g.a,{container:!0,children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsx)(Pa,{data:t,columns:Dn,minified:!0})})})})},Tn=a(44),In=a.n(Tn);var Mn=e=>{var t;const{setOverlayDetail:a,details:n,loading:i}=e;(Object(je.b)(Object(je.d)().branch)||{}).qidLabel;return Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("div",{children:Object(L.jsx)(g.a,{container:!0,children:Object(L.jsxs)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:[Object(L.jsx)(ce.m,{title:"MEMBER DETAILS",onClose:()=>a(!1)}),Object(L.jsx)(ce.r,{loading:i}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:0},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"PERSONAL DETAILS"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:1,alignContent:"flex-start",alignItems:"flex-start",justify:"flex-start",children:[Object(L.jsx)(ce.p,{size:3,label:"Membership ID",value:n.memberCode}),Object(L.jsx)(ce.p,{size:3,label:"Short Name",value:n.shortName}),Object(L.jsx)(ce.p,{size:6,label:"Full Name",value:n.fullName}),Object(L.jsx)(ce.p,{size:3,label:"Gender",value:n.gender}),Object(L.jsx)(ce.p,{size:3,label:"NIC Number",value:n.nic}),Object(L.jsx)(ce.p,{size:3,label:"Date of Birth",value:n.dateOfBirth})]})})]})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:5},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"CONTACT DETAILS"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:1,alignContent:"flex-start",alignItems:"flex-start",justify:"flex-start",children:[Object(L.jsx)(ce.p,{size:3,label:"Email",value:n.email}),Object(L.jsx)(ce.p,{size:6,label:"Address",value:n.address}),Object(L.jsx)(g.a,{item:!0,md:3}),Object(L.jsx)(ce.p,{size:3,label:"Contact",value:n.contact}),Object(L.jsx)(ce.p,{size:3,label:"Contact Alt",value:n.contactAlt}),Object(L.jsx)(ce.p,{size:6,label:"Note",value:n.note})]})})]})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:5},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"SCHOOL DAYS"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:1,alignContent:"flex-start",alignItems:"flex-start",justify:"flex-start",children:[Object(L.jsx)(ce.p,{size:2,label:"Batch",value:n.batch}),Object(L.jsx)(ce.p,{size:2,label:"Year of Admission",value:n.yearOfAdmission}),Object(L.jsx)(ce.p,{size:2,label:"Year of Leaving",value:n.yearOfLeaving}),Object(L.jsx)(ce.p,{size:2,label:"Index Number",value:n.indexNumber}),Object(L.jsx)(ce.p,{size:6,label:"Achievements",value:n.achievements}),Object(L.jsx)(ce.p,{size:6,label:"Position Held",value:n.positionHeld}),Object(L.jsx)(ce.p,{size:6,label:"Notes",value:n.notes})]})})]})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:5},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"EDUCATIONAL QUALIFICATION"}),Object(L.jsx)(st.a,{children:Object(L.jsx)(g.a,{container:!0,spacing:1,alignContent:"flex-start",alignItems:"flex-start",justify:"flex-start",children:Object(L.jsx)(g.a,{item:!0,md:12,children:Object(L.jsx)(kn,{packages:In()(n,"education",[]),shortLoaded:null===(t=n.cargo)||void 0===t?void 0:t.shortLoaded})})})})]})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:5},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"EMPLOYMENT"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:1,alignContent:"flex-start",alignItems:"flex-start",justify:"flex-start",children:[Object(L.jsx)(ce.p,{size:2,label:"Work Place",value:n.workPlace}),Object(L.jsx)(ce.p,{size:2,label:"Designation",value:n.designation}),Object(L.jsx)(ce.p,{size:2,label:"Category",value:n.workCategory}),Object(L.jsx)(ce.p,{size:6,label:"Notes",value:n.workNote})]})})]})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:5},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"OBA RELATED"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:1,alignContent:"flex-start",alignItems:"flex-start",justify:"flex-start",children:[Object(L.jsx)(ce.p,{size:2,label:"Membership Since",value:n.memberSince}),Object(L.jsx)(ce.p,{size:2,label:"Membership Type",value:n.obaType}),Object(L.jsx)(ce.p,{size:6,label:"Notes",value:n.obaNote})]})})]})})}),Object(L.jsx)(ce.r,{loading:i})]})})})})};const En="subs";var Yn=async e=>{const t=[];return e.id?Object(Le.c)(En,e.memberId):(e.memberId&&t.push(Object(Re.n)("memberId","==",e.memberId)),e.startDate&&(t.push(Object(Re.n)("date",">=",e.startDate+"00:00")),t.push(Object(Re.n)("date","<=",e.endDate+"23:59"))),e.nameWithInitials&&(t.push(Object(Re.j)("nameWithInitials")),t.push(Object(Re.m)(e.nameWithInitials)),t.push(Object(Re.e)(e.nameWithInitials+"\uf8ff"))),Object(Le.a)(En,...t))},An=async e=>Object(Le.d)(En,Object(m.a)({},e)),Nn=[{label:"ID",name:"id",options:{display:!1}},{label:"Amount",name:"amount",options:{customBodyRender:function(e,t){return Object(L.jsx)(A.a,{label:e})}}},{label:"Date",name:"date",options:{}},{label:"Note",name:"forNote",options:{}},{label:"Authorized by",name:"auth",options:{}}];var zn=e=>{var t;const{setOverlayDetail:a,details:n}=e,{enqueueSnackbar:c}=Object(me.b)(),[s,r]=i.a.useState({date:lt()().format("YYYY-MM-DD HH:mm"),memberId:n.uuid,fullName:n.fullName,batchOl:n.batchOl,auth:Object(ue.getUserGlobal)("displayName")}),[o,l]=i.a.useState([]),[d,b]=i.a.useState(0),[j,u]=i.a.useState(!1);i.a.useEffect(()=>{n.uuid&&(u(!0),Yn({memberId:n.uuid}).then(e=>{l(e)}).catch(e=>{c("Could not fetch driver",{variant:"error"})}).finally(e=>u(!1)))},[c,n.uuid,d]);const p=e=>{r(Object(m.a)(Object(m.a)({},s),{},{[e.target.name]:e.target.value}))},h=()=>{r({date:lt()().format("YYYY-MM-DD HH:mm"),memberId:n.uuid,fullName:n.fullName,batchOl:n.batchOl,auth:Object(ue.getUserGlobal)("displayName")})};return Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("div",{children:Object(L.jsx)(g.a,{container:!0,children:Object(L.jsxs)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:[Object(L.jsx)(ce.m,{title:"SUBSCRIPTIONS OF "+(null===n||void 0===n||null===(t=n.fullName)||void 0===t?void 0:t.toUpperCase()),onClose:()=>a(!1)}),Object(L.jsx)(ce.r,{loading:j}),Object(L.jsxs)(g.a,{container:!0,spacing:0,style:{paddingTop:5},children:[Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,style:{padding:10},children:Object(L.jsx)(A.a,{label:"STATUS: "+(n.obaType||"N/A"),style:{color:"white",backgroundColor:z.a.shades.green}})}),Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!1,children:[Object(L.jsx)(ce.l,{title:"ADD NEW SUBSCRIPTIONS"}),Object(L.jsxs)(st.a,{children:[Object(L.jsxs)(g.a,{container:!0,spacing:1,alignContent:"flex-start",alignItems:"flex-start",justify:"flex-start",children:[Object(L.jsx)(ce.C,{size:6,disabled:!0,label:"Member",value:s.fullName}),Object(L.jsx)(ce.C,{size:4,disabled:!0,label:"Date of Reciept",value:s.date}),Object(L.jsx)(ce.C,{size:6,label:"Amount",name:"amount",value:s.amount,onChange:p}),Object(L.jsx)(ce.C,{size:6,label:"For",value:s.forNote,name:"forNote",onChange:p})]}),Object(L.jsxs)(g.a,{container:!0,spacing:1,alignContent:"flex-end",alignItems:"flex-end",justify:"flex-end",children:[Object(L.jsx)(f.a,{variant:"outlined",color:"primary",size:"medium",style:{marginRight:5},disabled:j,onClick:()=>h(),children:"Clear"}),Object(L.jsx)(f.a,{variant:"contained",color:"primary",size:"medium",endIcon:Object(L.jsx)(sn.a,{}),style:{marginRight:5},disabled:j,onClick:()=>(u(!0),void An(Object(m.a)({},s)).then(e=>{c("Renewed",{variant:"success"}),h(),b(d+1)}).catch(e=>{c("Could not Renew",{variant:"error"})}).finally(e=>u(!1))),children:"Renew Subscription"})]})]})]})})]}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:5},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"PREVIOUS SUBSCRIPTIONS"}),Object(L.jsx)(st.a,{children:Object(L.jsx)(g.a,{container:!0,sm:12,children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,style:{paddingTop:5,paddingBottom:5},children:Object(L.jsx)(Pa,{data:o,columns:Nn,minified:!0})})})})]})})}),Object(L.jsx)(ce.r,{loading:j})]})})})})};const Ln=i.a.lazy(()=>Promise.all([a.e(0),a.e(4),a.e(5)]).then(a.bind(null,1219)));var Rn=e=>Object(L.jsx)(n.Suspense,{fallback:Object(L.jsx)("div",{children:"Loading PDF Library..."}),children:Object(L.jsx)(Ln,Object(m.a)({},e))});var Bn=e=>{var t;const{setOverlayDetail:a,details:n,overlayDetail:i}=e;return Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("div",{children:Object(L.jsx)(g.a,{container:!0,children:Object(L.jsxs)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:[Object(L.jsx)(ce.m,{title:"PRINT for "+(null===n||void 0===n||null===(t=n.fullName)||void 0===t?void 0:t.toUpperCase()),onClose:()=>a(!1)}),Object(L.jsx)(Rn,{id:i.id,branch:"all"})]})})})})},Fn=a(100),Pn=a(728),Hn=a(694);var Wn=a(255),Un=a.n(Wn),_n=a(729),Gn=a(730);var qn=e=>{let{overlayDetail:t,setOverlayDetail:a}=e;const[n,c]=i.a.useState(0),{enqueueSnackbar:s}=Object(me.b)(),[r,o]=i.a.useState({cargo:{},packages:[]}),[l,d]=i.a.useState(!1);i.a.useEffect(()=>{void 0!==t.id&&(d(!0),it.a.get(t).then(e=>{const t=na()(e.packages,e=>Object(m.a)({},e));o(Object(m.a)(Object(m.a)({},e),{},{packages:t}))}).catch(e=>{s("Could not fetch",{variant:"error"})}).finally(e=>d(!1)))},[s,t]);return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(ce.B,{value:n,indicatorColor:"primary",textColor:"primary",onChange:(e,t)=>{c(t)},centered:!0,children:[Object(L.jsx)(ce.z,{value:0,wrapped:!0,label:Object(L.jsxs)("span",{children:[Object(L.jsx)(Un.a,{}),"\xa0Member Details"]})}),Object(L.jsx)(ce.z,{value:1,wrapped:!0,label:Object(L.jsxs)("span",{children:[Object(L.jsx)(_n.a,{}),"\xa0Subscription"]})}),Object(L.jsx)(ce.z,{value:9,wrapped:!0,label:Object(L.jsxs)("span",{children:[Object(L.jsx)(Gn.a,{}),"\xa0Print"]})})]}),0===n&&Object(L.jsx)(Mn,{details:r,loading:l,setOverlayDetail:a}),1===n&&Object(L.jsx)(zn,{details:r,loading:l,setOverlayDetail:a}),9===n&&Object(L.jsx)(Bn,{details:r,loading:l,setOverlayDetail:a,overlayDetail:t}),Object(L.jsx)("div",{style:{padding:20}})]})},Vn=[{label:"ID",name:"id",options:{display:!1}},{label:"Type",name:"type",options:{customBodyRender:function(e,t){return Object(L.jsx)(A.a,{label:e})}}},{label:"Length (cm)",name:"length",options:{}},{label:"Width",name:"breadth",options:{}},{label:"Height",name:"height",options:{}},{label:"Quantity",name:"quantity",options:{}},{label:"Weight",name:"weight",options:{}},{label:"Volume (m.cu.)",name:"volume",options:{}},{label:"Remarks",name:"remarks",options:{}}];var Jn=e=>{const{packages:t}=e,[a,n]=i.a.useState({});return i.a.useEffect(()=>{n({quantity:Object(Ya.c)(t),weight:Object(Ya.i)(t),volume:Object(Ya.h)(t)})},[t]),Object(L.jsx)("div",{children:Object(L.jsxs)(g.a,{container:!0,children:[Object(L.jsxs)(g.a,{container:!0,xs:12,sm:12,md:12,lg:12,xl:12,justify:"flex-end",alignContent:"center",alignItems:"center",children:[Object(L.jsx)(ce.q,{label:"Packages",value:Sn()(a,"quantity","-")}),Object(L.jsx)(ce.q,{label:"Weight",value:Object(Ya.b)(Sn()(a,"weight",0))}),Object(L.jsx)(ce.q,{label:"Volume",value:Object(Ya.e)(Sn()(a,"volume",0))})]}),Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsx)(Pa,{data:t,columns:Vn,minified:!0})})]})})};var Kn=e=>{var t,a,n,i,c,s,r,o,l,d,b,j,m,u,p,h;const{setOverlayDetail:O,details:x,loading:f}=e;return Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("div",{children:Object(L.jsx)(g.a,{container:!0,children:Object(L.jsxs)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:[Object(L.jsx)(ce.m,{title:"MEMBER DETAILS",onClose:()=>O(!1)}),Object(L.jsx)(ce.r,{loading:f}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:0},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"BASIC SHIPPER DETAILS"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:1,alignContent:"flex-start",alignItems:"flex-start",justify:"flex-start",children:[Object(L.jsx)(ce.p,{size:3,label:"JOB REF",value:"REF"+((null===(t=x.cargo)||void 0===t?void 0:t.id)||"XXXX")}),Object(L.jsx)(g.a,{md:9}),Object(L.jsx)(ce.p,{size:3,label:"Name",value:null===(a=x.cargo)||void 0===a?void 0:a.name}),Object(L.jsx)(ce.p,{size:6,label:"Address",value:null===(n=x.cargo)||void 0===n?void 0:n.address}),Object(L.jsx)(g.a,{md:3}),Object(L.jsx)(ce.p,{size:3,label:"Contact",value:null===(i=x.cargo)||void 0===i?void 0:i.contact}),Object(L.jsx)(ce.p,{size:3,label:"Location",value:(null===(c=x.cargo)||void 0===c?void 0:c.location)||"-"})]})})]})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:5},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"CONSIGNEE DETAILS"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:1,alignContent:"flex-start",alignItems:"flex-start",justify:"flex-start",children:[Object(L.jsx)(ce.p,{size:3,label:"Name",value:null===(s=x.cargo)||void 0===s?void 0:s.slName}),Object(L.jsx)(ce.p,{size:6,label:"Address",value:null===(r=x.cargo)||void 0===r?void 0:r.slAddress}),Object(L.jsx)(g.a,{item:!0,md:3}),Object(L.jsx)(ce.p,{size:3,label:"Contact",value:null===(o=x.cargo)||void 0===o?void 0:o.slContact}),Object(L.jsx)(ce.p,{size:3,label:"Location",value:null===(l=x.cargo)||void 0===l?void 0:l.slLocation}),Object(L.jsx)(ce.p,{size:3,label:"NIC/PP No",value:null===(d=x.cargo)||void 0===d?void 0:d.slPpNo}),Object(L.jsx)(ce.p,{size:6,label:"Note",value:null===(b=x.cargo)||void 0===b?void 0:b.note})]})})]})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:5},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"PACKAGE DETAILS"}),Object(L.jsx)(st.a,{children:Object(L.jsx)(g.a,{container:!0,spacing:1,alignContent:"flex-start",alignItems:"flex-start",justify:"flex-start",children:Object(L.jsx)(g.a,{item:!0,md:12,children:Object(L.jsx)(Jn,{packages:In()(x,"packages",[])})})})})]})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:5},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!1,children:[Object(L.jsx)(ce.l,{title:"PAYMENT DETAILS"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:1,alignContent:"flex-start",alignItems:"flex-start",justify:"flex-start",children:[na()(null===(j=x.cargo)||void 0===j?void 0:j.amountSpec,e=>Object(L.jsx)(ce.p,{size:3,label:e.costType,value:e.amount})),Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsx)("hr",{style:{width:"100%"}})}),x.cargo&&Object(L.jsx)(ce.p,{size:3,label:"GRAND TOTAL",value:(null===(m=x.cargo)||void 0===m?void 0:m.amount)+" "+(null===(u=x.cargo)||void 0===u?void 0:u.currency)}),x.cargo&&Object(L.jsx)(ce.p,{size:3,label:"PAID AMOUNT",value:(null===(p=x.cargo)||void 0===p?void 0:p.paid)+" "+(null===(h=x.cargo)||void 0===h?void 0:h.currency)})]})})]})})}),Object(L.jsx)(ce.r,{loading:f})]})})})})};var Zn=async e=>Object(At.c)("/v1/complaint/get-all-by-cargo-id?cargoId=".concat(e,"&branch=").concat(Object(je.d)().branch));var Xn=async(e,t)=>Object(At.c)("/v1/audit/get-all?branch="+(t||Object(je.d)().branch)+"&ref=".concat(e,"&entity=CARGO"));const Qn=(e,t,a,n,i)=>i?"DELETED":-12!==e||t?-12===e&&t?"DRIVER ASSIGNED":12===e&&t?"DRIVER PICKED UP":42===e&&t?"DRIVER DELIVERED":-1!==e||t?-1===e&&t?"DRIVER ASSIGNED":-11===e?"JOB SUSPENDED":0===e?t?"DRIVER PICKED":"OFFICER PICKED":1!==e||a?1===e&&a?"ADDED TO SHIPMENT":2===e&&a?"IN CUSTOMS":3!==e||n?3===e&&n?"DELIVERY ASSIGNED":33===e?"DELIVERY SUSPENDED":4===e||4===e?n?"PACKAGE DELVIERED":"PACKAGE CLEARED":"N/A":"SHIPMENT REACHED":"BRANCH WAREHOUSE":"CARGO INFO RECIEVED":"DOMESTIC JOB RECIEVED";var $n=a(731),ei=[{label:"ID",name:"id",options:{display:!1}},{label:"Detail",name:"added",options:{customBodyRender:function(e,t){return Object(L.jsx)(A.a,{label:e})}}},{label:"Date",name:"createdDate",options:{}},{label:"Time",name:"createdTime",options:{}},{label:"Auth",name:"auth",options:{}},{label:"Branch",name:"branch",options:{}}];var ti=e=>{const{setOverlayDetail:t,details:a}=e,{enqueueSnackbar:n}=Object(me.b)(),[c,s]=i.a.useState([]),[r,o]=i.a.useState({}),[l,d]=i.a.useState([]),[b,j]=i.a.useState([]),[m,u]=i.a.useState(""),[p,h]=i.a.useState(!1);return i.a.useEffect(()=>{var e,t,i,c,s;null!==(e=a.cargo)&&void 0!==e&&e.driverId&&(h(!0),fa(null===(c=a.cargo)||void 0===c?void 0:c.driverId,null===(s=a.cargo)||void 0===s?void 0:s.branch).then(e=>{o(e)}).catch(e=>{n("Could not fetch driver",{variant:"error"})}).finally(e=>h(!1)));Zn(null===(t=a.cargo)||void 0===t?void 0:t.id).then(e=>{d(e)}).catch(e=>{n("Could not fetch complaints",{variant:"error"})}),Xn(null===(i=a.cargo)||void 0===i?void 0:i.id).then(e=>{j(e)}).catch(e=>{})},[n,a.cargo]),i.a.useEffect(()=>{const e=a.cargo||{},t=[{label:"Job Added",data:"User: "+e.auth+" | on "+e.createdDate+" "+e.createdTime},{label:"Tentative Pickup",data:"User: "+e.auth+" | on "+e.pickupDate+" "+e.pickupTime},{label:"Picked on",data:e.fetched>=0&&e.pickedUpDate+" "+e.pickedUpTime+" by Driver: "+(r.username||"N/A")},{label:"Delivered on",data:42===e.fetched&&e.deliveredDate+" "+e.deliveredTime}];s(t);const n=Qn(e.fetched,e.driverId,e.loadingId,e.dispatchedId,e.deleted);u(n)},[n,a.cargo,r]),Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("div",{children:Object(L.jsx)(g.a,{container:!0,children:Object(L.jsxs)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:[Object(L.jsx)(ce.m,{title:"HBL STATUS AND AUDIT LOGS",onClose:()=>t(!1)}),Object(L.jsx)(ce.r,{loading:p}),Object(L.jsxs)(g.a,{container:!0,spacing:0,style:{paddingTop:5},children:[Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,style:{padding:10},children:Object(L.jsx)(A.a,{label:"HBL STATUS: "+m,style:{color:"white",backgroundColor:z.a.shades.green}})}),Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"CARGO STATUS"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:1,alignContent:"flex-start",alignItems:"flex-start",justify:"flex-start",children:[Object(L.jsx)(g.a,{item:!0,md:6,children:Object(L.jsx)(ce.y,{items:c.slice(0,2)})}),Object(L.jsx)(g.a,{item:!0,md:6,children:Object(L.jsx)(ce.y,{items:c.slice(2)})})]})})]})})]}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:5},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"COMPLAINT DETAILS"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,children:[Object(L.jsx)(g.a,{container:!0,xs:12,sm:12,md:12,lg:12,xl:12,style:{paddingTop:5,paddingBottom:5},children:l.length>0?Object(L.jsx)(f.a,{endIcon:Object(L.jsx)($n.a,{}),color:"primary",variant:"outlined",size:"small",onClick:()=>{var e;window.open("complaints/"+(null===(e=a.cargo)||void 0===e?void 0:e.hbl),"_blank")},style:{marginTop:0},children:"VIEW COMPAINTS"}):Object(L.jsx)(ce.p,{size:2,label:"No Complaints for this HBL",value:""})}),l.map(e=>Object(L.jsxs)(g.a,{style:{paddingTop:15},container:!0,xs:12,sm:12,md:12,lg:12,xl:12,spacing:1,alignContent:"flex-start",alignItems:"flex-start",justify:"flex-start",children:[Object(L.jsx)(ce.p,{size:2,label:"Created Date",value:(e.createdDate||"").replace("T"," ")}),Object(L.jsx)(ce.p,{size:2,label:"Subject",value:e.subject}),Object(L.jsx)(ce.p,{size:4,label:"Detail",value:e.detail}),Object(L.jsx)(ce.p,{size:2,label:"Status",value:e.status})]}))]})})]})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:5},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"AUDIT DETAILS"}),Object(L.jsx)(st.a,{children:Object(L.jsx)(g.a,{container:!0,sm:12,children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,style:{paddingTop:5,paddingBottom:5},children:Object(L.jsx)(Pa,{data:b,columns:ei,minified:!0})})})})]})})}),Object(L.jsx)(ce.r,{loading:p})]})})})})},ai=[{name:"id",options:{viewColumns:!1,filter:!1,sort:!1,display:!1}},{name:"deleted",options:{viewColumns:!1,filter:!1,sort:!1,display:!1}},{name:"filename",options:{viewColumns:!1,filter:!1,sort:!1,display:!1}},{label:"HBL",name:"entityRef",options:{viewColumns:!1,filter:!1,sort:!1,customBodyRender:function(e,t){return Object(L.jsx)("b",{children:e})}}},{label:"Document Name",name:"filename",options:{viewColumns:!1,filter:!1,sort:!1,customBodyRender:function(e,t){return Object(L.jsx)(A.a,{label:e})}}},{name:"upload",label:"Uploaded details",options:{viewColumns:!0,filter:!1,sort:!0}},{name:"notes",label:"Notes",options:{viewColumns:!0,filter:!1,sort:!0}}];var ni=e=>{var t;const{details:a,setOverlayDetail:n}=e,{enqueueSnackbar:c}=Object(me.b)(),s=Object(xn.useDialog)(),[r,o]=i.a.useState(!1),[l,d]=i.a.useState(0),[b,j]=i.a.useState(!1),[u,p]=i.a.useState([]),[h,O]=i.a.useState({});i.a.useEffect(()=>{var e,t;null!==(e=a.cargo)&&void 0!==e&&e.id&&(o(!0),Fn.a.getAll({id:null===(t=a.cargo)||void 0===t?void 0:t.id,entity:"cargo"}).then(e=>{p(Object(Gt.map)(Object(Gt.orderBy)(e,"deleted"),e=>Object(m.a)(Object(m.a)({},e),{},{upload:e.auth+" "+e.createdDate+" "+e.branch})))}).catch(e=>{c("Could not fetch",{variant:"error"})}).finally(e=>o(!1)))},[c,a,l]);const x=[...ai,{name:"actions",label:"  ",options:{empty:!0,viewColumns:!1,filter:!1,sort:!1,customBodyRender:(e,t)=>t.rowData[1]?Object(L.jsx)(L.Fragment,{children:"Deleted"}):Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(ce.A,{title:"Download",icon:Object(L.jsx)(Pn.a,{}),onClick:()=>{v(t.rowData[0],t.rowData[2])}}),Object(L.jsx)(ce.A,{title:"View",icon:Object(L.jsx)(Hn.a,{}),onClick:()=>{window.open("view-docs/"+t.rowData[0]+"/"+t.rowData[2],"_blank")}}),"pickup"===Object(je.d)().type&&Object(L.jsx)(ce.A,{title:"Delete",icon:Object(L.jsx)(On.a,{}),onClick:()=>{y(t.rowData[0],t.rowData[2])}})]})}}],v=(e,t)=>{o(!0),Fn.a.download(e).then(e=>{const a=URL.createObjectURL(e),n=document.createElement("a");n.href=a,n.download=t||"docs-download",document.body.appendChild(n),n.click()}).catch(e=>{c("Could not Download",{variant:"error"})}).finally(e=>o(!1))},y=(e,t)=>{s.confirm(Object(ce.d)("Delete file: "+t,"DELETE")).then(()=>{o(!0),Fn.a.deleteFile(e).then(e=>{c("Deleted",{variant:"success"}),d(l+1)}).catch(e=>{c("Could not Delete",{variant:"error"})}).finally(e=>o(!1))})};return Object(L.jsx)("div",{children:Object(L.jsx)(g.a,{container:!0,children:Object(L.jsxs)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:[Object(L.jsx)(ce.m,{title:"Documents Under HBL - "+(null===(t=a.cargo)||void 0===t?void 0:t.hbl),onClose:()=>n(!1)}),Object(L.jsx)(ce.r,{loading:r}),Object(L.jsxs)(g.a,{container:!0,children:[Object(L.jsx)(g.a,{item:!0,xs:3,sm:3,md:3,lg:3,xl:3,style:{paddingLeft:10,paddingTop:10,paddingRight:10,borderRight:"1px solid #eeeeee"},children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"UPLOAD NEW DOCUMENTS"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,children:[Object(L.jsx)(g.a,{container:!0,spacing:2,xs:12,md:12,justify:"flex-end",alignContent:"center",alignItems:"center",style:{paddingLeft:5,paddingTop:10},children:Object(L.jsx)(en.a,{onChange:e=>{var t;(t=e).length>0&&j(t[0])},filesLimit:1,getPreviewIcon:()=>Object(L.jsx)(tn.a,{}),maxFileSize:5e6})}),Object(L.jsxs)(g.a,{container:!0,spacing:1,xs:12,md:12,justify:"flex-start",alignContent:"center",alignItems:"center",style:{marginTop:20,border:"4px dashed #eeeeee",borderRadius:5},children:[Object(L.jsx)(ce.C,{size:12,label:"Notes",name:"notes",value:h.notes,onChange:e=>{O(Object(m.a)(Object(m.a)({},h),{},{[e.target.name]:e.target.value}))}}),Object(L.jsx)(g.a,{md:12,container:!0,justify:"space-between",style:{paddingLeft:5,paddingRight:10,paddingTop:5,paddingBottom:5},children:Object(L.jsx)(f.a,{disabled:!b,color:"primary",variant:"contained",size:"medium",onClick:()=>{var e,t,n;null!==(e=a.cargo)&&void 0!==e&&e.hbl?(o(!0),Fn.a.upload(b,null===(t=a.cargo)||void 0===t?void 0:t.id,"cargo",null===(n=a.cargo)||void 0===n?void 0:n.hbl,h.notes||"").then(e=>{c("Upload success",{variant:"success"}),d(l+1),j(!1)}).catch(e=>{c("Could not Upload",{variant:"error"})}).finally(e=>o(!1))):c("This JOB is not Converted as HBL yet",{variant:"warning"})},style:{marginTop:2},children:"Upload"})})]})]})})]})}),Object(L.jsx)(g.a,{item:!0,xs:9,sm:9,md:9,lg:9,xl:9,style:{paddingRight:10,paddingTop:10},children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"LIST OF UPLOADED DOCUMENTS"}),Object(L.jsx)(st.a,{children:Object(L.jsx)(g.a,{container:!0,children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsx)(Pa,{data:u,columns:x,minified:!0})})})})]})})]})]})})})};const ii=(e,t)=>{try{return JSON.parse(e)}catch(a){return t}};var ci=e=>{let{overlayDetail:t,setOverlayDetail:a}=e;const[n,c]=i.a.useState(0),{enqueueSnackbar:s}=Object(me.b)(),[r,o]=i.a.useState({cargo:{},packages:[]}),[l,d]=i.a.useState(!1);i.a.useEffect(()=>{void 0!==t.id&&(d(!0),an.a.getCargo(t.id).then(e=>{const t=na()(e.packages,e=>Object(m.a)(Object(m.a)({},e),{},{volume:Object(Ya.f)(e)||0})),a=In()(e,"cargo",{});o({cargo:Object(m.a)(Object(m.a)({},a),{},{amountSpec:ii(a.amountSpec,[])}),packages:t})}).catch(e=>{s("Could not fetch",{variant:"error"})}).finally(e=>d(!1)))},[s,t.id]);return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(ce.B,{value:n,indicatorColor:"primary",textColor:"primary",onChange:(e,t)=>(e=>{if(9===e)return r.cargo.id?r.cargo.hbl?(window.open("print/"+r.cargo.id+"/"+Object(je.d)().branch+"/1","_blank"),void a(!1)):void s("Only HBLs can be printed. This is a Job",{variant:"warning"}):void s("Loading! please wait.",{variant:"warning"});c(e)})(t),centered:!0,children:[Object(L.jsx)(ce.z,{value:0,wrapped:!0,label:Object(L.jsxs)("span",{children:[Object(L.jsx)(Un.a,{}),"\xa0HBL Details"]})}),Object(L.jsx)(ce.z,{value:1,wrapped:!0,label:Object(L.jsxs)("span",{children:[Object(L.jsx)(_n.a,{}),"\xa0","Status & Audit"]})}),Object(L.jsx)(ce.z,{value:2,wrapped:!0,label:Object(L.jsxs)("span",{children:[Object(L.jsx)(tn.a,{}),"\xa0","Documents"]})})]}),0===n&&Object(L.jsx)(Kn,{details:r,loading:l,setOverlayDetail:a}),1===n&&Object(L.jsx)(ti,{details:r,loading:l,setOverlayDetail:a}),2===n&&Object(L.jsx)(ni,{details:r,loading:l,setOverlayDetail:a}),Object(L.jsx)("div",{style:{padding:20}})]})};var si=e=>{let{overlayDetail:t,setOverlayDetail:a}=e;return""===Object(je.d)().branch?Object(L.jsx)(qn,{overlayDetail:t,setOverlayDetail:a}):Object(je.d)().type===te.a.domestic?Object(L.jsx)(ci,{overlayDetail:t,setOverlayDetail:a}):Object(L.jsx)(qn,{overlayDetail:t,setOverlayDetail:a})};var ri=()=>{const[e,t]=i.a.useState(!1),[a,n]=i.a.useState(!1),[c,s]=i.a.useState(!1),[r,o]=i.a.useState([]),[l,d]=i.a.useState({});return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(Ye.a,{elevation:0,children:[Object(L.jsx)(Dt.a,{title:Object(L.jsxs)(g.a,{container:!0,spacing:1,justify:"space-between",alignContent:"space-between",alignItems:"space-between",children:[Object(L.jsx)(ce.j,{Icon:J.a,size:4,title:"Create new Member",subtitle:"Zahira OBA"}),Object(L.jsx)(g.a,{container:!0,spacing:2,xs:8,justify:"flex-end",alignContent:"center",alignItems:"center",style:{paddingRight:10,paddingTop:10}})]})}),Object(L.jsx)(Ae.a,{children:Object(L.jsxs)(Ye.a,{style:{paddingTop:0},children:[Object(L.jsx)(yn,{setOverlayDetail:n,setCargoRedundantData:d,setOverlayType:s,packages:r,setPackages:o,loading:e,setLoading:t}),Object(L.jsx)("div",{style:{padding:20}})]})})]}),Object(L.jsx)(ce.g,{open:a,width:"VIEW"===c?"lg":"sm",content:Object(L.jsxs)(L.Fragment,{children:["VIEW"===c&&Object(L.jsx)(si,{overlayDetail:a,setOverlayDetail:n}),"ADD_EDU"===c&&Object(L.jsx)(Cn,{cargoRedundantData:l,setPackages:o,packages:r,overlayDetail:a,setOverlayDetail:n})]})})]})},oi=[{label:"ID",name:"id",options:{display:!1}},{label:"Type",name:"type",options:{customBodyRender:function(e,t){return Object(L.jsx)(A.a,{label:e})}}},{label:"Length (cm)",name:"length",options:{}},{label:"Width",name:"breadth",options:{}},{label:"Height",name:"height",options:{}},{label:"Quantity",name:"quantity",options:{}},{label:"Weight",name:"weight",options:{}},{label:"Volume (m.cu.)",name:"volume",options:{}},{label:"Remarks",name:"remarks",options:{}}];var li=async(e,t)=>Object(At.e)("/v1/package/create?branch=".concat(Object(je.d)().branch),Object(m.a)(Object(m.a)({cargoId:e},t),{},{branch:Object(je.d)().branch,auth:Object(je.d)().username})),di=async(e,t)=>Object(At.a)("/v1/package/delete/".concat(e,"?branch=").concat(Object(je.d)().branch),t),bi=async(e,t)=>Object(At.f)("/v1/package/update/".concat(e,"?branch=").concat(Object(je.d)().branch),t);var ji=e=>{const{setOverlayDetail:t,packages:a,setChanged:n,changed:c}=e,s=Object(xn.useDialog)(),{enqueueSnackbar:r}=Object(me.b)(),[o,l]=i.a.useState(!1),d=[...oi,{name:"actions",label:"  ",options:{empty:!0,viewColumns:!1,filter:!1,sort:!1,customBodyRender:(e,a)=>Object(L.jsxs)(i.a.Fragment,{children:[Object(L.jsx)(S.a,{title:"Delete",children:Object(L.jsx)("span",{children:Object(L.jsx)(de.a,{onClick:()=>{return e=a.rowData[0],t=a.rowData[1],void s.confirm(Object(ce.d)("Delete "+t,"DELETE")).then(()=>{l(!0),di(e).then(e=>{r("Deleted",{variant:"success"}),n(c+1)}).catch(e=>{r("Could not Delete",{variant:"error"})}).finally(e=>l(!1))});var e,t},children:Object(L.jsx)(On.a,{})})})}),Object(L.jsx)(S.a,{title:"Edit",children:Object(L.jsx)("span",{children:Object(L.jsx)(de.a,{onClick:()=>{t({id:a.rowData[0]})},children:Object(L.jsx)($e.a,{})})})})]})}}];return Object(L.jsx)("div",{children:Object(L.jsx)(g.a,{container:!0,children:Object(L.jsxs)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:[Object(L.jsx)(ce.r,{loading:o}),Object(L.jsx)(Pa,{data:a,columns:d,minified:!0})]})})})};var mi=e=>{const{loading:t,setLoading:a,setOverlayDetail:n,packages:c,setPackages:s,id:r,changed:o,setChanged:l}=e,{enqueueSnackbar:d}=Object(me.b)(),b=(Object(je.b)(Object(je.d)().branch)||{}).qidLabel||"Residential ID",[j,u]=i.a.useState({});i.a.useEffect(()=>{a(!0),an.a.getCargo(r).then(e=>{Object(je.d)().branch!==e.cargo.branch&&d("You are not Authorized",{variant:"warning"}),u(Object(m.a)(Object(m.a)({},e.cargo),{},{pickupDateTime:lt()(e.cargo.pickupDate+"T"+e.cargo.pickupTime+":00")})),s(e.packages||[])}).catch(e=>{d("Could not fetch",{variant:"error"})}).finally(e=>a(!1))},[d,r,a,s]),i.a.useEffect(()=>{a(!0),an.a.getCargo(r).then(e=>{s(e.packages||[])}).catch(e=>{d("Could not fetch",{variant:"error"})}).finally(e=>a(!1))},[d,r,a,s,o]);const p=e=>{u(Object(m.a)(Object(m.a)({},j),{},{[e.target.name]:e.target.value}))};return Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("div",{children:Object(L.jsx)(g.a,{container:!0,children:Object(L.jsxs)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:[Object(L.jsx)(ce.r,{loading:t}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:0},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"BASIC DETAILS"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:1,alignContent:"flex-start",alignItems:"flex-start",justify:"flex-start",children:[Object(L.jsx)(ce.t,{size:4,name:"cargoMode",onChange:p,value:j.cargoMode,values:Object(je.d)().cargoMode}),Object(L.jsx)(ce.t,{size:8,name:"warehouseLocation",onChange:p,value:j.warehouseLocation,values:Object(je.d)().warehouseLocation}),Object(L.jsx)(ce.C,{size:3,label:"Name",name:"name",value:j.name,onChange:p}),Object(L.jsx)(ce.C,{size:6,label:"Description",name:"description",value:j.description,onChange:p}),Object(L.jsx)(g.a,{item:!0,md:3}),Object(L.jsx)(ce.C,{size:3,label:"Contact",name:"contact",value:j.contact,onChange:p}),Object(L.jsx)(ce.C,{size:6,label:"Address",name:"address",value:j.address,onChange:p}),Object(L.jsx)(ce.C,{size:3,label:"Location",name:"location",value:j.location,onChange:p}),Object(L.jsx)(ce.C,{size:3,label:"ID/PP No",name:"ppNo",value:j.ppNo,onChange:p}),Object(L.jsx)(ce.C,{size:3,label:b,name:"qid",value:j.qid,onChange:p}),Object(L.jsx)(g.a,{item:!0,md:1}),Object(L.jsx)(ce.t,{size:5,name:"deliveryType",onChange:p,value:j.deliveryType,values:Object(je.d)().deliveryType})]})})]})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:5},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"CONSIGNEE DETAILS"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:1,alignContent:"flex-start",alignItems:"flex-start",justify:"flex-start",children:[Object(L.jsx)(ce.C,{size:3,label:"Name",name:"slName",value:j.slName,onChange:p}),Object(L.jsx)(ce.C,{size:6,label:"Address",name:"slAddress",value:j.slAddress,onChange:p}),Object(L.jsx)(g.a,{item:!0,md:3}),Object(L.jsx)(ce.C,{size:3,label:"Contact",name:"slContact",value:j.slContact,onChange:p}),Object(L.jsx)(ce.C,{size:3,label:"NIC/PP No",name:"slPpNo",value:j.slPpNo,onChange:p}),Object(L.jsx)(ce.C,{size:6,label:"Note",name:"note",value:j.note,onChange:p})]})})]})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:5},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"PACKAGE DETAILS"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:1,alignContent:"flex-start",alignItems:"flex-start",justify:"flex-start",children:[Object(L.jsx)(g.a,{item:!0,md:12,style:{paddingTop:15,paddingBottom:5},children:Object(L.jsx)(f.a,{variant:"contained",color:"primary",endIcon:Object(L.jsx)(gn.a,{}),disabled:t,onClick:()=>n({cargoId:r}),children:"Add Package"})}),Object(L.jsx)(g.a,{item:!0,md:12,children:Object(L.jsx)(ji,{changed:o,setChanged:l,setPackages:s,packages:c,setOverlayDetail:n})})]})})]})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:5},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"PAYMENT DETAILS"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:1,alignContent:"flex-start",alignItems:"flex-start",justify:"flex-start",children:[Object(L.jsx)(g.a,{item:!0,md:12}),Object(L.jsx)(g.a,{item:!0,md:12})]})})]})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:20},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsx)(g.a,{container:!0,spacing:1,alignContent:"flex-end",alignItems:"flex-end",justify:"flex-end",children:Object(L.jsx)(f.a,{variant:"contained",color:"primary",size:"medium",endIcon:Object(L.jsx)(sn.a,{}),style:{marginRight:5},disabled:t,onClick:()=>(a(!0),void an.a.editHbl(r,j).then(e=>{d("Editted",{variant:"success"})}).catch(e=>{console.log(e),d("Could not Edit",{variant:"error"})}).finally(e=>a(!1))),children:"Update HBL"})})})}),Object(L.jsx)(ce.r,{loading:t})]})})})})};var ui=e=>{const{setOverlayDetail:t,overlayDetail:a,setChanged:n,changed:c}=e,{enqueueSnackbar:s}=Object(me.b)(),[r,o]=i.a.useState({}),[l,d]=i.a.useState(!1),b=e=>{"quantity"!==e.target.name&&"length"!==e.target.name&&"height"!==e.target.name&&"breadth"!==e.target.name||o(Object(m.a)(Object(m.a)({},r),{},{volume:Object(Ya.f)(r)}))},j=e=>{o(Object(m.a)(Object(m.a)({},r),{},{[e.target.name]:e.target.value}))},u=e=>{const t=(e.target.value+"").replace(/[^0-9.]/gi,"");o(Object(m.a)(Object(m.a)({},r),{},{[e.target.name]:t}))};return Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("div",{children:Object(L.jsx)(g.a,{container:!0,children:Object(L.jsxs)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:[Object(L.jsx)(ce.m,{title:"ADD PACKAGE TO EXISTING HBL",onClose:()=>t(!1)}),Object(L.jsx)(ce.r,{loading:l}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:0},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"PACKAGE DETAILS"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:1,alignContent:"flex-start",alignItems:"flex-start",justify:"flex-start",children:[Object(L.jsx)(ce.v,{size:4,label:"Type",name:"type",values:Object(je.d)().packageType,value:r.type,onChange:j}),Object(L.jsx)(g.a,{item:!0,md:8}),Object(L.jsx)(ce.C,{size:3,label:"Length (cm)",name:"length",value:r.length,onChange:u,onBlur:b}),Object(L.jsx)(ce.C,{size:3,label:"Width",name:"breadth",value:r.breadth,onChange:u,onBlur:b}),Object(L.jsx)(ce.C,{size:3,label:"Height",name:"height",value:r.height,onChange:u,onBlur:b}),Object(L.jsx)(ce.C,{size:3,label:"Quantity",name:"quantity",value:r.quantity,onChange:u,onBlur:b}),Object(L.jsx)(ce.C,{size:3,label:"Total Weight",name:"weight",value:r.weight,onChange:u}),Object(L.jsx)(ce.C,{size:3,label:"Volume (m.cu.)",name:"volume",value:r.volume,onChange:u}),Object(L.jsx)(ce.C,{size:12,label:"Remarks",name:"remarks",value:r.remarks,onChange:j})]})})]})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:20,paddingBottom:20},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsx)(g.a,{container:!0,spacing:1,alignContent:"flex-end",alignItems:"flex-end",justify:"flex-end",children:Object(L.jsx)(f.a,{variant:"contained",color:"primary",endIcon:Object(L.jsx)(gn.a,{}),onClick:()=>{r.type?(d(!0),li(a.cargoId,r).then(e=>{s("Created",{variant:"success"}),n(c+1),t(!1)}).catch(e=>{s("Could not Create",{variant:"error"})}).finally(e=>d(!1))):s("Please select Type",{variant:"warning"})},children:"Add Package to HBL"})})})})]})})})})};var pi=e=>{const{overlayDetail:t,setOverlayDetail:a,packages:n,setChanged:c,changed:s}=e,{enqueueSnackbar:r}=Object(me.b)(),[o,l]=i.a.useState(n.filter(e=>e.id===t.id)[0]),[d,b]=i.a.useState(!1),j=e=>{"quantity"!==e.target.name&&"length"!==e.target.name&&"height"!==e.target.name&&"breadth"!==e.target.name||l(Object(m.a)(Object(m.a)({},o),{},{volume:Object(Ya.f)(o)}))},u=e=>{l(Object(m.a)(Object(m.a)({},o),{},{[e.target.name]:e.target.value}))},p=e=>{const t=(e.target.value+"").replace(/[^0-9.]/gi,"");l(Object(m.a)(Object(m.a)({},o),{},{[e.target.name]:t}))};return Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("div",{children:Object(L.jsx)(g.a,{container:!0,children:Object(L.jsxs)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:[Object(L.jsx)(ce.m,{title:"EDIT PACKAGE FROM HBL",onClose:()=>a(!1)}),Object(L.jsx)(ce.r,{loading:d}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:0},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"PACKAGE DETAILS"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:1,alignContent:"flex-start",alignItems:"flex-start",justify:"flex-start",children:[Object(L.jsx)(ce.v,{size:4,label:"Type",name:"type",values:Object(je.d)().packageType,value:o.type,onChange:u}),Object(L.jsx)(ce.C,{size:6,label:"Type",name:"type",value:o.type,onChange:u}),Object(L.jsx)(g.a,{item:!0,md:2}),Object(L.jsx)(ce.C,{size:3,label:"Length (cm)",name:"length",value:o.length,onChange:p,onBlur:j}),Object(L.jsx)(ce.C,{size:3,label:"Width",name:"breadth",value:o.breadth,onChange:p,onBlur:j}),Object(L.jsx)(ce.C,{size:3,label:"Height",name:"height",value:o.height,onChange:p,onBlur:j}),Object(L.jsx)(ce.C,{size:3,label:"Quantity",name:"quantity",value:o.quantity,onChange:p,onBlur:j}),Object(L.jsx)(ce.C,{size:3,label:"Total Weight",name:"weight",value:o.weight,onChange:p}),Object(L.jsx)(ce.C,{size:3,label:"Volume",name:"volume",value:o.volume,onChange:p}),Object(L.jsx)(ce.C,{size:12,label:"Remarks",name:"remarks",value:o.remarks,onChange:u})]})})]})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:20,paddingBottom:20},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsx)(g.a,{container:!0,spacing:1,alignContent:"flex-end",alignItems:"flex-end",justify:"flex-end",children:Object(L.jsx)(f.a,{variant:"contained",color:"primary",endIcon:Object(L.jsx)(gn.a,{}),onClick:()=>{o.type?(b(!0),bi(t.id,o).then(e=>{r("Created",{variant:"success"}),c(s+1),a(!1)}).catch(e=>{r("Could not Create",{variant:"error"})}).finally(e=>b(!1))):r("Please select Type",{variant:"warning"})},children:"Save Package Changes"})})})})]})})})})};var gi=e=>{const[t,a]=i.a.useState(!1),[n,c]=i.a.useState(!1),[s,r]=i.a.useState([]),[o,l]=i.a.useState(0),d=e.match.params.id;return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(Ye.a,{elevation:0,children:[Object(L.jsx)(Dt.a,{title:Object(L.jsxs)(g.a,{container:!0,spacing:1,justify:"space-between",alignContent:"space-between",alignItems:"space-between",children:[Object(L.jsx)(ce.n,{size:4,childTitle:"Edit HBL",subtitle:"OBA",parentTitle:"< Search HBL",onClick:()=>e.history.push("/search-hbl")}),Object(L.jsx)(g.a,{container:!0,spacing:2,xs:8,justify:"flex-end",alignContent:"center",alignItems:"center",style:{paddingRight:10,paddingTop:10}})]})}),Object(L.jsx)(Ae.a,{children:Object(L.jsxs)(Ye.a,{style:{paddingTop:0},children:[Object(L.jsx)(mi,{id:d,changed:o,setChanged:l,setOverlayDetail:c,packages:s,setPackages:r,loading:t,setLoading:a}),Object(L.jsx)("div",{style:{padding:20}})]})})]}),Object(L.jsx)(ce.g,{open:n,width:"sm",content:n.id?Object(L.jsx)(pi,{changed:o,setChanged:l,setPackages:r,packages:s,overlayDetail:n,setOverlayDetail:c}):Object(L.jsx)(ui,{setPackages:r,packages:s,setOverlayDetail:c,overlayDetail:n,changed:o,setChanged:l})})]})},hi=a(666),Oi=[{name:"id",options:{viewColumns:!1,filter:!1,sort:!1,display:!1}},{name:"driverId",options:{viewColumns:!1,filter:!1,sort:!1,display:!1}},{name:"loadingId",options:{viewColumns:!1,filter:!1,sort:!1,display:!1}},{name:"dispatchedId",options:{viewColumns:!1,filter:!1,sort:!1,display:!1}},{name:"hbl",options:{viewColumns:!1,filter:!1,sort:!1,display:!1}},{label:"Gender",name:"gender",options:{viewColumns:!1,filter:!0,sort:!1,display:!1}},{name:"now",options:{viewColumns:!1,filter:!1,sort:!1,display:!1}},{name:"deleted",options:{viewColumns:!1,filter:!1,sort:!1,display:!1}},{label:"ID",name:"_id",options:{viewColumns:!1,filter:!1,display:!1,sort:!0,customBodyRender:function(e,t){return t.rowData[7]?Object(L.jsx)(hi.a,{color:"secondary",variant:"dot",children:Object(L.jsx)("b",{children:e})}):Object(L.jsx)("b",{children:e})}}},{label:"Short Name",name:"shortName",options:{viewColumns:!1,filter:!1,sort:!1,customBodyRender:function(e,t){return Object(L.jsx)(A.a,{label:e})}}},{label:"Full Name",name:"fullName",options:{viewColumns:!1,filter:!1,sort:!1}},{label:"Batch",name:"batch",options:{viewColumns:!1,filter:!1,sort:!1,customBodyRender:function(e,t){if(e)return Object(L.jsx)(A.a,{label:e})}}},{name:"gender",label:"Gender",options:{viewColumns:!0,filter:!1,sort:!1}},{name:"dateOfBirth",label:"Date of Birth",options:{viewColumns:!0,filter:!1,sort:!1}},{name:"contact",label:"Contact",options:{viewColumns:!0,display:!0,filter:!1,sort:!1}},{name:"createdDate",label:"Created Date",options:{viewColumns:!0,display:!1,filter:!1,sort:!0}}];const xi=(e,t)=>(e+"").length>t?e.substring(0,t)+"...":e;var fi=e=>{const{changed:t,searchFields:a,setOverlayDetail:n,setChanged:c,history:s}=e,{enqueueSnackbar:r}=Object(me.b)(),o=Object(xn.useDialog)(),[l,d]=i.a.useState(!1),[b,j]=i.a.useState([]);i.a.useEffect(()=>{0!==t&&((a.nameWithInitials||"").length<2&&!a.batch?r("Please add search criteria",{variant:"warning"}):(d(!0),it.a.get(a).then(e=>{const t=lt()().format("YYYY-MM-DD"),a=lt()().format("HH"),n=e.map(e=>Object(m.a)(Object(m.a)({},e),{},{_id:e.id,date:e.pickupDate+" "+e.pickupTime,name:xi(e.name,15),address:xi(e.address,30),now:e.createdDate===t&&e.createdTime.startsWith(a)}));j(n)}).catch(e=>{console.log(e),r("Could not fetch",{variant:"error"})}).finally(e=>d(!1))))},[r,t]);const u=[...Oi,{label:"Merchant",name:"merchant",options:{viewColumns:!1,filter:Object(je.d)().type===te.a.domestic,sort:!0,display:Object(je.d)().type===te.a.domestic}},{name:"actions",label:"  ",options:{empty:!0,viewColumns:!1,filter:!1,sort:!1,customBodyRender:(e,a)=>Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(ce.A,{title:"View",icon:Object(L.jsx)(Hn.a,{}),onClick:()=>{n({id:a.rowData[0]})}}),!a.rowData[8]&&Object(L.jsx)(L.Fragment,{children:Object(je.d)().type!==te.a.delivery&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(ce.A,{title:"Edit",icon:Object(L.jsx)($e.a,{}),onClick:()=>{s.push("/edit-hbl/"+a.rowData[0])}}),Object(L.jsx)(ce.A,{title:"Delete",icon:Object(L.jsx)(On.a,{}),onClick:()=>{(e=>{let{id:a}=e;o.confirm(Object(ce.d)("Delete 1 item(s)","DELETE")).then(()=>{d(!0),it.a.deleteCargo([a]).then(e=>{r("Deleted",{variant:"success"}),c(t+1)}).catch(e=>{r("Could not Delete",{variant:"error"})}).finally(e=>d(!1))})})({id:a.rowData[0]})}})]})})]})}},{name:"branch",label:"From",options:{viewColumns:!0,filter:!1,sort:!1,display:Object(je.d)().type===te.a.delivery}}];return Object(L.jsx)("div",{children:Object(L.jsx)(g.a,{container:!0,children:Object(L.jsxs)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:[Object(L.jsx)(ce.r,{loading:l}),Object(L.jsx)(Pa,{data:b,columns:u,filter:!0,viewColumns:!0,sort:!0,customToolbar:()=>Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("span",{style:{paddingRight:30,marginLeft:-10,color:z.a.shades.main},children:"Filters"})})})]})})})},vi=a(256),yi=a.n(vi);var Ci=e=>{const[t,a]=i.a.useState(0),[n,c]=i.a.useState({hbl:"",startDate:lt()().subtract(6,"d").format("YYYY-MM-DD"),endDate:lt()().format("YYYY-MM-DD")}),[s,r]=i.a.useState(!1),o=e=>{c(Object(m.a)(Object(m.a)({},n),{},{[e.target.name]:e.target.value}))},l=e=>{13===e.keyCode&&a(t+1)};return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(Ye.a,{elevation:0,children:[Object(L.jsx)(Dt.a,{title:Object(L.jsxs)(g.a,{container:!0,spacing:1,justify:"space-between",alignContent:"space-between",alignItems:"space-between",children:[Object(L.jsx)(ce.j,{Icon:q.a,size:2,title:"Search Members",subtitle:"Zahira College OBA"}),Object(L.jsxs)(g.a,{container:!0,spacing:2,xs:10,justify:"flex-end",alignContent:"center",alignItems:"center",style:{paddingRight:10,paddingTop:10},children:[Object(L.jsxs)(g.a,{container:!0,md:7,alignItems:"center",justify:"flex-end",spacing:1,children:[Object(L.jsx)(ce.C,{size:4,label:"Name",name:"nameWithInitials",onKeyDown:l,value:n.nameWithInitials,onChange:o}),Object(L.jsx)(ce.C,{size:2,label:"O/L Batch",name:"batch",onKeyDown:l,value:n.batch,onChange:o}),Object(L.jsx)(ce.C,{size:2,label:"Index Number",name:"indexNumber",onKeyDown:l,value:n.indexNumber,onChange:o}),Object(L.jsx)(f.a,{endIcon:Object(L.jsx)(yi.a,{}),color:"primary",variant:"outlined",size:"medium",onClick:()=>a(t+1),style:{marginTop:3,marginLeft:5,marginRight:10},children:"Search"})]}),!1]})]})}),Object(L.jsx)(Ae.a,{children:Object(L.jsx)(Ye.a,{children:Object(L.jsx)(fi,{changed:t,setChanged:a,history:e.history,searchFields:n,setOverlayDetail:r})})})]}),Object(L.jsx)(ce.g,{open:s,width:"lg",content:s.id?Object(L.jsx)(si,{overlayDetail:s,setOverlayDetail:r}):Object(L.jsx)(L.Fragment,{})})]})};const Di=z.a.shades.greenRgb.replace(")","");var wi=[{name:"id",options:{viewColumns:!1,filter:!1,sort:!1,display:!1}},{name:"driverId",options:{viewColumns:!1,filter:!1,sort:!1,display:!1,download:!1}},{name:"loadingId",options:{viewColumns:!1,filter:!1,sort:!1,display:!1,download:!1}},{name:"dispatchedId",options:{viewColumns:!1,filter:!1,sort:!1,display:!1,download:!1}},{name:"hbl",options:{viewColumns:!1,filter:!1,sort:!1,display:!1,download:!1}},{label:"Cargo Mode",name:"cargoMode",options:{viewColumns:!1,filter:!0,sort:!1,display:!1,download:!1}},{label:"Delivery Type",name:"deliveryType",options:{viewColumns:!1,filter:!0,sort:!1,display:!1,download:!1}},{name:"now",options:{viewColumns:!1,filter:!1,sort:!1,display:!1,download:!1}},{name:"deleted",options:{viewColumns:!1,filter:!1,sort:!1,display:!1,download:!1}},{label:"HBL",name:"_id",options:{viewColumns:!1,filter:!1,sort:!0,customBodyRender:function(e,t){return t.rowData[7]?Object(L.jsx)(hi.a,{color:"secondary",variant:"dot",children:Object(L.jsx)("b",{children:e})}):Object(L.jsx)("b",{children:e})}}},{label:"Packages",name:"packages",options:{viewColumns:!1,filter:!1,sort:!0}},{label:"Name",name:"name",options:{viewColumns:!1,filter:!1,sort:!1,customBodyRender:function(e,t){return Object(L.jsx)(A.a,{label:e})}}},{label:"Name Consignee",name:"slName",options:{viewColumns:!1,filter:!1,sort:!1,customBodyRender:function(e,t){if(e)return Object(L.jsx)(A.a,{label:e})}}},{label:"Status",name:"fetched",options:{viewColumns:!1,filter:!1,sort:!0,customBodyRender:function(e,t){const a=(n=e,i=t.rowData[1],c=t.rowData[2],s=t.rowData[3],t.rowData[8]?{txt:"DELETED",i:0,all:10}:-12!==n||i?-12===n&&i?{txt:"DRIVER ASSIGNED",i:1,all:10}:12===n&&i?{txt:"DRIVER PICKED UP",i:4,all:10}:42===n&&i?{txt:"DRIVER DELIVERED",i:8,all:10}:-1!==n||i?-1===n&&i?{txt:"DRIVER ASSIGNED",i:1,all:10}:-11===n?{txt:"JOB SUSPENDED",i:1,all:10}:0===n?{txt:i?"DRIVER PICKED":"OFFICER PICKED",i:2,all:10}:1!==n||c?1===n&&c?{txt:"ADDED TO SHIPMENT",i:4,all:10}:2===n&&c?{txt:"IN CUSTOMS",i:5,all:10}:3!==n||s?3===n&&s?{txt:"DELIVERY ASSIGNED",i:7,all:10}:4===n?{txt:s?"PACKAGE DELVIERED":"PACKAGE CLEARED",i:8,all:10}:{txt:"N/A",i:9,all:10}:{txt:"SHIPMENT REACHED",i:6,all:10}:{txt:"BRANCH WAREHOUSE",i:3,all:10}:{txt:"CARGO INFO RECIEVED",i:0,all:10}:{txt:"DOMESTIC JOB RECIEVED",i:0,all:10});var n,i,c,s;return Object(L.jsx)(A.a,{label:a.txt,style:{textShadow:"rgb(0 0 0) 1px 1px 2px",color:"#eeeeee",backgroundColor:"".concat(Di,", ").concat(1.6-(a.all-a.i)/a.all,")")}})}}},{name:"address",label:"Address",options:{viewColumns:!0,filter:!1,sort:!1}},{name:"slAddress",label:"Address Consignee",options:{viewColumns:!0,filter:!1,sort:!1}},{name:"contact",label:"Contact",options:{viewColumns:!0,display:!1,filter:!1,sort:!1}},{name:"slContact",label:"Contact Consignee",options:{viewColumns:!0,display:!1,filter:!1,sort:!1}},{name:"createdDate",label:"Created Date",options:{viewColumns:!0,display:!1,filter:!1,sort:!0}},{name:"cargoMode",label:"Cargo Mode",options:{viewColumns:!0,display:!1,filter:!1,sort:!1,download:!1}},{name:"deliveryType",label:"Delivery Type",options:{viewColumns:!0,display:!1,filter:!1,sort:!1,download:!1}}];const Si=(e,t)=>Ut()(e,(e,a)=>e+(+a[t]||0),0),ki=(e,t,a)=>t[a]?e.filter(e=>e[a]===t[a]):e,Ti=e=>ra()(e,(e,t,a)=>a.indexOf(e)===t);var Ii=e=>{const{changed:t,searchFields:a,setOverlayDetail:n}=e,{enqueueSnackbar:c}=Object(me.b)(),[s,r]=i.a.useState(!1),[o,l]=i.a.useState([]),[d,b]=i.a.useState([]);i.a.useEffect(()=>{0!==t&&(a.startDate>a.endDate?c("Start-Date should not be after From-Date",{variant:"warning"}):(r(!0),an.a.getForReports({startDate:a.startDate,endDate:a.endDate}).then(e=>{const t=lt()().format("YYYY-MM-DD"),n=lt()().format("HH"),i=e.map(e=>{let{cargo:a,packages:i}=e;return Object(m.a)(Object(m.a)({},a),{},{packages:i.map(e=>e.type).join(", "),_id:Object(je.d)().type===te.a.domestic?"REF"+a.id:a.hbl?a.hbl:"REF"+a.id,date:a.pickupDate+" "+a.pickupTime,name:xi(a.name,15),slName:xi(a.slName,20),address:xi(a.address,30),slAddress:xi(a.slAddress,30),now:a.createdDate===t&&a.createdTime.startsWith(n)})});l(i),j(a.merchant,i)}).catch(e=>{c("Could not fetch",{variant:"error"})}).finally(e=>r(!1))))},[c,t,a.startDate,a.endDate]),i.a.useEffect(()=>{j(a.merchant,o)},[c,t,a.merchant]);const j=(e,t)=>{const a=ki(t,{merchant:e},"merchant");b(a)},u=[...wi,{label:"Merchant",name:"merchant",options:{viewColumns:!1,filter:Object(je.d)().type===te.a.domestic,sort:!0,display:Object(je.d)().type===te.a.domestic}},{name:"actions",label:"  ",options:{empty:!0,viewColumns:!1,filter:!1,sort:!1,customBodyRender:(e,t)=>Object(L.jsx)(L.Fragment,{children:Object(L.jsx)(ce.A,{title:"View",icon:Object(L.jsx)(Hn.a,{}),onClick:()=>{n({id:t.rowData[0]})}})})}}];return Object(L.jsx)("div",{children:Object(L.jsx)(g.a,{container:!0,children:Object(L.jsxs)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:[Object(L.jsx)(ce.r,{loading:s}),Object(L.jsx)(Pa,{data:d,columns:u,filter:!0,viewColumns:!0,sort:!0,customToolbar:()=>Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("span",{style:{paddingRight:30,marginLeft:-10,color:z.a.shades.main},children:"Filters"})})})]})})})},Mi=a(183),Ei=a.n(Mi);var Yi=async()=>Object(At.c)("/v1/merchant/get-all?branch=".concat(Object(je.d)().branch));var Ai=e=>{const[t,a]=i.a.useState(0),[n,c]=i.a.useState({hbl:"",startDate:lt()().subtract(6,"d").format("YYYY-MM-DD"),endDate:lt()().format("YYYY-MM-DD")}),[s,r]=i.a.useState(!1),[o,l]=i.a.useState([]),{enqueueSnackbar:d}=Object(me.b)(),b=e=>{c(Object(m.a)(Object(m.a)({},n),{},{[e.target.name]:e.target.value}))};i.a.useEffect(()=>{Yi().then(e=>{l(Object(Gt.map)(Object(Gt.filter)(e,e=>!e.deleted),e=>e.username))}).catch(e=>{d("Could not fetch Merchants",{variant:"error"})})},[d]);return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(Ye.a,{elevation:0,children:[Object(L.jsx)(Dt.a,{title:Object(L.jsxs)(g.a,{container:!0,spacing:1,justify:"space-between",alignContent:"space-between",alignItems:"space-between",children:[Object(L.jsx)(ce.j,{Icon:Ca.a,size:2,title:"Reports",subtitle:"Merchant Delivery"}),Object(L.jsxs)(g.a,{container:!0,spacing:2,xs:10,justify:"flex-end",alignContent:"center",alignItems:"center",style:{paddingRight:10,paddingTop:10},children:[Object(L.jsx)(ce.v,{size:2,label:"Merchant/Referrer",name:"merchant",values:o,valueObjects:[{value:"",label:"All"}],value:n.merchant,onChange:b}),Object(L.jsx)(ce.e,{size:2,label:"From Date",name:"startDate",value:n.startDate,onChange:b}),Object(L.jsx)(ce.e,{size:2,label:"To Date",name:"endDate",value:n.endDate,onChange:b}),Object(L.jsx)(f.a,{startIcon:Object(L.jsx)(Ei.a,{}),color:"primary",variant:"outlined",size:"medium",onClick:()=>a(t+1),style:{marginTop:2},children:"Search"}),Object(L.jsx)(ce.a,{size:2,onClicks:[e=>{c(Object(m.a)(Object(m.a)({},n),{},{startDate:lt()().subtract(61,"d").format("YYYY-MM-DD"),endDate:lt()().format("YYYY-MM-DD")})),a(t+1)},e=>{c(Object(m.a)(Object(m.a)({},n),{},{startDate:lt()().subtract(30,"d").format("YYYY-MM-DD"),endDate:lt()().format("YYYY-MM-DD")})),a(t+1)},e=>{c(Object(m.a)(Object(m.a)({},n),{},{startDate:lt()().subtract(7,"d").format("YYYY-MM-DD"),endDate:lt()().format("YYYY-MM-DD")})),a(t+1)},e=>{c(Object(m.a)(Object(m.a)({},n),{},{startDate:lt()().format("YYYY-MM-DD"),endDate:lt()().format("YYYY-MM-DD")})),a(t+1)},e=>{c(Object(m.a)(Object(m.a)({},n),{},{startDate:lt()().add(-1,"d").format("YYYY-MM-DD"),endDate:lt()().add(-1,"d").format("YYYY-MM-DD")})),a(t+1)}],options:["Two Month","One Month","One Week","Today","Yesterday"]})]})]})}),Object(L.jsx)(Ae.a,{children:Object(L.jsx)(Ye.a,{children:Object(L.jsx)(Ii,{changed:t,setChanged:a,history:e.history,searchFields:n,setOverlayDetail:r})})})]}),Object(L.jsx)(ce.g,{open:s,width:"lg",content:s.id?Object(L.jsx)(si,{overlayDetail:s,setOverlayDetail:r}):Object(L.jsx)(L.Fragment,{})})]})},Ni=a(47);const zi=()=>(Object(je.a)().contact||"").replace("+",""),Li=(e,t)=>e?"string"===typeof e?e:e.format(t):lt()().format(t);var Ri={addDomesticJob:async(e,t,a,n,i)=>{const c=Object(m.a)(Object(m.a)({},e),{},{amount:0,paid:0,amountSpec:"{}",amountSystem:"{}",pickupDate:Li(e.pickupDateTime,"YYYY-MM-DD"),pickupTime:Li(e.pickupDateTime,"HH:mm"),createdDate:lt()().format("YYYY-MM-DD"),createdTime:lt()().format("HH:mm"),auth:Object(je.d)().username,branch:Object(je.d)().branch});delete c.pickupDateTime;const s=t.map(e=>{const t=Object(m.a)({},e);return delete t.id,t});return Object(At.e)("/v1/customer-api/cargo/create-with-package".concat(Object(Ni.a)("DOMESTIC-JOB-CREATED")),{cargo:c,packages:s})},getPendingPickups:async e=>{let{startDate:t,endDate:a,fetched:n}=e;return Object(At.e)("/v1/customer-api/cargo/get-pending-pickup?contact=".concat(zi()),{branch:Object(je.d)().branch,fetched:void 0===n?-1:n,start:t,end:a})},getAllHbl:async e=>{let{startDate:t,endDate:a,branch:n}=e;return Object(At.e)("/v1/customer-api/cargo/get-all-extended?contact=".concat(zi()),{branch:n||Object(je.d)().branch,start:t,end:a})},getCargo:async e=>Object(At.c)("/v1/customer-api/cargo/get-by-id/".concat(e,"?branch=").concat(Object(je.d)().branch,"&contact=").concat(zi())),getCargoByHbl:async(e,t)=>Object(At.c)("/v1/customer-api/cargo/get-by-hbl?hbl=".concat(e,"&branch=").concat(t||Object(je.d)().branch,"&contact=").concat(zi())),deleteCargo:async e=>Object(At.a)("/v1/customer-api/cargo/delete-many".concat(Object(Ni.a)("DELETE-CARGO"),"&branch=").concat(Object(je.d)().branch,"&contact=").concat(zi()),e)},Bi=[{name:"id",options:{viewColumns:!1,filter:!1,sort:!1,display:!1}},{name:"driverId",options:{viewColumns:!1,filter:!1,sort:!1,display:!1}},{name:"loadingId",options:{viewColumns:!1,filter:!1,sort:!1,display:!1}},{name:"dispatchedId",options:{viewColumns:!1,filter:!1,sort:!1,display:!1}},{name:"hbl",options:{viewColumns:!1,filter:!1,sort:!1,display:!1}},{label:"Cargo Mode",name:"cargoMode",options:{viewColumns:!1,filter:!0,sort:!1,display:!1}},{label:"Delivery Type",name:"deliveryType",options:{viewColumns:!1,filter:!0,sort:!1,display:!1}},{name:"now",options:{viewColumns:!1,filter:!1,sort:!1,display:!1}},{name:"deleted",options:{viewColumns:!1,filter:!1,sort:!1,display:!1}},{label:"HBL",name:"hbl",options:{viewColumns:!1,filter:!1,sort:!1,customBodyRender:function(e,t){return t.rowData[7]?Object(L.jsx)(hi.a,{color:"secondary",variant:"dot",children:Object(L.jsx)("b",{children:e||"REF"+t.rowData[0]})}):Object(L.jsx)("b",{children:e||"REF"+t.rowData[0]})}}},{label:"Name",name:"name",options:{viewColumns:!1,filter:!1,sort:!1,customBodyRender:function(e,t){return Object(L.jsx)(A.a,{label:e})}}},{label:"Status",name:"fetched",options:{viewColumns:!1,filter:!1,sort:!1,customBodyRender:function(e,t){const a=Qn(e,t.rowData[1],t.rowData[2],t.rowData[3],t.rowData[8]);return Object(L.jsx)(A.a,{label:a,style:{color:"white",backgroundColor:z.a.shades.green}})}}},{name:"address",label:"Address",options:{viewColumns:!0,filter:!1,sort:!0}},{name:"contact",label:"Contact",options:{viewColumns:!0,filter:!1,sort:!0}},{name:"slAddress",label:"Address Consignee",options:{viewColumns:!0,filter:!1,sort:!1}}];var Fi=e=>{const{searchFields:t,setOverlayDetail:a,changedHbl:n}=e,{enqueueSnackbar:c}=Object(me.b)(),[s,r]=i.a.useState(!1),[o,l]=i.a.useState([]);i.a.useEffect(()=>{if(l([]),!t.hbl)return void(t.like&&(r(!0),an.a.getAllHblLike(t.like,t.branch).then(e=>{const t=lt()().format("YYYY-MM-DD"),a=lt()().format("HH"),n=Object(Gt.map)(e,e=>Object(m.a)(Object(m.a)({},e),{},{date:e.pickupDate+" "+e.pickupTime,name:xi(e.name,15),address:xi(e.address,20),slName:xi(e.slName,15),slAddress:xi(e.slAddress,20),now:e.createdDate===t&&e.createdTime.startsWith(a)}));l(n)}).catch(e=>{console.log(e),c("Could not fetch",{variant:"error"})}).finally(e=>r(!1))));r(!0);(te.a.pickup_customer===Object(je.d)().type?t.hbl.toLowerCase().startsWith("ref")?Ri.getCargo:Ri.getCargoByHbl:t.hbl.toLowerCase().startsWith("ref")?an.a.getCargo:an.a.getCargoByHbl)(t.hbl.toLowerCase().replace("ref",""),t.branch).then(e=>{if(e.cargo.branch!==Object(je.d)().branch&&e.cargo.destination!==Object(je.d)().branch)return;const t=lt()().format("YYYY-MM-DD"),a=lt()().format("HH"),n=Object(m.a)(Object(m.a)({},e.cargo),{},{date:e.cargo.pickupDate+" "+e.cargo.pickupTime,name:xi(e.cargo.name,15),address:xi(e.cargo.address,20),slName:xi(e.cargo.slName,15),slAddress:xi(e.cargo.slAddress,20),now:e.cargo.createdDate===t&&e.cargo.createdTime.startsWith(a)});l([n])}).catch(e=>{c("Could not fetch",{variant:"error"})}).finally(e=>r(!1))},[c,n]);const d=[...Bi,{name:"actions",label:"  ",options:{empty:!0,viewColumns:!1,filter:!1,sort:!1,customBodyRender:(e,t)=>Object(L.jsx)(L.Fragment,{children:Object(L.jsx)(ce.A,{title:"View",icon:Object(L.jsx)(Hn.a,{}),onClick:()=>{a({id:t.rowData[0]})}})})}},{name:"branch",label:"From",options:{viewColumns:!0,filter:!1,sort:!1,display:te.a.delivery}}];return Object(L.jsx)("div",{children:Object(L.jsx)(g.a,{container:!0,children:Object(L.jsxs)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:[Object(L.jsx)(ce.r,{loading:s}),Object(L.jsx)(Pa,{data:o,columns:d,filter:!1,noDownload:!0,noSearch:!0})]})})})};var Pi=e=>{const[t,a]=i.a.useState(0),[n,c]=i.a.useState(0),[s,r]=i.a.useState({hbl:"",like:"",branch:Object(je.d)().branch||""}),[o,l]=i.a.useState(!1),d=e=>{r(Object(m.a)(Object(m.a)({},s),{},{[e.target.name]:e.target.value}))},b=e=>{13===e.keyCode&&c(n+1)};return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(Ye.a,{elevation:0,children:[Object(L.jsx)(Dt.a,{title:Object(L.jsxs)(g.a,{container:!0,spacing:1,justify:"space-between",alignContent:"space-between",alignItems:"space-between",children:[Object(L.jsx)(ce.j,{Icon:pn.a,size:4,title:"HBL Status",subtitle:"Cargo/Job"}),Object(L.jsxs)(g.a,{container:!0,spacing:2,xs:8,justify:"flex-end",alignContent:"center",alignItems:"center",style:{paddingRight:15,paddingTop:10},children:["delivery"===Object(je.d)().type&&Object(L.jsx)(ce.v,{size:2,label:"Branch",name:"branch",values:Object(ue.clientY)(),style:{alignSelf:"flex-start"},value:s.branch,onChange:d}),Object(L.jsx)(ce.C,{size:3,label:"Partial search",name:"like",onKeyDown:b,helperText:"Shipper or consignee name | Last 3 months",value:s.like,onChange:d,autoFocus:!0}),Object(L.jsx)(ce.C,{size:3,label:"HBL/JOB",name:"hbl",onKeyDown:b,helperText:"For HBL: 12345 | |  For JOB: REF12345",value:s.hbl,onChange:d,autoFocus:!0}),Object(L.jsx)(f.a,{endIcon:Object(L.jsx)(yi.a,{}),color:"primary",variant:"outlined",size:"medium",onClick:()=>c(n+1),style:{marginTop:16,alignSelf:"baseline"},children:s.hbl.toLowerCase().startsWith("ref")?"JOB":"HBL"})]})]})}),Object(L.jsx)(Ae.a,{children:Object(L.jsx)(Ye.a,{children:Object(L.jsx)(Fi,{changed:t,setChanged:a,changedHbl:n,searchFields:s,setOverlayDetail:l})})})]}),Object(L.jsx)(ce.g,{open:o,width:"lg",content:o.id?Object(L.jsx)(si,{overlayDetail:o,setOverlayDetail:l}):Object(L.jsx)(L.Fragment,{})})]})},Hi=a(416),Wi=[{name:"id",options:{viewColumns:!1,filter:!1,sort:!1,display:!1}},{name:"now",options:{viewColumns:!1,filter:!1,sort:!1,display:!1}},{label:"Reference",name:"_id",options:{viewColumns:!1,filter:!1,sort:!0,customBodyRender:function(e,t){return t.rowData[2]?Object(L.jsx)(hi.a,{color:"secondary",variant:"dot",children:Object(L.jsx)("b",{children:e})}):Object(L.jsx)("b",{children:e})}}},{label:"Name",name:"name",options:{viewColumns:!1,filter:!1,sort:!0,customBodyRender:function(e,t){return t.rowData[12]?Object(L.jsx)(A.a,{label:e,style:{color:"white",backgroundColor:z.a.shades.green}}):Object(L.jsx)(A.a,{label:e})}}},{label:"Zone",name:"pickupArea",options:{viewColumns:!0,display:!1,filter:!0,sort:!0,customBodyRender:function(e,t){if(e)return Object(L.jsx)(A.a,{label:e})}}},{name:"address",label:"Address",options:{viewColumns:!0,filter:!1,sort:!0}},{name:"contact",label:"Contact",options:{viewColumns:!0,filter:!1,sort:!0}},{name:"createdDate",label:"Created Date",options:{viewColumns:!0,display:!1,filter:!1,sort:!0}},{name:"date",label:"Pickup Date",options:{viewColumns:!0,filter:!1,sort:!0}},{name:"note",label:"Note",options:{viewColumns:!0,display:!0,filter:!1,sort:!1}},{name:"cargoMode",label:"Cargo Mode",options:{viewColumns:!0,filter:!0,sort:!1,display:!0}},{name:"driverName",label:"Driver",options:{viewColumns:!0,filter:!1,sort:!0,customBodyRender:function(e,t){return e?Object(L.jsx)(A.a,{label:e,style:{color:"white",backgroundColor:z.a.shades.green}}):""}}},{name:"auth",label:"Auth",options:{viewColumns:!0,display:!1,filter:!0,sort:!0}}],Ui=a(732),_i=a(448),Gi=a.n(_i);const qi=e=>{const{changed:t,searchFields:a,setOverlayDetail:n,setChanged:c,setOverlayType:s}=e,{enqueueSnackbar:r}=Object(me.b)(),o=Object(xn.useDialog)(),l=Object(ce.F)(),d=Object(ce.E)(),[b,j]=i.a.useState(!1),[u,p]=i.a.useState([]),[h,O]=i.a.useState([]),[x,v]=i.a.useState([]),[y,C]=i.a.useState({}),[D,w]=i.a.useState([]);i.a.useEffect(()=>{a.startDate>a.endDate?r("Start-Date should not be after From-Date",{variant:"warning"}):(O([]),j(!0),(Object(je.d)().type===te.a.domestic?an.a.getPendingDomestic:Object(je.d)().type===te.a.pickup_customer?Ri.getPendingPickups:an.a.getPendingPickups)(a).then(e=>{const t=lt()().format("YYYY-MM-DD"),a=lt()().format("HH"),n=e.map(e=>Object(m.a)(Object(m.a)({},e),{},{_id:"REF"+e.id,date:In()(e,"pickupDate")+" "+In()(e,"pickupTime"),createdDate:In()(e,"createdDate")+" "+In()(e,"createdTime"),note:xi(e.note,25),now:e.createdDate===t&&e.createdTime.startsWith(a)}));p(n),k(null,n)}).catch(e=>{r("Could not fetch",{variant:"error"})}).finally(e=>j(!1)))},[r,t,a]),i.a.useEffect(()=>{Object(je.d)().type!==te.a.pickup_customer&&va().then(e=>{v(na()(Object(Gt.filter)(e,e=>!e.deleted),e=>({value:e.id,label:e.username})))}).catch(e=>{r("Could not fetch",{variant:"error"})})},[r]);const S=Object(L.jsxs)(L.Fragment,{children:[Object(je.d)().type===te.a.pickup&&Object(L.jsxs)(f.a,{variant:"contained",color:"primary",size:"small",endIcon:Object(L.jsx)(Jt.a,{}),style:{marginLeft:5},disabled:0===h.length,onClick:()=>{l.confirm({title:"Select driver to assign",assigneeList:x,callback:e=>{j(!0);const a=[...h];O([]),p([]),an.a.assignCargo(a,e).then(e=>{r("Assigned",{variant:"success"})}).catch(e=>{r("Could not Assign",{variant:"error"})}).finally(e=>{j(!1),c(t+1)})}})},children:["Assign Driver [ ",h.length," ]"]}),Object(L.jsxs)(f.a,{variant:"contained",color:"primary",size:"small",style:{marginLeft:5},disabled:0===h.length,onClick:()=>{o.confirm(Object(ce.d)("Delete "+h.length+" items","DELETE")).then(()=>{j(!0);const e=[...h];p([]),O([]),(Object(je.d)().type===te.a.pickup_customer?Ri.deleteCargo:an.a.deleteCargo)(e).then(e=>{r("Deleted",{variant:"success"}),c(t+1)}).catch(e=>{r("Could not Delete",{variant:"error"})}).finally(e=>j(!1))})},startIcon:Object(L.jsx)(On.a,{}),children:["[ ",h.length," ]"]}),Object(L.jsxs)(f.a,{variant:"contained",color:"primary",size:"small",style:{marginLeft:5},disabled:1!==h.length,onClick:()=>{d.confirm({title:"Copy JOB - How many duplicates?",assigneeList:x,callback:e=>{j(!0),an.a.getCargo(h[0]).then(a=>{const n=Object(m.a)({},a.cargo),i=[...a.packages];O([]),p([]),r("Copying in Progress! Thank you for waiting. This will take around 20 seconds",{variant:"warning"});let s=0;const o=setInterval(()=>{const a=s+1;s===+e?(j(!1),clearInterval(o)):(an.a.addDomesticJob({fetched:-1,isDomestic:!0,cargoMode:"B2B",warehouseLocation:"B2B",deliveryType:"B2B",currency:"CAD",uuid:Math.random().toString(16).slice(2,10)+"-"+Math.random().toString(16).slice(2,10),slLocation:!1,name:n.name,address:n.address,contact:n.contact,slContact:n.slContact,slAddress:n.slAddress,slName:n.slName,slPpNo:n.slPpNo,ppNo:n.ppNo,note:n.note,amount:0,paid:0,amountSpec:"{}",amountSystem:"{}",pickupDate:n.pickupDate,pickupTime:n.pickupTime,createdDate:n.createdDate,createdTime:n.createdTime,auth:"Base_user",branch:n.branch},i).then(n=>{r("Cloned "+a+" of "+e+". Please refresh in 10 seconds.",{variant:"success"}),a===+e&&(j(!1),c(t+1),clearInterval(o))}).catch(e=>{r("Could not Clone",{variant:"error"})}),s++),console.log(s)},600)}).catch(e=>{r("Could not fetch JOB",{variant:"error"}),j(!1)})}})},startIcon:Object(L.jsx)(Ui.a,{}),children:["[ ",h.length," ]"]})]}),k=(e,t)=>{O([]);const a=e?Object(m.a)(Object(m.a)({},y),{},{[e.target.name]:e.target.value}):y,n=ki(e?u:t,a,"driverName");C(a),w(n)},T=[{name:"check",label:"  ",options:{viewColumns:!1,filter:!1,sort:!1,setCellProps:()=>({style:{width:10}}),customBodyRender:(e,t)=>Object(L.jsx)(L.Fragment,{children:!b&&Object(L.jsx)(Hi.a,{style:{padding:0,margin:0},onClick:e=>{e.target.checked?O([...h,t.rowData[1]]):O([...h.filter(e=>e!==t.rowData[1])])}})})}},...Wi,{name:"actions",label:"  ",options:{empty:!0,viewColumns:!1,filter:!1,sort:!1,customBodyRender:(e,t)=>Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(ce.A,{style:{paddingRight:0,marginRight:0},title:"View",icon:Object(L.jsx)(Hn.a,{}),onClick:()=>{n({id:t.rowData[1]}),s("VIEW")}}),Object(L.jsx)(ce.A,{style:{paddingRight:0,marginRight:0},title:"Edit",icon:Object(L.jsx)($e.a,{}),onClick:()=>{n({id:t.rowData[1]}),s("EDIT")}})]})}}];return Object(L.jsx)("div",{children:Object(L.jsx)(g.a,{container:!0,children:Object(L.jsxs)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:[Object(L.jsx)(ce.r,{loading:b}),Object(L.jsx)(Pa,{data:D,columns:T,viewColumns:!0,title:S,sort:!0,customToolbar:()=>Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("span",{style:{paddingRight:30,marginLeft:-10,color:z.a.shades.main},children:"Filters"}),Object(L.jsx)(ce.q,{label:"Total",value:Gi()(u)}),Object(L.jsx)(ce.w,{name:"driverName",label:"Driver",valueObjects:[{value:"",label:"All"}],values:Ti(u.map(e=>e.driverName)),value:y.driverName,onChange:k,style:{marginLeft:5,width:120,minWidth:"120px !important"}})]}),filter:!0})]})})})};var Vi=i.a.memo(qi),Ji=a(449),Ki=a.n(Ji);var Zi=e=>{const{setOverlayDetail:t,setChanged:a,changed:n,overlayDetail:c}=e,{enqueueSnackbar:s}=Object(me.b)(),[r,o]=i.a.useState({}),[l,d]=i.a.useState(!1),[b,j]=i.a.useState([]);i.a.useEffect(()=>{void 0!==c.id&&(d(!0),an.a.getCargo(c.id).then(e=>{const t=e.cargo||{};o(Object(m.a)(Object(m.a)({},t),{},{pickupDateTime:t.pickupDate&&lt()(t.pickupDate+" "+t.pickupTime)}))}).catch(e=>{s("Could not fetch",{variant:"error"})}).finally(e=>d(!1)))},[s,c.id]),i.a.useEffect(()=>{nn().then(e=>{j(Object(Gt.map)(Object(Gt.filter)(e,e=>!e.deleted),e=>e.name))}).catch(e=>{s("Could not fetch",{variant:"error"})})},[s]);const u=e=>{o(Object(m.a)(Object(m.a)({},r),{},{[e.target.name]:e.target.value}))};return Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("div",{children:Object(L.jsx)(g.a,{container:!0,children:Object(L.jsxs)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:[Object(L.jsx)(ce.m,{title:"EDIT JOB",onClose:()=>t(!1)}),Object(L.jsx)(ce.r,{loading:l}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:20},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"JOB BASIC DETAILS"}),Object(L.jsx)(st.a,{children:Object(L.jsxs)(g.a,{container:!0,spacing:1,alignContent:"flex-start",alignItems:"flex-start",justify:"flex-start",children:[Object(L.jsx)(ce.v,{size:6,label:"Zone",name:"pickupArea",values:b,value:r.pickupArea,onChange:u}),r.pickupDateTime&&Object(L.jsx)(ce.f,{size:6,label:"Pickup Date Time",name:"pickupDateTime",value:r.pickupDateTime,onChange:u})]})})]})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:20,paddingBottom:20},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsx)(g.a,{container:!0,spacing:1,alignContent:"flex-end",alignItems:"flex-end",justify:"flex-end",children:Object(L.jsx)(f.a,{variant:"contained",color:"primary",endIcon:Object(L.jsx)(sn.a,{}),disabled:l,onClick:()=>(d(!0),void an.a.editJob(c.id,r).then(e=>{s("Updated",{variant:"success"}),a(n+1),t(!1)}).catch(e=>{s("Could not Update",{variant:"error"})}).finally(e=>d(!1))),children:"Edit Job"})})})}),Object(L.jsx)(ce.r,{loading:l})]})})})})};var Xi=e=>{let{overlayDetail:t,setOverlayDetail:a,setChanged:n,changed:i}=e;return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(Zi,{setChanged:n,changed:i,overlayDetail:t,setOverlayDetail:a}),Object(L.jsx)("div",{style:{padding:20}})]})};var Qi=e=>{const[t,a]=i.a.useState(0),[n,c]=i.a.useState({startDate:lt()().subtract(5,"d").format("YYYY-MM-DD"),endDate:lt()().format("YYYY-MM-DD")}),[s,r]=i.a.useState(!1),[o,l]=i.a.useState(!1),d=e=>{c(Object(m.a)(Object(m.a)({},n),{},{[e.target.name]:e.target.value}))};return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(Ye.a,{elevation:0,children:[Object(L.jsx)(Dt.a,{title:Object(L.jsxs)(g.a,{container:!0,spacing:1,justify:"space-between",alignContent:"space-between",alignItems:"space-between",children:[Object(L.jsx)(ce.j,{Icon:Ki.a,size:4,title:"Pending Pickups",subtitle:"Inquiry"}),Object(L.jsxs)(g.a,{container:!0,spacing:2,xs:8,justify:"flex-end",alignContent:"center",alignItems:"center",style:{paddingRight:10,paddingTop:10},children:[Object(L.jsx)(ce.e,{label:"From Date",name:"startDate",value:n.startDate,onChange:d}),Object(L.jsx)(ce.e,{label:"To Date",name:"endDate",value:n.endDate,onChange:d}),Object(L.jsx)(f.a,{color:"primary",variant:"outlined",size:"medium",onClick:()=>a(t+1),style:{marginTop:2},children:"Search"}),Object(L.jsx)(ce.a,{size:3,onClicks:[e=>{c(Object(m.a)(Object(m.a)({},n),{},{startDate:lt()().subtract(7,"d").format("YYYY-MM-DD"),endDate:lt()().format("YYYY-MM-DD")}))},e=>{c(Object(m.a)(Object(m.a)({},n),{},{startDate:lt()().format("YYYY-MM-DD"),endDate:lt()().format("YYYY-MM-DD")}))},e=>{c(Object(m.a)(Object(m.a)({},n),{},{startDate:lt()().add(1,"d").format("YYYY-MM-DD"),endDate:lt()().add(1,"d").format("YYYY-MM-DD")}))}],options:["One Week","Today","Tommorow"]})]})]})}),Object(L.jsx)(Ae.a,{children:Object(L.jsx)(Ye.a,{children:Object(L.jsx)(Vi,{changed:t,setChanged:a,searchFields:n,setOverlayDetail:r,setOverlayType:l})})})]}),Object(L.jsx)(ce.g,{open:s,width:"VIEW"===o?"lg":"sm",content:"VIEW"===o?Object(L.jsx)(si,{overlayDetail:s,setOverlayDetail:r}):Object(L.jsx)(Xi,{changed:t,setChanged:a,overlayDetail:s,setOverlayDetail:r})})]})},$i=[{label:"",name:"id",options:{viewColumns:!1,filter:!1,sort:!1,display:!1}},{label:"HBL",name:"hbl",options:{viewColumns:!1,filter:!1,sort:!0,customBodyRender:function(e,t){return Object(L.jsx)("b",{children:e})}}},{label:"Name",name:"name",options:{viewColumns:!1,filter:!1,sort:!0,customBodyRender:function(e,t){return Object(L.jsx)(A.a,{label:e})}}},{name:"address",label:"Address",options:{viewColumns:!0,display:!1,filter:!1,sort:!0}},{name:"date",label:"Picked Date",options:{viewColumns:!0,filter:!1,sort:!0}},{name:"totalWeight",label:"Weight",options:{viewColumns:!1,filter:!1,sort:!0,setCellProps:()=>({align:"right"})}},{name:"totalVolume",label:"Volume",options:{viewColumns:!1,filter:!1,sort:!0,setCellProps:()=>({align:"right"})}},{name:"amount",label:"Amount",options:{viewColumns:!1,filter:!1,sort:!0,setCellProps:()=>({align:"right"}),customBodyRender:function(e,t){return Object(L.jsx)(A.a,{label:e,style:{color:"white",backgroundColor:z.a.shades.green}})}}},{name:"paid",label:"Paid",options:{viewColumns:!1,filter:!1,sort:!0,setCellProps:()=>({align:"right"}),customBodyRender:function(e,t){return Object(L.jsx)(A.a,{label:e,style:{color:"white",backgroundColor:z.a.shades.green}})}}},{name:"cargoMode",label:"Cargo Mode",options:{viewColumns:!0,filter:!0,sort:!0,setCellProps:()=>({align:"center"})}},{name:"driverName",label:"Driver",options:{viewColumns:!0,filter:!1,sort:!0}},{name:"auth",label:"Source",options:{viewColumns:!0,filter:!1,sort:!1}}],ec=a(733),tc=a(734);var ac=e=>{const{changed:t,searchFields:a,setOverlayDetail:n,setChanged:c,setOverlayType:s}=e,{enqueueSnackbar:r}=Object(me.b)(),o=Object(xn.useDialog)(),[l,d]=i.a.useState(!1),[b,j]=i.a.useState([]),[u,p]=i.a.useState([]),[h,O]=i.a.useState({}),[x,v]=i.a.useState({}),[y,C]=i.a.useState([]);i.a.useEffect(()=>{a.startDate>a.endDate?r("Start-Date should not be after From-Date",{variant:"warning"}):(p([]),d(!0),an.a.getCashSettlements(a).then(e=>{const t=Object(Gt.orderBy)(e,"driverName").map(e=>Object(m.a)(Object(m.a)({},e),{},{totalVolume:Object(Ya.g)({volume:e.totalVolume}),totalWeight:Object(Ya.b)(e.totalWeight),name:xi(e.name,15),address:xi(e.address,30),date:In()(e,"pickedUpDate")+" "+In()(e,"pickedUpTime"),issue:In()(e,"amountSpec",0)===In()(e,"amountSpecDummy",1)?"":"Yes"}));j(t),D(null,t)}).catch(e=>{r("Could not fetch",{variant:"error"})}).finally(e=>d(!1)))},[r,t,a]);const D=(e,t)=>{p([]);const a=e?Object(m.a)(Object(m.a)({},x),{},{[e.target.name]:e.target.value}):x,n=ki(e?b:t,a,"driverName"),i=ki(n,a,"cargoMode"),c=ki(i,a,"deliveryType"),s=ki(c,a,"auth");v(a),C(s),w(s)},w=e=>{const t=Math.round(10*Si(e,"paid"))/10,a=Math.round(10*Si(e,"cash"))/10;O({paid:t,cash:a})},S=Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(f.a,{variant:"contained",color:"primary",size:"small",endIcon:Object(L.jsx)(ec.a,{}),style:{marginLeft:5},disabled:0===u.length,onClick:()=>{const e=Object(Gt.reduce)(u,(e,t)=>[...e,y.find(e=>e.id===t).driverName],[]);1===new Set(e).size?o.confirm(Object(ce.d)("Cash Receive "+u.length+" item(s)","RECEIVE")).then(()=>{d(!0);const a=[...u];C([]),p([]),an.a.receiveCashCargo(a,e[0]).then(e=>{r("Cash Received",{variant:"success"}),p([]),c(t+1)}).catch(e=>{r("Could not Cash Receive",{variant:"error"})}).finally(e=>d(!1))}):r("All selected should be same driver",{variant:"warning"})},children:["Cash Received [ ",u.length," ]"]}),Object(L.jsx)(ce.q,{label:"Total Paid",value:In()(h,"paid")})]}),k=[{name:"check",label:"  ",empty:!0,options:{empty:!0,viewColumns:!1,filter:!1,sort:!1,setCellProps:()=>({style:{width:10}}),customBodyRender:(e,t)=>Object(L.jsx)(L.Fragment,{children:!l&&Object(L.jsx)(Hi.a,{style:{padding:0,margin:0},onClick:e=>{e.target.checked?p([...u,t.rowData[1]]):p([...u.filter(e=>e!==t.rowData[1])])}})})}},...$i,{name:"actions",label:"  ",options:{empty:!0,viewColumns:!1,filter:!1,sort:!1,customBodyRender:(e,t)=>Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(ce.A,{style:{padding:0,margin:0},title:"View",icon:Object(L.jsx)(Hn.a,{}),onClick:()=>{n({id:t.rowData[1]}),s("VIEW")}}),Object(L.jsx)(ce.A,{style:{padding:5,margin:0},title:"Edit Payment",icon:Object(L.jsx)(tc.a,{}),onClick:()=>{n({id:t.rowData[1]}),s("EDIT_PAYMENT")}})]})}}];return Object(L.jsx)("div",{children:Object(L.jsx)(g.a,{container:!0,children:Object(L.jsxs)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:[Object(L.jsx)(ce.r,{loading:l}),Object(L.jsx)(Pa,{data:y,columns:k,filter:!1,sort:!0,customToolbar:()=>Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(ce.w,{name:"driverName",label:"Driver",valueObjects:[{value:"",label:"All"}],values:Ti(b.map(e=>e.driverName)),value:x.driverName,onChange:D,style:{width:110,minWidth:"110px !important"}}),Object(L.jsx)(ce.w,{name:"auth",label:"Officer",valueObjects:[{value:"",label:"All"}],values:Ti(b.map(e=>e.auth)),value:x.auth,onChange:D,style:{marginLeft:5,width:110,minWidth:"110px !important"}}),Object(L.jsx)(ce.w,{name:"cargoMode",label:"Cargo Mode",valueObjects:[{value:"",label:"All"}],values:Ti(b.map(e=>e.cargoMode)),value:x.cargoMode,onChange:D,style:{marginLeft:5,width:120,minWidth:"120px !important"}}),Object(L.jsx)(ce.w,{name:"deliveryType",label:"Delivery Type",valueObjects:[{value:"",label:"All"}],values:Ti(b.map(e=>e.deliveryType)),value:x.deliveryType,onChange:D,style:{marginLeft:5,width:120,minWidth:"120px !important"}})]}),title:S,viewColumns:!0})]})})})},nc=[{label:"ID",name:"id",options:{display:!1}},{label:"quantity",name:"quantity",options:{display:!1}},{label:"Weight",name:"weight",options:{display:!1}},{label:"Height",name:"height",options:{display:!1}},{label:"Width",name:"breadth",options:{display:!1}},{label:"Length",name:"length",options:{display:!1}}];var ic=e=>{const{setOverlayDetail:t,packages:a,setChanged:n,changed:c,showActions:s}=e,r=Object(xn.useDialog)(),{enqueueSnackbar:o}=Object(me.b)(),[l,d]=i.a.useState(!1),b=[...nc,{name:"type",label:"",options:{empty:!0,viewColumns:!1,filter:!1,sort:!1,setCellProps:()=>({style:{width:10}}),customBodyRender:(e,a)=>Object(L.jsxs)(i.a.Fragment,{children:[Object(L.jsx)(A.a,{label:e}),Object(L.jsx)("br",{}),s&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(de.a,{style:{padding:0,margin:0},onClick:()=>{return e=a.rowData[0],t=a.rowData[1],void r.confirm(Object(ce.d)("Delete "+t,"DELETE")).then(()=>{d(!0),di(e).then(e=>{n(c+1)}).catch(e=>{o("Could not Delete",{variant:"error"})}).finally(e=>d(!1))});var e,t},children:Object(L.jsx)(On.a,{})}),Object(L.jsx)(de.a,{onClick:()=>t({id:a.rowData[0]}),children:Object(L.jsx)($e.a,{})})]})]})}},{label:"Details",name:"field",options:{setCellProps:()=>({style:{width:10}}),customBodyRender:(e,t)=>Object(L.jsxs)(i.a.Fragment,{children:["Q:"+t.rowData[1]+" W:"+t.rowData[2],Object(L.jsx)("br",{}),"H"+t.rowData[3]+" B"+t.rowData[4]+" L"+t.rowData[5],Object(L.jsx)("br",{})]})}}];return Object(L.jsx)("div",{children:Object(L.jsx)(g.a,{container:!0,children:Object(L.jsxs)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:[Object(L.jsx)(ce.r,{loading:l}),a.length>0&&Object(L.jsx)(Pa,{data:a,columns:b,minified:!0})]})})})},cc=a(415);var sc=e=>{const{packages:t,cargo:a,weight:n,volume:i,paid:c,setPaid:s,amount:r,setAmount:o,setAmountSystem:l}=e,d=e=>{const t=(e.target.value+"").replace(/[^0-9.]/gi,""),a=100*Object(je.b)(Object(je.d)().branch).vat;if("BOX CHARGES"===e.target.name){const n=r.map(a=>"BOX CHARGES"===a.costType?Object(m.a)(Object(m.a)({},a),{},{costType:e.target.name,amount:t}):a).map(e=>e.costType==="BOX VAT "+a+"%"?Object(m.a)(Object(m.a)({},e),{},{costType:"BOX VAT "+a+"%",amount:Object(Ya.b)(+(t||0)*Object(je.b)(Object(je.d)().branch).vat)}):e);o(n)}else{const a=r.map(a=>a.costType===e.target.name?Object(m.a)(Object(m.a)({},a),{},{costType:e.target.name,amount:t}):a);o(a)}};return Object(L.jsx)("div",{children:Object(L.jsx)(g.a,{container:!0,children:Object(L.jsxs)(g.a,{container:!0,spacing:2,xs:12,sm:12,md:12,lg:12,xl:12,children:[Object(L.jsx)(g.a,{item:!0,md:12,style:{paddingTop:15,paddingBottom:5},children:Object(L.jsx)(f.a,{variant:"contained",color:"primary",endIcon:Object(L.jsx)(ec.a,{}),disabled:0===t.length,onClick:e=>{const t=Object(cc.a)(a.cargoMode,a.deliveryType,n,i,a.warehouseLocation);o(t),l(t)},children:r?"Re-Calculate":"Calculate"})}),r&&Object(L.jsxs)(L.Fragment,{children:[na()(r,e=>Object(L.jsxs)(g.a,{container:!0,spacing:2,md:12,justify:"space-between",style:{paddingLeft:20},children:[Object(L.jsx)(g.a,{md:6,children:Object(L.jsx)(h.a,{style:{paddingTop:20},children:e.costType})}),Object(L.jsx)(ce.C,{size:6,label:e.costType,name:e.costType,disabled:!e.editable,value:e.amount,onChange:d})]})),Object(L.jsx)("hr",{style:{marginLeft:10,marginTop:10,width:"100%"}}),Object(L.jsxs)(g.a,{container:!0,spacing:2,md:12,justify:"space-between",style:{paddingLeft:20,paddingBottom:15},children:[Object(L.jsx)(g.a,{md:6,children:Object(L.jsx)(h.a,{style:{paddingTop:20},children:Object(L.jsx)("b",{children:"GRAND TOTAL"})})}),Object(L.jsx)(g.a,{xs:6,justify:"center",style:{textAlign:"center"},children:Object(L.jsxs)(h.a,{style:{textAlign:"center",paddingLeft:20,paddingTop:20,fontWeight:"bold"},children:[Object(Ya.a)(r)," ",Object(je.d)().currency]})})]}),Object(L.jsx)("hr",{style:{marginLeft:10,marginTop:10,width:"100%"}}),Object(L.jsxs)(g.a,{container:!0,spacing:2,md:12,justify:"space-between",style:{paddingLeft:20},children:[Object(L.jsx)(ce.p,{label:"Packages",value:t.length,size:4}),Object(L.jsx)(ce.p,{label:"Weight",value:Object(Ya.b)(n),size:4}),Object(L.jsx)(ce.p,{label:"Volume",value:Object(Ya.e)(i),size:4})]}),Object(L.jsx)("hr",{style:{marginLeft:10,marginTop:10,width:"100%"}}),Object(L.jsxs)(g.a,{container:!0,spacing:2,sm:12,justify:"space-between",style:{paddingTop:20},children:[Object(L.jsx)(g.a,{sm:6}),Object(L.jsx)(g.a,{sm:6,style:{paddingLeft:20},children:Object(L.jsx)(ce.C,{size:12,label:"PAID AMOUNT",value:c,onChange:e=>{const t=(e.target.value+"").replace(/[^0-9.]/gi,"");s(t)}})})]})]})]})})})};var rc=e=>{const{setOverlayDetail:t,overlayDetail:a,setChanged:n,changed:c}=e,{enqueueSnackbar:s}=Object(me.b)(),r=Object(xn.useDialog)(),[o,l]=i.a.useState([]),[d,b]=i.a.useState({}),[j,u]=i.a.useState(!1),[p,h]=i.a.useState(!1),[O,x]=i.a.useState(0),[v,y]=i.a.useState(!1);i.a.useEffect(()=>{a.id&&(y(!0),an.a.getCargo(a.id).then(e=>{var t;Object(je.d)().branch!==e.cargo.branch&&s("You are not Authorized",{variant:"warning"}),b(Object(m.a)(Object(m.a)({},e.cargo),{},{pickupDateTime:lt()(e.cargo.pickupDate+"T"+e.cargo.pickupTime+":00")})),l(e.packages||[]),x(null===(t=e.cargo)||void 0===t?void 0:t.paid)}).catch(e=>{s("Could not fetch",{variant:"error"})}).finally(e=>y(!1)))},[s,a.id,y,l]);const C=()=>{y(!0),an.a.editHbl(a.id,Object(m.a)({},d),j,p,O,{pickedUpTime:d.pickedUpTime,pickedUpDate:d.pickedUpDate},"PAYMENT-EDIT").then(e=>{n(c+1),t(!1),s("Payments updated",{variant:"success"})}).catch(e=>{console.log(e),y(!1),s("Could not add payments",{variant:"error"})})};return Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("div",{children:Object(L.jsx)(g.a,{container:!0,children:Object(L.jsxs)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:[Object(L.jsx)(ce.r,{loading:v}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:5},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"PACKAGE DETAILS"}),Object(L.jsx)(st.a,{style:{padding:0},children:Object(L.jsx)(g.a,{container:!0,spacing:1,alignContent:"flex-start",alignItems:"flex-start",justify:"flex-start",children:Object(L.jsx)(g.a,{item:!0,xs:12,children:Object(L.jsx)(ic,{setPackages:l,packages:o,setOverlayDetail:t})})})})]})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:5},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsxs)(ct.a,{defaultExpanded:!0,children:[Object(L.jsx)(ce.l,{title:"PAYMENT DETAILS"}),Object(L.jsx)(st.a,{style:{padding:10},children:Object(L.jsx)(g.a,{container:!0,spacing:1,alignContent:"flex-start",alignItems:"flex-start",justify:"flex-start",children:Object(L.jsx)(sc,{paid:O,setPaid:x,weight:Ut()(o,(e,t)=>e+ +t.weight,0),volume:Ut()(o,(e,t)=>e+Object(Ya.f)(t),0),amount:j,setAmount:u,setAmountSystem:h,cargo:d,packages:o})})})]})})}),Object(L.jsx)(g.a,{container:!0,spacing:0,style:{paddingTop:20},children:Object(L.jsx)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:Object(L.jsx)(g.a,{container:!0,style:{padding:10},spacing:1,alignContent:"space-between",alignItems:"space-between",justify:"space-between",children:Object(L.jsx)(f.a,{variant:"contained",color:"primary",size:"medium",endIcon:Object(L.jsx)(ec.a,{}),disabled:v||!j,onClick:()=>{0===O?r.confirm(Object(ce.d)("Continue? Paid amount is Zero","ALLOW ZERO PAID")).then(()=>{C()}):C()},children:"Update Payments"})})})}),Object(L.jsx)(ce.r,{loading:v})]})})})})};var oc=e=>{const{overlayDetail:t,setOverlayDetail:a,changed:n,setChanged:i}=e;return Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(Ye.a,{elevation:0,style:{marginTop:0},children:[Object(L.jsx)(Dt.a,{style:{padding:0},title:Object(L.jsx)(ce.m,{title:"EDIT HBL PAYMENTS",onClose:()=>a(!1)})}),Object(L.jsx)(Ae.a,{style:{padding:0,paddingBottom:100},children:Object(L.jsxs)(Ye.a,{style:{paddingTop:0},children:[Object(L.jsx)(rc,{overlayDetail:t,setOverlayDetail:a,changed:n,setChanged:i}),Object(L.jsx)("div",{style:{padding:20}})]})})]})})};var lc=e=>{const[t,a]=i.a.useState(0),[n,c]=i.a.useState({startDate:lt()().subtract(30,"d").format("YYYY-MM-DD"),endDate:lt()().format("YYYY-MM-DD")}),[s,r]=i.a.useState(!1),[o,l]=i.a.useState(!1),d=e=>{c(Object(m.a)(Object(m.a)({},n),{},{[e.target.name]:e.target.value}))};return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(Ye.a,{elevation:0,children:[Object(L.jsx)(Dt.a,{title:Object(L.jsxs)(g.a,{container:!0,spacing:1,justify:"space-between",alignContent:"space-between",alignItems:"space-between",children:[Object(L.jsx)(ce.j,{Icon:Z.a,size:4,title:"Cash Settlements",subtitle:"Inquiry"}),Object(L.jsxs)(g.a,{container:!0,spacing:2,xs:8,justify:"flex-end",alignContent:"center",alignItems:"center",style:{paddingRight:10,paddingTop:10},children:[Object(L.jsx)(ce.e,{label:"From Date",name:"startDate",value:n.startDate,onChange:d}),Object(L.jsx)(ce.e,{label:"To Date",name:"endDate",value:n.endDate,onChange:d}),Object(L.jsx)(f.a,{color:"primary",variant:"outlined",size:"medium",onClick:()=>a(t+1),style:{marginTop:2},children:"Search"}),Object(L.jsx)(ce.a,{size:3,onClicks:[e=>{c(Object(m.a)(Object(m.a)({},n),{},{startDate:lt()().subtract(30,"d").format("YYYY-MM-DD"),endDate:lt()().format("YYYY-MM-DD")}))},e=>{c(Object(m.a)(Object(m.a)({},n),{},{startDate:lt()().format("YYYY-MM-DD"),endDate:lt()().format("YYYY-MM-DD")}))},e=>{c(Object(m.a)(Object(m.a)({},n),{},{startDate:lt()().add(-1,"d").format("YYYY-MM-DD"),endDate:lt()().add(-1,"d").format("YYYY-MM-DD")}))}],options:["One Month","Today","Yesterday"]})]})]})}),Object(L.jsx)(Ae.a,{children:Object(L.jsx)(Ye.a,{children:Object(L.jsx)(ac,{changed:t,setChanged:a,searchFields:n,setOverlayDetail:r,setOverlayType:l})})})]}),Object(L.jsx)(ce.g,{open:s,width:"VIEW"===o?"lg":"md",content:"VIEW"===o?Object(L.jsx)(si,{overlayDetail:s,setOverlayDetail:r}):Object(L.jsx)(oc,{changed:t,setChanged:a,overlayDetail:s,setOverlayDetail:r})})]})},dc=[{label:"",name:"id",options:{viewColumns:!1,filter:!1,sort:!1,display:!1}},{label:"",name:"memberId",options:{viewColumns:!1,filter:!1,sort:!1,display:!1}},{label:"Name",name:"fullName",options:{viewColumns:!1,filter:!1,sort:!1,customBodyRender:function(e,t){return Object(L.jsx)(A.a,{label:e,size:"small"})}}},{name:"batchOl",label:"Batch O/L",options:{viewColumns:!0,filter:!1,sort:!1}},{name:"date",label:"Paid Date",options:{viewColumns:!0,filter:!1,sort:!1}},{name:"forNote",label:"Paid for",options:{viewColumns:!0,filter:!1,sort:!0}},{name:"amount",label:"Amount",options:{viewColumns:!0,filter:!1,sort:!0,setCellProps:()=>({align:"right"}),customBodyRender:function(e,t){return Object(L.jsx)(A.a,{label:e,size:"small",style:{color:"white",backgroundColor:z.a.shades.green}})}}}];var bc=e=>{const{changed:t,searchFields:a,setOverlayDetail:n,setChanged:c}=e,{enqueueSnackbar:s}=Object(me.b)(),[r,o]=(Object(xn.useDialog)(),Object(ce.F)(),i.a.useState(!1)),[l,d]=i.a.useState([]),[b,j]=i.a.useState([]),[u,p]=i.a.useState({}),[h,O]=i.a.useState({}),[x,f]=i.a.useState([]),[v,y]=i.a.useState([]);i.a.useEffect(()=>{a.startDate>a.endDate?s("Start-Date should not be after From-Date",{variant:"warning"}):(o(!0),Yn(a).then(e=>{const t=e.map(e=>{var t;return Object(m.a)(Object(m.a)({},e),{},{amountRaw:e.amount,amount:null===(t=+e.amount)||void 0===t?void 0:t.toLocaleString()})});d(t),C(null,t)}).catch(e=>{s("Could not fetch",{variant:"error"})}).finally(e=>o(!1)))},[s,t,a]);const C=(e,t)=>{j([]);const a=e?Object(m.a)(Object(m.a)({},h),{},{[e.target.name]:e.target.value}):h,n=ki(e?l:t,a,"batchOl");O(a),f(n),D(n)},D=e=>{var t;const a=Object(Gt.size)(e),n=(null===(t=Object(Ya.e)(Si(e,"amountRaw")))||void 0===t?void 0:t.toLocaleString())+"/=";p({SUM:n,TOTAL:a})},w=Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(ce.q,{label:"SUM",value:In()(u,"SUM")}),Object(L.jsx)(ce.q,{label:"TNX",value:In()(u,"TOTAL")})]}),S=[{name:"check",label:"  ",options:{display:!1,viewColumns:!1,filter:!1,sort:!1,setCellProps:()=>({style:{width:10}}),customBodyRender:(e,t)=>Object(L.jsx)(L.Fragment,{children:Object(L.jsx)(Hi.a,{style:{padding:0,margin:0},onClick:e=>{e.target.checked?j([...b,t.rowData[1]]):j([...b.filter(e=>e!==t.rowData[1])])}})})}},...dc,{name:"actions",label:"  ",options:{empty:!0,viewColumns:!1,filter:!1,sort:!1,customBodyRender:(e,t)=>Object(L.jsx)(L.Fragment,{children:!1})}}];return Object(L.jsx)("div",{children:Object(L.jsx)(g.a,{container:!0,children:Object(L.jsxs)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:[Object(L.jsx)(ce.r,{loading:r}),Object(L.jsx)(Pa,{data:x,columns:S,filter:!1,noDownload:!1,sort:!0,customToolbar:()=>Object(L.jsx)(L.Fragment,{children:Object(L.jsx)(ce.w,{name:"batchOl",label:"Batch O/L",valueObjects:[{value:"",label:"All"}],values:Ti(l.map(e=>e.batchOl)),value:h.batchOl,onChange:C,style:{width:120,minWidth:"120px !important"}})}),title:w})]})})})};var jc=e=>{const[t,a]=i.a.useState(0),[n,c]=i.a.useState({startDate:lt()().subtract(15,"d").format("YYYY-MM-DD"),endDate:lt()().format("YYYY-MM-DD")}),[s,r]=i.a.useState(!1),o=e=>{c(Object(m.a)(Object(m.a)({},n),{},{[e.target.name]:e.target.value}))};return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(Ye.a,{elevation:0,children:[Object(L.jsx)(Dt.a,{title:Object(L.jsxs)(g.a,{container:!0,spacing:1,justify:"space-between",alignContent:"space-between",alignItems:"space-between",children:[Object(L.jsx)(ce.j,{Icon:Z.a,size:4,title:"Subscriptions",subtitle:"Financials"}),Object(L.jsxs)(g.a,{container:!0,spacing:2,xs:8,justify:"flex-end",alignContent:"center",alignItems:"center",style:{paddingRight:10,paddingTop:10},children:[Object(L.jsx)(ce.e,{label:"From Date",name:"startDate",value:n.startDate,onChange:o}),Object(L.jsx)(ce.e,{label:"To Date",name:"endDate",value:n.endDate,onChange:o}),Object(L.jsx)(f.a,{color:"primary",variant:"outlined",size:"medium",onClick:()=>a(t+1),style:{marginTop:2},children:"Search"}),Object(L.jsx)(ce.a,{size:3,onClicks:[e=>{c(Object(m.a)(Object(m.a)({},n),{},{startDate:lt()().subtract(30,"d").format("YYYY-MM-DD"),endDate:lt()().format("YYYY-MM-DD")}))},e=>{c(Object(m.a)(Object(m.a)({},n),{},{startDate:lt()().subtract(7,"d").format("YYYY-MM-DD"),endDate:lt()().format("YYYY-MM-DD")}))},e=>{c(Object(m.a)(Object(m.a)({},n),{},{startDate:lt()().format("YYYY-MM-DD"),endDate:lt()().format("YYYY-MM-DD")}))},e=>{c(Object(m.a)(Object(m.a)({},n),{},{startDate:lt()().add(-1,"d").format("YYYY-MM-DD"),endDate:lt()().add(-1,"d").format("YYYY-MM-DD")}))}],options:["One Month","Week","Today","Yesterday"]})]})]})}),Object(L.jsx)(Ae.a,{children:Object(L.jsx)(Ye.a,{children:Object(L.jsx)(bc,{changed:t,setChanged:a,searchFields:n,setOverlayDetail:r})})})]}),Object(L.jsx)(ce.g,{open:s,width:"lg",content:s.id?Object(L.jsx)(si,{overlayDetail:s,setOverlayDetail:r}):Object(L.jsx)(L.Fragment,{})})]})},mc=[{name:"id",options:{viewColumns:!1,filter:!1,sort:!1,display:!1}},{label:"HBL",name:"hbl",options:{viewColumns:!1,filter:!1,sort:!1,customBodyRender:function(e,t){return Object(L.jsx)("b",{children:e||"REF"+t.rowData[0]})}}},{label:"Name",name:"name",options:{viewColumns:!1,filter:!1,sort:!1,customBodyRender:function(e,t){return Object(L.jsx)(A.a,{label:e})}}},{name:"address",label:"Address",options:{viewColumns:!0,filter:!1,sort:!0}},{name:"date",label:"Pickup Date/Time",options:{viewColumns:!0,filter:!1,sort:!0}},{name:"cargoMode",label:"Cargo Mode",options:{viewColumns:!0,filter:!0,sort:!1}},{name:"driverName",label:"Driver",options:{viewColumns:!0,filter:!0,sort:!1}}],uc=a(735);var pc=e=>{const{setChanged:t,changed:a,searchFields:n,setOverlayDetail:c}=e,{enqueueSnackbar:s}=Object(me.b)(),r=Object(xn.useDialog)(),[o,l]=i.a.useState(!1),[d,b]=i.a.useState([]);i.a.useEffect(()=>{n.startDate>n.endDate?s("Start-Date should not be after From-Date",{variant:"warning"}):(l(!0),an.a.getDeletedCargo(n).then(e=>{const t=e.map(e=>Object(m.a)(Object(m.a)({},e),{},{date:In()(e,"pickupDate")+" "+In()(e,"pickupTime")}));b(t)}).catch(e=>{s("Could not fetch",{variant:"error"})}).finally(e=>l(!1)))},[s,a,n]);const j=[...mc,{name:"actions",label:"  ",options:{empty:!0,viewColumns:!1,filter:!1,sort:!1,customBodyRender:(e,n)=>Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(ce.A,{title:"View",icon:Object(L.jsx)(Hn.a,{}),onClick:()=>{c({id:n.rowData[0]})}}),Object(L.jsx)(ce.A,{title:"Undo Delete",icon:Object(L.jsx)(uc.a,{}),onClick:()=>{(e=>{let{id:n}=e;r.confirm(Object(ce.d)("Undo Delete 1 item","UNDO DELETE")).then(()=>{l(!0),an.a.undoDeleteCargo(n).then(e=>{s("Deleted Restored",{variant:"success"}),t(a+1)}).catch(e=>{s("Could not Restore",{variant:"error"})}).finally(e=>l(!1))})})({id:n.rowData[0]})}})]})}}];return Object(L.jsx)("div",{children:Object(L.jsx)(g.a,{container:!0,children:Object(L.jsxs)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:[Object(L.jsx)(ce.r,{loading:o}),Object(L.jsx)(Pa,{data:d,columns:j,filter:!0})]})})})},gc=a(296),hc=a.n(gc);var Oc=e=>{const[t,a]=i.a.useState(0),[n,c]=i.a.useState({startDate:lt()().subtract(15,"d").format("YYYY-MM-DD"),endDate:lt()().format("YYYY-MM-DD")}),[s,r]=i.a.useState(!1),o=e=>{c(Object(m.a)(Object(m.a)({},n),{},{[e.target.name]:e.target.value}))};return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(Ye.a,{elevation:0,children:[Object(L.jsx)(Dt.a,{title:Object(L.jsxs)(g.a,{container:!0,spacing:1,justify:"space-between",alignContent:"space-between",alignItems:"space-between",children:[Object(L.jsx)(ce.j,{Icon:hc.a,size:4,title:"Cancelled HBLs",subtitle:"OBA - Inquiry"}),Object(L.jsxs)(g.a,{container:!0,spacing:2,xs:8,justify:"flex-end",alignContent:"center",alignItems:"center",style:{paddingRight:10,paddingTop:10},children:[Object(L.jsx)(ce.e,{label:"From Date",name:"startDate",value:n.startDate,onChange:o}),Object(L.jsx)(ce.e,{label:"To Date",name:"endDate",value:n.endDate,onChange:o}),Object(L.jsx)(f.a,{color:"primary",variant:"outlined",size:"medium",onClick:()=>a(t+1),style:{marginTop:2},children:"Search"})]})]})}),Object(L.jsx)(Ae.a,{children:Object(L.jsx)(Ye.a,{children:Object(L.jsx)(pc,{changed:t,setChanged:a,searchFields:n,setOverlayDetail:r})})})]}),Object(L.jsx)(ce.g,{open:s,width:"lg",content:s.id?Object(L.jsx)(si,{overlayDetail:s,setOverlayDetail:r}):Object(L.jsx)(L.Fragment,{})})]})};const xc=i.a.lazy(()=>Promise.all([a.e(0),a.e(6)]).then(a.bind(null,1218)));var fc=e=>Object(L.jsx)(n.Suspense,{fallback:Object(L.jsx)("div",{children:"Loading PDF All Library..."}),children:Object(L.jsx)(xc,Object(m.a)({},e))});const vc=i.a.lazy(()=>Promise.all([a.e(8),a.e(7)]).then(a.bind(null,1217)));var yc=e=>Object(L.jsx)(n.Suspense,{fallback:Object(L.jsx)("div",{children:"Loading PDF/EXCEL/IMAGE Library..."}),children:Object(L.jsx)(vc,Object(m.a)({},e))});var Cc,Dc=async e=>{var t;const a=null===(t=e.startDate)||void 0===t?void 0:t.split(" ");return Object(At.c)("/v1/location/get?username=".concat(e.id,"&date=").concat(a[0].split("-").join("_"),"&startTime=").concat(a[1],"&branch=").concat(Object(je.d)().branch))};const wc=dn.a.div(Cc||(Cc=Object(on.a)(["\n    &:hover {\n        width: 42px;\n        height: 41px;\n        font-size: 35px;     \n        text-shadow: 0px 0px 15px ",";\n        z-index: 10;\n    }\n    position: absolute;\n    width: 38px;\n    height: 37px;\n    background-image: ",";\n    filter: ",";\n    background-size: contain;\n    text-align: center;\n    text-shadow: 1px 1px #ffffff;\n    background-repeat: no-repeat;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    -webkit-transform: translate(-50%,-50%);\n    -ms-transform: translate(-50%,-50%);\n    transform: translate(-50%,-50%);\n    cursor: grab;\n"])),z.a.shades.main,e=>"url(/app/images/a"+("LAST"===e.text?8:e.direction)+".png)",e=>"grayscale(".concat(1-e.order/e.total,")")),Sc=e=>{let{direction:t,text:a,total:n,order:i,onClick:c}=e;return Object(L.jsxs)(wc,{total:n,direction:t,order:i,alt:a,onClick:c,children:[a,"[",i,"]",Object(L.jsx)("br",{})]})};Sc.defaultProps={onClick:null};var kc,Tc=Sc;const Ic=dn.a.main(kc||(kc=Object(on.a)(["\n  width: 100%;\n  height: 80vh;\n"])));var Mc=e=>{const{path:t,coordinates:a,zoom:n}=e,[c,s]=i.a.useState({mapApiLoaded:!1,mapInstance:null,mapApi:null,geoCoder:null,places:[],center:[a.lat,a.lng],zoom:n,address:"",draggable:!0,lat:a.lat,lng:a.lng});i.a.useEffect(()=>{s({draggable:!0,zoom:n,center:[0,e.coordinates.lng],lat:0,lng:e.coordinates.lng}),setTimeout(()=>{console.log("timeoout"),s({draggable:!0,zoom:n,center:[e.coordinates.lat,e.coordinates.lng],lat:e.coordinates.lat,lng:e.coordinates.lng})},150)},[e.coordinates,n]);return console.log(c.lat,c.lng),Object(L.jsx)(Ic,{children:Object(L.jsxs)(ln.a,{center:c.center,zoom:c.zoom,draggable:c.draggable,onChange:e=>{let{center:t,zoom:a}=e;s(Object(m.a)(Object(m.a)({},c),{},{center:t,zoom:a}))},onChildClick:()=>console.log("child click"),bootstrapURLKeys:{key:mn,libraries:[]},yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:e=>{let{map:a,maps:n}=e;return((e,a)=>{(e=>{const t=[];let a=[];return e.forEach((n,i)=>{0===a.length||n.timestamp-e[i-1].timestamp<1800?a.push(n):(t.push([...a]),a=[])}),t})(t).forEach(t=>{new a.Polyline({path:t,geodesic:!0,strokeColor:z.a.shades.main,strokeOpacity:.5,strokeWeight:2}).setMap(e)}),s(Object(m.a)(Object(m.a)({},c),{},{mapApiLoaded:!0,mapInstance:e,mapApi:a}))})(a,n)},children:[t.map((e,a)=>Object(L.jsx)(Tc,{order:a,direction:e.direction,total:t.length,text:e.date,lat:e.lat,lng:e.lng})),Object(L.jsx)(Tc,{order:0,total:1,text:"LAST",lat:a.lat+2e-4,lng:a.lng+1e-4})]})})};const Ec=(e,t)=>{const a=Object(Gt.orderBy)(e,["date"]),n=[];a.forEach((e,t)=>{if(t!==a.length-1){const i=a[t+1].lat-e.lat,c=a[t+1].lng-e.lng;if(i<2e-4&&c<2e-4)return!1;i<.001&&c<.001?(n.push(e),n.push(Object(m.a)(Object(m.a)({},e),{},{lat:e.lat+i/2,lng:e.lng+c/2}))):n.push(e)}else n.push(e)});const i=.414,c=2.414;return n.map((e,t)=>{let a=8;if(t!==n.length-1){const s=n[t+1].lat-e.lat,r=n[t+1].lng-e.lng;if(0===r)a=s>0?2:6;else{const e=Math.abs(s)/Math.abs(r);a=r>0&&s>0?e<i?0:e>c?2:1:r<0&&s>0?e<i?4:e>c?2:3:r>0&&s<0?e<i?0:e>c?6:7:e<i?4:e>c?6:5}}const s=lt()(1e3*e.date).format("HH:mm"),r=lt()(1e3*e.date).format("yyyy-MM-DD");return Object(m.a)(Object(m.a)({},e),{},{timestamp:e.date,date:s,dateTime:r,direction:a})}).filter(e=>e.dateTime===t)};var Yc=e=>{const{changed:t,searchFields:a,trackSelectedHour:n}=e,{enqueueSnackbar:c}=Object(me.b)(),[s,r]=i.a.useState(!1),[o,l]=i.a.useState(11),[d,b]=i.a.useState({lat:25.274,lng:51.295}),[j,m]=i.a.useState(Ec({}));return i.a.useEffect(()=>{r(!0),Dc(a).then(e=>{var t;const n=(e=>{const t=[];for(var a in e)if(e.hasOwnProperty(a)){const n=e[a].split(",");t.push({date:+a,lat:+n[0],lng:+n[1]})}return t})(e);n.length>0&&b({lat:n[0].lat,lng:n[0].lng});const i=Ec(n,null===(t=a.startDate.split(" "))||void 0===t?void 0:t[0]);i.length>0?(b(i[i.length-1]),m(i)):m([])}).catch(e=>{c("Could not Fetch",{variant:"error"})}).finally(e=>r(!1))},[c,t,a]),i.a.useEffect(()=>{if(isNaN(n)||0===j.length)return;const e=j.filter(e=>e.date<(n<10?"0"+n:n)+":59");e.length>0?(l(17),b(j[e.length-1])):b(j[0])},[n,j]),Object(L.jsx)("div",{children:Object(L.jsx)(g.a,{container:!0,children:Object(L.jsxs)(g.a,{item:!0,xs:12,sm:12,md:12,lg:12,xl:12,children:[Object(L.jsx)(ce.r,{loading:s}),j.length>0&&!s&&Object(L.jsx)(Mc,{zoom:o,path:j,coordinates:d,setCoordinates:b}),0===j.length&&!s&&Object(L.jsx)("div",{style:{padding:20},children:"No tracking data"})]})})})},Ac=a(736);const Nc=["Day before","Yesterday","Today"];var zc=e=>{var t,a;const{enqueueSnackbar:n}=Object(me.b)(),[c,s]=i.a.useState(0),[r]=i.a.useState(0),[o]=i.a.useState(24),[l,d]=i.a.useState(),[b,j]=i.a.useState([]),[u,p]=i.a.useState([]),[h,O]=i.a.useState({id:"",startDate:lt()().subtract(0,"d").format("YYYY-MM-DD HH:mm"),timeFrame:Nc[2]});return i.a.useEffect(()=>{va().then(e=>{j(Object(Gt.filter)(e,e=>!e.deleted)),p(Object(Gt.map)(Object(Gt.filter)(e,e=>!e.deleted),e=>({value:e.username,label:e.username})))}).catch(e=>{n("Could not fetch",{variant:"error"})})},[n]),Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(Ye.a,{elevation:0,children:[Object(L.jsx)(Dt.a,{title:Object(L.jsxs)(g.a,{container:!0,spacing:1,justify:"space-between",alignContent:"space-between",alignItems:"space-between",children:[Object(L.jsx)(ce.j,{Icon:Ac.a,size:2,title:"Manage Drivers",subtitle:"OBA Tracking"}),Object(L.jsx)(g.a,{item:!0,md:6,children:Object(L.jsx)(ce.x,{shiftStart:+(null===(t=b.find(e=>e.username===h.id))||void 0===t?void 0:t.shiftStart)||14,shiftEnd:+(null===(a=b.find(e=>e.username===h.id))||void 0===a?void 0:a.shiftEnd)||2,setTrackSelectedHour:d,trackStartHour:r,trackEndHour:o})}),Object(L.jsxs)(g.a,{container:!0,md:4,justify:"flex-end",alignContent:"center",alignItems:"center",children:[Object(L.jsx)(ce.v,{size:4,label:"Driver",name:"id",valueObjects:u,value:h.id,onChange:e=>{O(Object(m.a)(Object(m.a)({},h),{},{[e.target.name]:e.target.value}))}}),Object(L.jsx)(wt.a,{color:"primary",style:{marginLeft:10,marginTop:2},children:Nc.map(e=>Object(L.jsx)(f.a,{size:"small",style:{height:35},variant:e===h.timeFrame?"contained":"outlined",onClick:t=>(e=>{let t;e===Nc[0]?t=lt()().subtract(2,"d").format("YYYY-MM-DD HH:mm"):e===Nc[1]?t=lt()().subtract(1,"d").format("YYYY-MM-DD HH:mm"):e===Nc[2]&&(t=lt()().subtract(0,"d").format("YYYY-MM-DD HH:mm")),O(Object(m.a)(Object(m.a)({},h),{},{timeFrame:e,startDate:t})),s(c+1)})(e),children:e}))})]})]})}),Object(L.jsx)(Ae.a,{children:Object(L.jsx)(Ye.a,{children:h.id&&Object(L.jsx)(Yc,{trackSelectedHour:l,changed:c,setChanged:s,searchFields:h})})})]})})};var Lc=e=>{const{changed:t,searchFields:a,setOverlayDetail:n}=e,{enqueueSnackbar:c}=Object(me.b)(),[s,r]=i.a.useState(!1),[o,l]=i.a.useState([]),[d,b]=i.a.useState([]),[j,u]=i.a.useState([]),[p,h]=i.a.useState([]);i.a.useEffect(()=>{0!==t&&(a.startDate>a.endDate?c("Start-Date should not be after From-Date",{variant:"warning"}):(r(!0),l([{},{}]),u([{}]),h([{},{},{},{}]),Ri.getAllHbl({startDate:a.startDate,endDate:a.endDate}).then(e=>{l([]),b([]),u([]),h([]);const t=lt()().format("YYYY-MM-DD"),a=lt()().format("HH"),n=Object(Gt.groupBy)(e,e=>(e.driverId?"y":"n")+e.fetched);Object(Gt.forOwn)(n,(e,n)=>{if("n-1"===n){const n=e.map(e=>Object(m.a)(Object(m.a)({},e),{},{address:xi(e.address,19),slAddress:xi(e.slAddress,19),now:e.createdDate===t&&e.createdTime.startsWith(a)}));l(n)}else if("y-1"===n){const n=e.map(e=>Object(m.a)(Object(m.a)({},e),{},{address:xi(e.address,19),slAddress:xi(e.slAddress,19),now:e.createdDate===t&&e.createdTime.startsWith(a)}));b(n)}else if("y12"===n){const n=e.map(e=>Object(m.a)(Object(m.a)({},e),{},{address:xi(e.address,19),slAddress:xi(e.slAddress,19),now:e.pickedUpDate===t&&e.pickedUpTime.startsWith(a)}));u(n)}else if("y42"===n){const n=e.map(e=>Object(m.a)(Object(m.a)({},e),{},{address:xi(e.address,19),slAddress:xi(e.slAddress,19),now:e.deliveredDate===t&&e.deliveredTime.startsWith(a)}));h(n)}})}).catch(e=>{l([]),b([]),u([]),h([]),c("Could not fetch",{variant:"error"})}).finally(e=>r(!1))))},[c,t,a.startDate,a.endDate]);const O=e=>n({id:e});return Object(L.jsx)("div",{children:Object(L.jsxs)(g.a,{container:!0,style:{paddingBottom:20},children:[Object(L.jsx)(g.a,{item:!0,md:12,lg:12,children:Object(L.jsx)(ce.r,{loading:s})}),!s&&o.length+d.length+j.length+p.length>0&&Object(L.jsxs)(g.a,{container:!0,justify:"space-around",md:12,lg:12,style:{marginBottom:10},children:[Object(L.jsx)(ce.k,{title:"Info Received ["+o.length+"]",subtitle:"Not assigned",style:{borderRight:"5px solid",borderLeft:"5px solid",paddingLeft:5,paddingRight:5,borderRadius:5}}),Object(L.jsx)(ce.k,{title:"Driver assigned ["+d.length+"]",subtitle:"Not picked",style:{borderRight:"5px solid "+z.a.shades.main,borderLeft:"5px solid "+z.a.shades.main,paddingLeft:5,paddingRight:5,borderRadius:5}}),Object(L.jsx)(ce.k,{title:"In Transit ["+j.length+"]",subtitle:"Not delivered",style:{borderRight:"5px solid "+z.a.secondary.main,borderLeft:"5px solid "+z.a.secondary.main,paddingLeft:5,paddingRight:5,borderRadius:5}}),Object(L.jsx)(ce.k,{title:"Items Delivered ["+p.length+"]",subtitle:"Job Completed",style:{borderRight:"5px solid "+z.a.shades.green,borderLeft:"5px solid "+z.a.shades.green,paddingLeft:5,paddingRight:5,borderRadius:5}})]}),Object(L.jsx)(g.a,{item:!0,md:3,lg:3,children:o.map(e=>Object(L.jsx)(g.a,{item:!0,md:12,lg:12,children:Object(L.jsx)(ce.c,{data:e,loading:s,onClick:O})}))}),Object(L.jsx)(g.a,{item:!0,md:3,lg:3,children:d.map(e=>Object(L.jsx)(g.a,{item:!0,md:12,lg:12,children:Object(L.jsx)(ce.c,{data:e,loading:s,onClick:O,color:z.a.shades.main})}))}),Object(L.jsx)(g.a,{item:!0,md:3,lg:3,children:j.map(e=>Object(L.jsx)(g.a,{item:!0,md:12,lg:12,children:Object(L.jsx)(ce.c,{data:e,loading:s,onClick:O,color:z.a.secondary.main})}))}),Object(L.jsx)(g.a,{item:!0,md:3,lg:3,children:p.map(e=>Object(L.jsx)(g.a,{item:!0,md:12,lg:12,children:Object(L.jsx)(ce.c,{data:e,loading:s,onClick:O,color:z.a.shades.green})}))})]})})},Rc=a(450),Bc=a.n(Rc);var Fc=e=>{const[t,a]=i.a.useState(0),[n,c]=i.a.useState({hbl:"",startDate:lt()().subtract(3,"d").format("YYYY-MM-DD"),endDate:lt()().format("YYYY-MM-DD")}),[s,r]=i.a.useState(!1),o=e=>{c(Object(m.a)(Object(m.a)({},n),{},{[e.target.name]:e.target.value}))};return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(Ye.a,{elevation:0,children:[Object(L.jsx)(Dt.a,{title:Object(L.jsxs)(g.a,{container:!0,spacing:1,justify:"space-between",alignContent:"space-between",alignItems:"space-between",children:[Object(L.jsx)(ce.j,{Icon:Bc.a,size:2,title:"HBL/JOBs",subtitle:"Grid Overview"}),Object(L.jsxs)(g.a,{container:!0,spacing:2,xs:10,justify:"flex-end",alignContent:"center",alignItems:"center",style:{paddingRight:10,paddingTop:10},children:[Object(L.jsx)(ce.e,{size:2,label:"From Date",name:"startDate",value:n.startDate,onChange:o}),Object(L.jsx)(ce.e,{size:2,label:"To Date",name:"endDate",value:n.endDate,onChange:o}),Object(L.jsx)(f.a,{startIcon:Object(L.jsx)(Ei.a,{}),color:"primary",variant:"outlined",size:"medium",onClick:()=>a(t+1),style:{marginTop:2},children:"Search"}),Object(L.jsx)(ce.a,{size:2,onClicks:[e=>{c(Object(m.a)(Object(m.a)({},n),{},{startDate:lt()().subtract(7,"d").format("YYYY-MM-DD"),endDate:lt()().format("YYYY-MM-DD")})),a(t+1)},e=>{c(Object(m.a)(Object(m.a)({},n),{},{startDate:lt()().format("YYYY-MM-DD"),endDate:lt()().format("YYYY-MM-DD")})),a(t+1)},e=>{c(Object(m.a)(Object(m.a)({},n),{},{startDate:lt()().add(-1,"d").format("YYYY-MM-DD"),endDate:lt()().add(-1,"d").format("YYYY-MM-DD")})),a(t+1)}],options:["One Week","Today","Yesterday"]})]})]})}),Object(L.jsx)(Ae.a,{children:Object(L.jsx)(Ye.a,{children:Object(L.jsx)(Lc,{changed:t,setChanged:a,history:e.history,searchFields:n,setOverlayDetail:r})})})]}),Object(L.jsx)(ce.g,{open:s,width:"lg",content:s.id?Object(L.jsx)(si,{overlayDetail:s,setOverlayDetail:r}):Object(L.jsx)(L.Fragment,{})})]})};const Pc=[["Like waves, there could be rough days and smooth ones.","Like a ship, gracefully sail through both."],["Dont let fear stop you from reaching horizons.",""],["Your only limit is You",""],["When we strive to become better than we are","everything around us becomes better too"],["Either you run the day or the day runs you.",""],["",""]];var Hc=e=>{const t=Math.floor(Math.random()*Pc.length),a=Pc[t];return Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)("div",{style:{width:"100%",height:"90vh",backgroundColor:"#fafafa",marginTop:-8},children:[Object(L.jsx)("div",{style:{position:"absolute",top:80,left:"40%",color:"#777",fontSize:20,fontFamily:"American Typewriter, serif"},children:"You are doing great!"}),Object(L.jsx)("div",{style:{position:"absolute",top:110,left:"40%",color:"#777"},children:a[0]}),Object(L.jsx)("div",{style:{position:"absolute",top:128,left:"40%",color:"#777"},children:a[1]})]})})};t.a=()=>Object(L.jsxs)(c.d,{children:[Object(L.jsx)(c.a,{exact:!0,from:"/",to:"/dashboard"}),Object(L.jsx)(we,{component:ta,path:"/dashboard",types:[te.a.pickup,te.a.delivery],exact:!0,layout:ge}),Object(L.jsx)(we,{component:ha,path:"/efficiency",types:[te.a.pickup,te.a.delivery,te.a.domestic],exact:!0,layout:ge}),Object(L.jsx)(we,{component:wa,path:"/batch-summary",types:[te.a.pickup,te.a.domestic],exact:!0,layout:ge}),Object(L.jsx)(we,{component:Ea,path:"/sales",types:[te.a.pickup,te.a.domestic],exact:!0,layout:ge}),Object(L.jsx)(we,{component:qa,path:"/cross-branch",types:[te.a.pickup,te.a.delivery],exact:!0,layout:ge}),Object(L.jsx)(we,{component:$a,path:"/shipment-360",types:[te.a.pickup,te.a.delivery],exact:!0,layout:ge}),Object(L.jsx)(we,{component:ri,path:"/new-member",exact:!0,layout:ge}),Object(L.jsx)(we,{component:gi,path:"/edit/:id",types:[te.a.pickup,te.a.domestic],exact:!0,layout:ge}),Object(L.jsx)(we,{component:Ci,path:"/search",types:[te.a.pickup,te.a.delivery,te.a.domestic],exact:!0,layout:ge}),Object(L.jsx)(we,{component:Ai,path:"/reports",types:[te.a.domestic],exact:!0,layout:ge}),Object(L.jsx)(we,{component:Fc,path:"/grid",types:[te.a.domestic],exact:!0,layout:ge}),Object(L.jsx)(we,{component:Pi,path:"/cargo-status",types:[te.a.pickup,te.a.delivery,te.a.domestic,te.a.pickup_customer],exact:!0,layout:ge}),Object(L.jsx)(we,{component:Qi,path:"/pending",exact:!0,layout:ge}),Object(L.jsx)(we,{component:lc,path:"/cash-settlements",types:[te.a.pickup],exact:!0,layout:ge}),Object(L.jsx)(we,{component:jc,path:"/subscriptions",types:[te.a.pickup],exact:!0,layout:ge}),Object(L.jsx)(we,{component:Oc,path:"/cancelled-hbls",types:[te.a.pickup,te.a.domestic],exact:!0,layout:ge}),Object(L.jsx)(we,{component:Rn,path:"/print/:id/:branch/:tab",types:[te.a.pickup,te.a.delivery],exact:!0,layout:Oe}),Object(L.jsx)(we,{component:fc,path:"/print-all/:id/:branch/:tab",types:[te.a.pickup,te.a.delivery],exact:!0,layout:Oe}),Object(L.jsx)(we,{component:yc,path:"/view-docs/:id/:filename",types:[te.a.pickup,te.a.delivery,te.a.domestic],exact:!0,layout:Oe}),Object(L.jsx)(we,{component:zc,path:"/driver/track",types:[te.a.pickup,te.a.delivery,te.a.domestic],exact:!0,layout:ge}),Object(L.jsx)(we,{component:Hc,path:"/cool/relax",types:[te.a.pickup,te.a.delivery,te.a.domestic,te.a.pickup_customer],exact:!0,layout:ge}),Object(L.jsx)(ke,{component:Ie,path:"/sign-in",exact:!0,layout:Oe}),Object(L.jsx)(ke,{component:Ke,path:"/user/verify",exact:!0,layout:Oe}),Object(L.jsx)(ke,{component:Ct,path:"/user/profile",exact:!0,layout:Oe}),Object(L.jsx)(ke,{component:Ee,path:"/not-found",exact:!0,layout:Oe}),Object(L.jsx)(c.a,{to:"/not-found"})]})},452:function(e,t,a){"use strict";var n=a(135),i=a(15),c={fontFamily:"'IBM Plex Sans', sans-serif",h1:{fontWeight:500,fontSize:"35px",letterSpacing:"-0.24px",lineHeight:"40px"},h2:{fontWeight:500,fontSize:"29px",letterSpacing:"-0.24px",lineHeight:"32px"},h3:{fontWeight:500,fontSize:"24px",letterSpacing:"-0.06px",lineHeight:"28px"},h4:{fontWeight:500,fontSize:"20px",letterSpacing:"-0.06px",lineHeight:"24px"},h5:{fontWeight:500,fontSize:"16px",letterSpacing:"-0.05px",lineHeight:"20px"},h6:{fontWeight:500,fontSize:"14px",letterSpacing:"-0.05px",lineHeight:"20px"},subtitle1:{fontSize:"16px",letterSpacing:"-0.05px",lineHeight:"25px"},subtitle2:{color:i.a.text.secondary,fontWeight:400,fontSize:"14px",letterSpacing:"-0.05px",lineHeight:"21px"},body1:{fontSize:"14px",letterSpacing:"-0.05px",lineHeight:"21px"},body2:{color:i.a.text.secondary,fontSize:"12px",letterSpacing:"-0.04px",lineHeight:"18px"},button:{fontSize:"14px"},caption:{fontSize:"11px",letterSpacing:"0.33px",lineHeight:"13px"},overline:{color:i.a.text.secondary,fontSize:"11px",fontWeight:500,letterSpacing:"0.33px",lineHeight:"13px",textTransform:"uppercase"}},s={root:{margin:"0 8px",padding:8,fontSize:20,color:i.a.icon,"&:hover":{cursor:"pointer"}}},r=a(4),o={MuiButton:{contained:{boxShadow:"0 1px 1px 0 rgba(0,0,0,0.14), 0 2px 1px -1px rgba(0,0,0,0.12), 0 1px 3px 0 rgba(0,0,0,0.20)",backgroundColor:"#FFFFFF"}},MuiIconButton:s,MuiPaper:{elevation1:{boxShadow:"none"},elevation4:{boxShadow:"none"}},MuiTableCell:{root:Object(r.a)(Object(r.a)({},c.body1),{},{borderBottom:"1px solid ".concat(i.a.divider)})},MuiTableHead:{root:{backgroundColor:a(10).colors.grey[50]}},MuiTypography:{gutterBottom:{marginBottom:8}},MuiDialogTitle:{root:{color:i.a.black}},MUIDataTableBodyCell:{root:{}},MUIDataTableHeadCell:{root:{padding:"8px !important",border:"1px solid "+i.a.shades.light,color:i.a.shades.main+" !important"}},MUIDataTableToolbar:{root:{minHeight:"12% !important",maxHeight:"12% !important",padding:"0 4px"},iconActive:{color:i.a.tableHeader.color+" !important"},icon:{color:i.a.tableHeader.color+" !important"}},MUITable:{root:{overflowY:"scroll"}},MUIDataTableFilterList:{root:{paddingBottom:"8px",margin:"0 !important",background:"none"}},MUIDataTable:{paper:{height:"100%",whiteSpace:"nowrap",padding:"8px"},responsiveScrollFullHeight:{height:"80% ",overflowY:"scroll"},responsiveScrollMaxHeight:{maxHeight:"none"},responsiveScroll:{maxHeight:"none"}},MuiLink:{root:{cursor:"pointer"}},MuiExpansionPanelSummary:{root:{minHeight:"45px !important",height:45,background:i.a.shades.light}},MuiStepper:{root:{padding:"24px 0","& .MuiStepLabel-root":{padding:"8px 0"},"& .MuiStepLabel-label":{fontSize:"1rem",fontWeight:500,"@media (min-width: 600px)":{fontSize:"1.125rem"}},"& .MuiStepIcon-root":{width:"32px",height:"32px",fontSize:"1.5rem","@media (min-width: 600px)":{width:"36px",height:"36px",fontSize:"1.75rem"}},"& .MuiStepIcon-text":{fontSize:"1rem",fontWeight:"bold","@media (min-width: 600px)":{fontSize:"1.125rem"}},"& .MuiStepConnector-line":{borderTopWidth:"2px","@media (min-width: 600px)":{borderTopWidth:"3px"}}}}};const l=Object(n.a)({props:{MuiButton:{size:"small"},MuiFilledInput:{margin:"dense"},MuiFormHelperText:{margin:"dense"},MuiIconButton:{size:"small"},MuiInputBase:{margin:"dense"},MuiInputLabel:{margin:"dense"},MuiListItem:{dense:!0},MuiOutlinedInput:{margin:"dense"},MuiFab:{size:"small"},MuiTable:{size:"small"},MuiTextField:{margin:"dense"},MuiToolbar:{variant:"dense"}},palette:i.a,typography:c,overrides:o,zIndex:{appBar:1200,drawer:1100}});t.a=l},466:function(e,t,a){"use strict";a.r(t);a(474),a(1);var n=a(28),i=a.n(n),c=a(420),s=a(0);i.a.render(Object(s.jsx)(c.a,{}),document.getElementById("root"))},47:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(11),i=a.n(n),c=a(7);const s=(e,t)=>"".concat(t||"?","audit=").concat(i()().format("YYYY-MM-DD_HH-mm"),"_").concat(Object(c.d)().branch,"_").concat(e,"_").concat(Object(c.d)().username)},474:function(e,t,a){(function(e){"undefined"===typeof e&&(window.process={env:{REACT_APP_OLD_TYPE:"OBA",REACT_APP_BASE_URL:"",NODE_ENV:"development"}})}).call(this,a(116))},55:function(e,t,a){"use strict";var n=a(4),i=a(13),c=a(7),s=a(60),r=a(24);const o="members";t.a={get:async e=>{const t=[];return e.id?Object(s.c)(o,e.id):(e.batch&&t.push(Object(r.n)("batchOl","==",e.batch)),e.nameWithInitials&&(t.push(Object(r.j)("nameWithInitials")),t.push(Object(r.m)(e.nameWithInitials)),t.push(Object(r.e)(e.nameWithInitials+"\uf8ff"))),Object(s.a)(o,...t))},getMax:async()=>(console.log("[MOCK] getMax: Returning mock value 1000"),1e3),getMembersByBatch:async()=>Object(s.b)(o,"sum"),getNextSequence:async(e,t)=>(console.log("[MOCK] getNextSequence: Returning mock value 1"),1),updatePassword:async(e,t)=>Object(i.f)("/v1/user/update-password?branch=".concat(Object(c.d)().branch),Object(n.a)({username:e||Object(c.d)().username},t)),resetPassword:async(e,t)=>Object(i.f)("/v1/user/reset-password?branch=".concat(Object(c.d)().branch),Object(n.a)({username:e||Object(c.d)().username},t)),create:async e=>(console.log("[MOCK] create: Would create member with data:",e),new Promise(e=>{setTimeout(()=>{const t="mock-member-"+Date.now();console.log("[MOCK] create: Returning mock ID:",t),e(t)},500)})),remove:async(e,t)=>Object(i.a)("/v1/user/delete/".concat(e,"?branch=").concat(Object(c.d)().branch),t),update:async(e,t)=>Object(i.f)("/v1/user/update-type/".concat(e,"?branch=").concat(Object(c.d)().branch),t),updateSettings:async(e,t)=>Object(i.f)("/v1/user/update-settings/".concat(e,"?branch=").concat(Object(c.d)().branch),t),updateSelf:async(e,t)=>(console.log("[MOCK] updateSelf: Would update member",e,"with data:",t),new Promise(e=>{setTimeout(()=>{console.log("[MOCK] updateSelf: Mock update successful"),e({success:!0})},500)}))}},60:function(e,t,a){"use strict";a.d(t,"e",function(){return l}),a.d(t,"c",function(){return d}),a.d(t,"a",function(){return b}),a.d(t,"b",function(){return j}),a.d(t,"d",function(){return m});var n=a(4),i=a(115),c=a(24);const s={apiKey:"AIzaSyCuRogbNMfuUz5j_L-h8eEpJrvOSV9DF-E",authDomain:"ob-test-41e9f.firebaseapp.com",projectId:"ob-test-41e9f",storageBucket:"ob-test-41e9f.appspot.com",messagingSenderId:"217234626807",appId:"1:217234626807:web:958d5eb68520d053a4dbf2"},r=i.a.initializeApp(s);i.a;let o=null;const l=()=>(o||(o=Object(c.i)(r)),o),d=async(e,t)=>{const a=Object(c.d)(l(),e,t),n=await Object(c.g)(a);return n.exists()?n.data():{}},b=async function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];const s=Object(c.k)(Object(c.b)(l(),e),...a);return(await Object(c.h)(s)).docs.map(e=>Object(n.a)(Object(n.a)({},e.data()),{},{id:e.id}))},j=async(e,t)=>{const a=Object(c.b)(l(),e);return(await Object(c.f)(a)).data().count},m=async(e,t)=>(await Object(c.a)(Object(c.b)(l(),e),t)).id},625:function(e,t){},626:function(e,t){},633:function(e,t,a){"use strict";const n=()=>{document.querySelectorAll("iframe").forEach(e=>{const t=window.getComputedStyle(e),a=parseInt(t.zIndex,10);"fixed"!==t.position||"0px"!==t.top&&"0"!==t.top||"0px"!==t.left&&"0"!==t.left||"100%"!==t.width&&t.width!==window.innerWidth+"px"||"100%"!==t.height&&t.height!==window.innerHeight+"px"||!(a>1e6||2147483647===a)||(console.warn("Removing suspicious overlay iframe:",e),e.remove())})};if("undefined"!==typeof window){const e=()=>{n();const e=new MutationObserver(()=>{n()});document.body&&e.observe(document.body,{childList:!0,subtree:!0})};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}},7:function(e,t,a){"use strict";a.d(t,"d",function(){return j}),a.d(t,"e",function(){return m}),a.d(t,"c",function(){return u}),a.d(t,"a",function(){return p}),a.d(t,"b",function(){return g});var n=a(4),i=a(113),c=a(18),s=a(13);const r={client:{branch:"",type:"",displayName:"OBA MANAGEMENT",eduType:["Course","Diploma","HND","Degree","Masters","MBA","Doctorate"],eduCategory:["IT","Bio","Construction","Engineering","Medicine","Law","Marketting","Psycology","Accounting","Management","Sales","Islamic Studies"].sort(),workCategory:["IT","Bio","Construction","Engineering","Doctor","Lawyer","Marketting","Psycologist","Accountant","Manager","Executive","Moulavi"].sort(),warehouseLocation:["Colombo","Nintavur","Kurunegala"],userType:"editor",username:"base_"}},o={client:{}},l={client:[]},d={client:{}},b={qatar:{parent:"",phone:"",website:"",barcode:!0,qrcode:!1,printPriceBreakdown:!1,qidLabel:"",currency:""},"philippines-dropex":{parent:"dropex",phone:"Philippines: +63966 50895",website:"063092/063530",barcode:!0,qrcode:!1,printPriceBreakdown:!0},"china-dropex":{parent:"dropex",phone:"China: +63966 508",website:"063092/0635304",barcode:!0,qrcode:!1,printPriceBreakdown:!0},default:{parent:"oba",phone:" ",website:" ",barcode:!0,qrcode:!1,printPriceBreakdown:!1}},j=()=>r.client,m=()=>o.client,u=()=>l.client,p=()=>d.client,g=e=>b[e]||b.default;t.f={getBranchDetails:async e=>{const t=localStorage.getItem("mw-u-type"),a=await Object(s.c)("/v1/client/branch/".concat(e.toLowerCase(),"?userType=").concat(t,"&userName=").concat(localStorage.getItem("mw-u")));try{const e="string"===typeof a.branchData?JSON.parse(a.branchData.split("'").join('"')):a.branchData;r.client=Object(n.a)(Object(n.a)({},e),{},{lang:a.lang||i.a.ENGLISH,backupEmail:a.backupEmail||"N/A",username:localStorage.getItem("mw-u"),userType:t,type:t===c.c.customer?c.a.pickup_customer:e.type}),"dubai"===r.client.branch&&(r.client.packageType=["CTN [70x45x45] (919,748.2)","CTN [80x60x60] (566,428)","CTN [112x72x72] (471,368.7)","1M [124x90x83] (301.2,192.2)","1.5M [124x100x130] (301.2,192.2)","2M [124x124x130] (301.2,192.2)","2.5M [155x124x130] (301.2,192.2)","3M [185x124x130] (301.2,192.2)","3.5M [230x124x130] (301.2,192.2)","4M [245x124x130] (301.2,192.2)","CBM PER (360,230)","TILE CBM PER (525,425)",...r.client.packageType]);const s="string"===typeof a.userData?JSON.parse(a.userData.split("'").join('"')):a.userData;o.client=Object(n.a)({},s);const b="string"===typeof a.priceData?JSON.parse(a.priceData.split("'").join('"')):a.priceData;l.client=[...b];const j=a.customerData||{};return d.client=Object(n.a)({},j),r.client}catch(b){return console.log(b),{}}}}},88:function(e,t,a){"use strict";a.r(t),a.d(t,"signInWithGoogle",function(){return o}),a.d(t,"sendSignInLinkToEmail",function(){return l}),a.d(t,"isSignInWithEmailLink",function(){return d}),a.d(t,"signInWithEmailLink",function(){return b}),a.d(t,"getAuth",function(){return j}),a.d(t,"fs",function(){return m});var n=a(115);a(573);const i={apiKey:"AIzaSyCuRogbNMfuUz5j_L-h8eEpJrvOSV9DF-E",authDomain:"ob-test-41e9f.firebaseapp.com",projectId:"ob-test-41e9f",storageBucket:"ob-test-41e9f.appspot.com",messagingSenderId:"217234626807",appId:"1:217234626807:web:958d5eb68520d053a4dbf2"};let c;try{c=n.a.app()}catch(u){c=n.a.initializeApp(i)}const s=n.a.auth(),r=new n.a.auth.GoogleAuthProvider;r.setCustomParameters({prompt:"select_account"});const o=()=>s.signInWithPopup(r),l=async e=>{const t={url:"".concat(window.location.origin,"/sign-in?email=").concat(encodeURIComponent(e)),handleCodeInApp:!0};await s.sendSignInLinkToEmail(e,t),localStorage.setItem("emailForSignIn",e)},d=e=>s.isSignInWithEmailLink(e),b=async(e,t)=>await s.signInWithEmailLink(e,t),j=()=>s,m=n.a},91:function(e,t,a){"use strict";t.a=async function(e,t){if(t)return console.log(e.headers.get("content-type")),await e.blob();let a=e.headers.get("content-type"),n=null;if(a&&a.indexOf("application/json")>-1){let t=await e.text();try{n=JSON.parse(t)}catch(i){n=t}}else n=await e.text();if(e.ok)return n||e;throw 401!==e.status&&403!==e.status||(window.location.href.includes("/customer/")?window.location="".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/circle",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_OLD_TYPE:"OBA"}).REACT_APP_BASE_URL||"","/sign-in/customer"):window.location.href.includes("driver-app")&&window.location.href.includes("/driver")?window.Android.mwLogout():window.location="".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/circle",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_OLD_TYPE:"OBA"}).REACT_APP_BASE_URL||"","/sign-in")),n||e}}},[[466,2,3]]]);
//# sourceMappingURL=main.a73e61fa.chunk.js.map