{"version":3,"sources":["business/views/loading/ViewDocs/suspense.js"],"names":["UI","props","enqueueSnackbar","useSnackbar","id","match","params","filename","details","setDetails","React","useState","loading","setLoading","imgRef","useRef","useEffect","Service","download","then","file","endsWith","ExcelRenderer","err","resp","console","log","cols","rows","current","src","URL","createObjectURL","text","r","catch","e","variant","finally","_jsxs","_Fragment","children","Grid","container","style","padding","_jsx","md","Typography","OutTable","data","columns","tableClassName","tableHeaderRowClass","split","map","i","ref","alt"],"mappings":"6GAAA,8EAyDeA,UAnDHC,IACR,MAAM,gBAAEC,GAAoBC,cACtBC,EAAKH,EAAMI,MAAMC,OAAOF,GACxBG,EAAWN,EAAMI,MAAMC,OAAOC,UAC7BC,EAASC,GAAcC,IAAMC,SAAS,OACtCC,EAASC,GAAcH,IAAMC,UAAS,GACvCG,EAASJ,IAAMK,OAAO,MA6B5B,OA3BAL,IAAMM,UAAU,KACZC,IAAQC,SAASd,GACZe,KAAMC,IACCb,EAASc,SAAS,SAClBC,wBAAcF,EAAM,CAACG,EAAKC,KACnBD,EACHE,QAAQC,IAAIH,GAGRd,EAAW,CACXkB,KAAMH,EAAKG,KACXC,KAAMJ,EAAKI,SAKdrB,EAASc,SAAS,SAAWd,EAASc,SAAS,QACpDP,EAAOe,QAAQC,IAAMC,IAAIC,gBAAgBZ,GAEpCb,EAASc,SAAS,SACvBD,EAAKa,OAAOd,KAAKe,GAAKzB,EAAWyB,MAEtCC,MAAMC,IACLlC,EAAgB,kCAAmC,CAAEmC,QAAS,YAC/DC,QAAQF,GAAKvB,GAAW,KAChC,CAACX,EAAiBE,EAAIG,IAErBK,EAAgB2B,eAAAC,WAAA,CAAAC,SAAA,CAAE,WAASlC,KACvBgC,eAACG,IAAI,CAACC,WAAS,EAACC,MAAO,CAACC,QAAS,IAAIJ,SAAA,CACzCK,cAACJ,IAAI,CAACK,GAAI,GAAGN,SACTF,eAACS,IAAU,CAAAP,SAAA,CAAC,aAAWlC,OAE3BgC,eAACG,IAAI,CAACK,GAAI,GAAGN,SAAA,CACRlC,EAASc,SAAS,UAAYb,GAAWsC,cAACG,WAAQ,CAACC,KAAM1C,EAAQoB,KAAMuB,QAAS3C,EAAQmB,KAAMyB,eAAe,iBAAiBC,oBAAoB,YAClJ9C,EAASc,SAAS,SAAWb,GAAWsC,cAAA,OAAAL,SAAMjC,EAAQ8C,MAAM,MAAMC,IAAIC,GAAKV,cAAA,OAAAL,SAAMe,QAChFjD,EAASc,SAAS,SAAWd,EAASc,SAAS,UAAYyB,cAAA,OAAKW,IAAK3C,EAAQ4C,IAAI,kBAEvFZ,cAACJ,IAAI,CAACK,GAAI,GAAGN,SACTK,cAACE,IAAU,CAAAP,SAAC,8E","file":"static/js/7.47dd85bd.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Grid, Typography } from '@material-ui/core';\r\nimport { useSnackbar } from 'notistack';\r\nimport Service from 'business/services/file.service';\r\nimport {OutTable, ExcelRenderer} from 'react-excel-renderer';\r\n\r\nconst UI = (props) => {\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const id = props.match.params.id;\r\n    const filename = props.match.params.filename;\r\n    const [details, setDetails] = React.useState(null);\r\n    const [loading, setLoading] = React.useState(false);\r\n    const imgRef = React.useRef(null);\r\n\r\n    React.useEffect(() => {\r\n        Service.download(id)\r\n            .then((file) => {\r\n                if (filename.endsWith('.xlsx')) {\r\n                    ExcelRenderer(file, (err, resp) => {\r\n                        if(err){\r\n                        console.log(err);            \r\n                        }\r\n                        else{\r\n                            setDetails({\r\n                            cols: resp.cols,\r\n                            rows: resp.rows\r\n                        });\r\n                        }\r\n                    });    \r\n                }    \r\n                else if (filename.endsWith('.jpg') || filename.endsWith('.png')) {\r\n                    imgRef.current.src = URL.createObjectURL(file);\r\n                }    \r\n                else if (filename.endsWith('.txt')) {\r\n                    file.text().then(r => setDetails(r))\r\n                }    \r\n            }).catch(e => {\r\n                enqueueSnackbar('Could not Download Or View file', { variant: 'error' });\r\n            }).finally(e => setLoading(false))\r\n    }, [enqueueSnackbar, id, filename]);\r\n\r\n    if (loading) return <>Loading {filename}</>\r\n    return (<Grid container style={{padding: 10}}>\r\n        <Grid md={12}>\r\n            <Typography>Filename: {filename}</Typography>\r\n        </Grid>\r\n        <Grid md={12}>\r\n            {filename.endsWith('.xlsx') && details && <OutTable data={details.rows} columns={details.cols} tableClassName=\"ExcelTable2007\" tableHeaderRowClass=\"heading\" />}\r\n            {filename.endsWith('.txt') && details && <div>{details.split('\\n').map(i => <div>{i}</div>)}</div>}\r\n            {(filename.endsWith('.jpg') || filename.endsWith('.png')) && <img ref={imgRef} alt=\"Loading...\" />}\r\n        </Grid>\r\n        <Grid md={12}>\r\n            <Typography>Only excel, txt and image files can be viewed. [xlsx, img, png, txt]</Typography>\r\n        </Grid>\r\n    </Grid>);\r\n};\r\n\r\nexport default UI;\r\n"],"sourceRoot":""}